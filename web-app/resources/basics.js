if(window.debugMode!="unit_test"){var topLevelDomains={com:!0,org:!0,net:!0,edu:!0,gov:!0,mil:!0,info:!0,co:!0,ac:!0},subDomain=document.domain.split(".");if(subDomain.length>2){var beforeLastPart=subDomain[subDomain.length-2];topLevelDomains[beforeLastPart]?subDomain=subDomain[subDomain.length-3]+"."+subDomain[subDomain.length-2]+"."+subDomain[subDomain.length-1]:subDomain=subDomain[subDomain.length-2]+"."+subDomain[subDomain.length-1]}try{document.domain=subDomain}catch(e){}}define.Const("CoreClasses",{HIDDEN:"hidden"}),define.Const("CoreEvents",{CLICK:"click",KEY_DOWN:"keydown",KEY_UP:"keyup",KEY_PRESS:"keypress",COPY:"copy",CUT:"cut",BLUR:"blur",FOCUS:"focus",PASTE:"paste",MOUSE_OVER:"mouseover",MOUSE_OUT:"mouseout",MOUSE_DOWN:"mousedown",MOUSE_UP:"mouseup",MOUSE_MOVE:"mousemove",MOUSE_WHEEL:"mousewheel",CHANGE:"change",INPUT:"input",RESIZE:"resize",SCROLL:"scroll"}),define.Const("DisplayEvents",{ADDED_TO_DOM:"insertedToDOM",REMOVED_FROM_DOM:"removedFromDOM",DISPLAYED:"displayed!",COLLAPSED:"collapsed!",DISPLAY_CHANGED:"displayed?",MOVED_IN_DOM:"movedInDOM",SKIN_CHANGE:"skinChange"}),define.bootstrapClass("bootstrap.extendnative.Array",function(){return Array.implement({moveItem:function(e,t){var n=this[e];t<0&&(t=0),t>this.length-1&&(t=this.length-1),this.splice(e,1),this.splice(t,0,n)},getIndexByField:function(e,t){for(var n=0,r=this.length;n<r;n++)if(this[n][e]==t)return n;return-1},getByField:function(e,t){var n=this.getIndexByField(e,t);return n>=0?this[n]:undefined},indexOfByPredicate:function(e){for(var t=0;t<this.length;t++)if(e(this[t]))return t;return-1},intersect:function(e,t){return this.filter(function(n){return e.some(function(e){return t?t(n,e):n===e})})},isIntersecting:function(e,t){return this.some(function(n){return e.some(function(e){return t?t(n,e):n===e})})},first:function(e){var t;for(var n=0;!t&&n<this.length;n++)e(this[n])&&(t=this[n]);return t},eraseWithPredicate:function(e){var t=this.filter(e);return t.forEach(function(e){this.erase(e)},this),this},toMap:function(e){var t={};for(var n=0;n<this.length;n++){var r=e(this[n],n,this);t[r]=this[n]}return t}}),Array.isArray||Array.implement({isArray:function(e){return Object.prototype.toString.call(e)==="[object Array]"}}),Array}),define.bootstrapClass("bootstrap.extendnative.Element",function(){return Element.implement({cleanup:function(){var e=$(this.parentNode);e&&e.removeEvents(Constants.DisplayEvents.ADDED_TO_DOM)},insertInto:function(e,t,n){if(!e)return LOG.reportError(wixErrors.CM_NULL_PARENT,"Element","insertInto"),this;if(!t&&this.getParent()===e)return this;var r=$(e);r.grab(this,t);if("before"==t||"after"==t){e=e.parentNode;if(null===e)return LOG.reportError(wixErrors.CM_NULL_PARENT,"Element","insertInto"),this}var i=Constants.DisplayEvents.ADDED_TO_DOM;return this.getLogic&&this.getLogic().getIsDisplayed()&&(i=Constants.DisplayEvents.MOVED_IN_DOM),n=n||i,this.isNodeDisplayed()&&this.fireEventRecursively(Constants.DisplayEvents.ADDED_TO_DOM,n),this},fireEventRecursively:function(e,t,n){this.fireEvent(e,t,n);var r=this.getChildren();for(var i=0;i<r.length;i++){var s=r[i];s.fireEventRecursively&&s.fireEventRecursively(e,t,n)}},removeFromDOM:function(){var e=this.isNodeDisplayed();if(this.parentNode){var t=$(this.parentNode);t&&t.removeEvent(Constants.DisplayEvents.ADDED_TO_DOM,this._insertedToDOMCB),this.dispose()}e&&this._onDisplayChangedEvent(Constants.DisplayEvents.REMOVED_FROM_DOM,0)},setCollapsed:function(e){e?this.collapse():this.uncollapse()},toggleCollapsed:function(){return this.hasClass(Constants.CoreClasses.HIDDEN)?this.uncollapse():this.collapse(),this},collapse:function(){return!1===this.hasClass(Constants.CoreClasses.HIDDEN)&&(this.addClass(Constants.CoreClasses.HIDDEN),this._onDisplayChangedEvent(Constants.DisplayEvents.COLLAPSED,0)),this},uncollapse:function(e){return this.hasClass(Constants.CoreClasses.HIDDEN)&&(this.removeClass(Constants.CoreClasses.HIDDEN),e&&this.addClass(e),this._onDisplayChangedEvent(Constants.DisplayEvents.DISPLAYED,0)),this},triggerDisplayChanged:function(){this._onDisplayChangedEvent(Constants.DisplayEvents.DISPLAY_CHANGED,0)},isConnectedToDOM:function(){var e=this,t=document.documentElement;while(e){if(e.documentElement==t)return!0;e=e.parentNode}return!1},isCollapsed:function(){var e=document.documentElement,t=this;while(t){if(e==t.documentElement)return!1;var n=t.style,r=t.getStyle("display");if("none"==r||t.hasClass("hidden"))return!0;t=t.parentNode}return!1},isNodeDisplayed:function(){var e=this,t=document.documentElement;while(e){if(typeOf(e)=="document")return!0;var n=$(e);if(!n)return!1;var r=n.getStyle("display");if("none"==r||n.hasClass("hidden"))return!1;e=e.parentNode}return!1},_onDisplayChangedEvent:function(e){var t,n,r,i;if(this.getElementsByTagName){t=this.getElementsByTagName("*")||[];if(Browser.ie)if(Array.slice)t=Array.slice(t);else{r=[];for(n=t.length-1;n>=0;--n)r[n]=t[n];t=r}else t=Array.prototype.slice.call(t)}else t=this.getElements("*")||[];for(n=0,i=t.length;n<i;++n)try{r=t[n],r.fireEvent&&r.fireEvent(e,e)}catch(s){this._reportUnknownError(s)}try{this.fireEvent(e,e)}catch(o){this._reportUnknownError(o)}},_reportUnknownError:function(e){var t=this&&this.getLogic&&this.getLogic()&&this.getLogic()._editedComponent&&this.getLogic()._editedComponent.$className||"no component name",n=e&&e.message||"no message",r=wixErrors.UNKNOWN_ERROR;r.ignore=!0,LOG.reportError(r,"Element.js",t,n)},_insertedToDOM:function(e){this.fireEvent(Constants.DisplayEvents.ADDED_TO_DOM,e)},getContentRect:function(e){e=e||$$("body")[0];var t=this.getCoordinates(e);return this.getElements("div").forEach(function(n){if(n.isVisible()===!0&&n.isDisplayed()===!0){var r=n.getCoordinates(e);r.left<t.left&&(t.left=r.left),r.right>t.right&&(t.right=r.right),r.top<t.top&&(t.top=r.top),r.bottom>t.bottom&&(t.bottom=r.bottom)}}),t.width=t.right-t.left,t.height=t.bottom-t.top,t},_insertedToDOMCB:null}),Element.NativeEvents.cut=2,Element.NativeEvents.paste=2,Element.Events.paste={base:"paste",condition:function(e){return this.fireEvent(Constants.CoreEvents.PASTE,e,1),!1}},Element.Events.cut={base:"cut",condition:function(e){return this.fireEvent(Constants.CoreEvents.CUT,e,1),!1}},Element}),Object.isEquivalent=function(e,t){if(typeof e!=typeof t)return!1;if(e instanceof Array&&!(t instanceof Array))return!1;if(typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof t=="function")return e===t;var n=0,r=e instanceof Array;if(!r){for(var i in e){if(e.hasOwnProperty(i)&&!t.hasOwnProperty(i))return!1;++n}for(i in t)t.hasOwnProperty(i)&&n--;if(n!==0)return!1;for(i in e)if(e.hasOwnProperty(i)&&!Object.isEquivalent(e[i],t[i]))return!1;return!0}var s=function(e,n){return Object.isEquivalent(e,t[n])};return e.length==t.length&&e.every(s,t)},define.Class("bootstrap.managers.BaseManager",function(e){var t=e;t.inherits("bootstrap.utils.Events"),t.methods({isReady:function(){return!0},clone:function(e){var t=this.$className,n;e.getResourceFetcher().getResourceValue("W.Classes",function(e){e.getClass(t,function(e){n=new e})});if(!n)throw new Error("clone failed: "+t);return n}})}),define.oldClass({name:"bootstrap.managers.InputBindings",Class:{Extends:"bootstrap.managers.BaseManager",Binds:["isStopCallback"],initialize:function(){this._listener=Mousetrap;try{this._listener.unpause()}catch(e){console.error("throw new Error('Mousetrap not loaded');")}},isReady:function(){return!0},clone:function(){return new this.$class},addBinding:function(e,t,n){t=t||{};if(!e)return;var r=n?"bindGlobal":"bind",i=t.keypressType,s=t.command,o=t.commandParameter;!s&&t.commandName&&(s=W.Commands.getCommand(t.commandName)),this._listener[r](e,function(e,t){return s&&s.isEnabled()&&(e.combo=t,s.execute(o,e)),e.preventDefault(),e.stopPropagation(),!1},i)},removeBinding:function(e,t){this._listener.unbind(e,t)},setKeysEnabled:function(e){e?this._listener.unpause():this._listener.pause()},getKeysEnabled:function(){return this._listener.isEnabled()},isStopCallback:function(e,t,n,r){return this._listener.stopCallback(e,t,n,r)}}}),define.bootstrapClass("bootstrap.managers.classmanager.ClassDefinition",function(){"use strict";function t(){this.$constructor=t,this._extends_=undefined,this._binds_=undefined,this._traits_=undefined,this._statics_=undefined,this._fields_={},this._methods_={},this._imports_=undefined,this._resources_=undefined,this._onClassReadyFunc_=undefined,this._inheritStrategy_=new e}var e=this.define.getBootstrapClass("bootstrap.managers.classmanager.InheritStrategy");return t.extendPrototype({InheritStrategy:e,inherits:function(e){this._extends_=e},binds:function(e){this._binds_=e},traits:function(e){this._traits_=e},statics:function(e){typeof e=="function"&&LOG.reportError(wixErrors.INVALID_STATICS_PARAM,"classDefinition","statics"),this._statics_=e},fields:function(e){typeof e=="function"&&LOG.reportError(wixErrors.INVALID_FIELDS_PARAM,"classDefinition","fields"),this._fields_=e},methods:function(e){typeof e=="function"&&LOG.reportError(wixErrors.INVALID_METHODS_PARAM,"classDefinition","methods"),this._methods_=e},resources:function(e){this._resources_=e},utilize:function(e){this._imports_=e},onClassReady:function(e){this._onClassReadyFunc_=e}}),t}),define.bootstrapClass("bootstrap.managers.classmanager.ClassManager",function(){function e(){}return e.extendPrototype({init:function(){var e=this;return resource.getResources(["scriptLoader","W.Experiments"],function(t){var n=t.scriptLoader;e._experimentManager=t.W.Experiments;var r=e.define.getBootstrapClass("bootstrap.managers.classmanager.ClassDefinition");e._classRepo=e.define.createBootstrapClassInstance("bootstrap.managers.classmanager.ClassRepository").init(n,e),e._classParser=e.define.createBootstrapClassInstance("bootstrap.managers.classmanager.ClassParser").init(e._classRepo,r,e._experimentManager),e.define.Class.definitionModifier=e._onClassDefineCallBack.bind(e)}),this},addClassNamespaceHook:function(e){this._classRepo.classNamespacesHooks.push(e)},addClassReadyHandler:function(e){this._classRepo.classReadyHandlers.push(e)},loadMissingClasses:function(){this._classRepo.loadMissingClasses()},getClass:function(e,t){var n=this._classRepo.getClassStatus(e);if(n=="ready"){var r=this._classRepo.getClass(e);return t&&t(r),r}this._getNotReadyClass(e,n,t)},_getNotReadyClass:function(e,t,n){this._classRepo.addToWaitingForReady(e,n);switch(t){case"loaded":var r=this.define.getDefinition("Class"),i=nsUtil.getNameSpace(r,e),s=this._classParser.registerNewClass(e,i);s&&s.length>0&&this._getClassDependencies(s);break;case"missing":this._classRepo.addClassesToScriptLoadingQueue([e])}},_getClassDependencies:function(e){for(var t=0;t<e.length;t++){var n=this._classRepo.getClassStatus(e[t]);n!="ready"&&this.getClass(e[t])}},registerClassDefinition:function(e,t){var n=this._classParser.registerClassDefinition(e,t);n&&n.length>0&&this._getClassDependencies(n)},get:function(e,t){return this.getClass(e,t)},_onClassDefineCallBack:function(e,t){return this._classRepo.isClassWaitingForReady(e)&&this._classParser.registerNewClass(e,t),t},override:function(e,t){this._classRepo.override(e,t)},overrideDependency:function(e,t){return this._classParser.override(e,t)},getClassStatus:function(e){return this._classRepo.getClassStatus(e)},getClassStatusDetails:function(e){return this._classRepo.getClassStatusDetails(e)},newClass:function(e){if(this._classRepo.getClass(e.name)){LOG.reportError(wixErrors.CLASS_ALREADY_EXIST,this.className,"newClass",e.name);return}var t=this._classParser.registerClass(Object.clone(e));return this.getClass(e.name)},newTrait:function(e){e.Class=e.trait,delete e.trait,this.newClass(e)},newClasses:function(e){Object.forEach(e,this.newClass.bind(this))},_getClassDataErrorCode:function(e){this._classParser._getClassDataErrorCode(e)},removeClass:function(e){this._classRepo.deleteClass(e)},isReady:function(){return this._classRepo&&this._classRepo.isReady()},clone:function(e){var t=e.createBootstrapClassInstance("bootstrap.managers.classmanager.ClassManager",[]),n=e.getBootstrapClass("bootstrap.managers.classmanager.ClassDefinition");return t._classRepo=this._classRepo.clone(e),e.getResourceFetcher().getResourceValue("W.Experiments",function(r){t._experimentManager=r,t._classParser=e.createBootstrapClassInstance("bootstrap.managers.classmanager.ClassParser",[t._classRepo,n,t._experimentManager])}),t}}),e}),define.bootstrapClass("bootstrap.managers.classmanager.ClassParser",function(){function e(){this.registerClass=this.registerClass.bind(this)}return e.extendPrototype({init:function(e,t,n){return this._repository=e,this._overrides={},this.ClassDefinition=t,this._experimentManager=n,this},override:function(e,t){this._overrides[e]=this._overrides[e]||[];var n=this._overrides[e].length?this._overrides[e].getLast():e;return this._overrides[e].push(t),n},registerNewClass:function(e,t){var n=new this.ClassDefinition;return t(n,n._inheritStrategy_),n=this._experimentManager.applyExperiments(e,n),this.registerClassDefinition(e,n)},registerClassDefinition:function(e,t){var n=this._transformClassDefToClassData(e,t);return n._classDef_=t,this.registerClass(n)},registerClass:function(e){if(this._checkClassRegistraionErrors(e))return;var t=this._getItemDependencies(e);this._registerDependencies(t);var n=this._repository.areClassesReady(t);if(!n)return this._repository.registerDependentClass(t,this.registerClass,e),t;this._prepClassData(e);var r=this._prepResources(e);if(r&&r.length){var i=this;e.Class.Resources=r,resource.getResources(r,function(t){e.Class.$Resources=t,i._createAndRegisterWClass(e)})}else this._createAndRegisterWClass(e)},_createAndRegisterWClass:function(e){var t=new WClass(e.Class,e.name);t._classDef_=e._classDef_,e.Class.Extends&&this._overrideClassObjectFields(t.prototype.Extends.prototype,t.prototype),this._repository.registerClass(t),e.onClassReady&&e.onClassReady(t)},_checkClassRegistraionErrors:function(e){var t=this._getClassDataErrorCode(e);if(t)return LOG.reportError(wixErrors.CLASS_INVALID_PENDING_OBJECT,e&&e.name||"Unknown class","class data validation",t),!0},_registerDependencies:function(e){var t=this.define.getDefinition("Class");for(var n=0;n<e.length;++n){var r=e[n];if(this._repository.getClassStatus(r)==="loaded"){var i=nsUtil.getNameSpace(t,r);this.registerNewClass(r,i)}}},_getFullNotReadyDependencyList:function(e,t,n){var n=n||{};for(var r=0;r<t.length;r++){var i=t[r];if(i===e||n[i])continue;var s=this._repository.getClassWaitingDependencies(i);if(s){var o=[];for(var u=0;u<s.length;u++)this._repository.isClassReady(s[u])||o.push(s[u]);o.length>0&&(n[i]=o,this._getFullNotReadyDependencyList(e,o,n))}return n}},_checkReadyRamificationsOnDependencies:function(e,t){var n=[];for(var r in t){var i=t[r];for(var s=0;s<i.length;s++){var o=i[s];if(!t[o]&&e!==o)return!1}}return!0},_transformClassDefToClassData:function(e,t){var n={name:e,traits:t._traits_,imports:t._imports_,onClassReady:t._onClassReadyFunc_,Class:{Resources:t._resources_,Extends:t._extends_,Binds:t._binds_,Static:t._statics_}};for(var r in t._methods_){var i=t._methods_[r];n.Class[r]=i}for(var s in t._fields_){var o=t._fields_[s];n.Class[s]=o}return n},_overrideClassObjectFields:function(e,t){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n],i;if(r instanceof Function&&r.mergeFlag){r=r();if(typeOf(r)=="object"){i=Object.clone(e[n]);for(var s in r)r.hasOwnProperty(s)&&(r[s]===undefined?delete i[s]:i[s]=r[s])}else typeOf(r)=="array"&&(i=e[n].clone(),i.combine(r));t[n]=i}else if(r&&r.cloneFlag){var o=e[n];typeOf(o)=="object"?i=Object.clone(e[n]):typeOf(o)=="array"?i=e[n].clone():typeOf(o)=="string"&&(i=e[n]),t[n]=i}else r&&r.beforeFlag?function(){var i=e[n],s=r();t[n]=function(){s.apply(this,arguments),i.apply(this,arguments)}}():r&&r.aroundFlag?function(){var i=n,s=e[n],o=r();t[n]=function(){var e=this,n=Array.prototype.splice.call(arguments,0),r=!1;n.splice(0,0,function(){return r=!0,s.apply(e,n.slice(1))});var u=o.apply(this,n);return r||LOG.reportError(wixErrors.EXPERIMENT_INVALID_MODIFY+" - Original method was not called",t.className,i,n.slice(1)),u}}():r&&r.afterFlag&&function(){var i=e[n],s=r();t[n]=function(){i.apply(this,arguments),s.apply(this,arguments)}}()}},_getItemDependencies:function(e){var t=[];return e.Class&&e.Class.Extends&&t.combine(this._extractStringsOnlyArray(e.Class.Extends)),e.imports&&t.combine(this._extractStringsOnlyArray(e.imports)),e.traits&&t.combine(this._extractStringsOnlyArray(e.traits)),t=this._replaceDependenciesWithOverrides(e.name,t),t},_replaceDependenciesWithOverrides:function(e,t){return Object.keys(this._overrides).length&&Array.each(t,function(n,r){if(this._overrides[n]){var i=this._overrides[n].length-1,s=this._overrides[n].indexOf(e);s>=0&&(i=s?s-1:0),this._overrides[n][i]!=e&&(t[r]=this._overrides[n][i])}}.bind(this)),t},_extractStringsOnlyArray:function(e){return typeOf(e)=="string"?[e]:typeOf(e)=="array"?e.filter(this._isString):[]},_isString:function(e){return typeOf(e)=="string"},_prepClassData:function(e){e=this._prepClassExtends(e),e=this._prepClassTraits(e),e=this._prepClassImports(e),e=this._prepClassInstanceOf(e);var t=window.W;return e.Class.injects=function(){return t},e.Class.define=this.define,e.Class.resource=this.resource,e},_prepClassExtends:function(e){return e.Class.Extends&&typeOf(e.Class.Extends)=="string"&&(e.Class.Extends=this._repository.getClass(e.Class.Extends)),e},_prepClassTraits:function(e){if(e.traits){e.Class.Implements=[];for(var t=0;t<e.traits.length;t++){var n=e.traits[t];e.Class.Implements.push(this._repository.getClass(n))}}return e},_prepClassImports:function(e){var t,n=e.Class.Extends,r=n&&n.prototype&&n.prototype.imports;r?t=Object.clone(n.prototype.imports):t={};if(e.imports){for(var i=0;i<e.imports.length;i++){var s=e.imports[i],o=s.split(".").getLast();t[o]?t[s]=this._repository.getClass(s):t[o]=this._repository.getClass(s)}e.Class.imports=t}if(e.Class.Implements)for(var u=0;u<e.Class.Implements.length;++u){if(!e.Class.Implements[u])return e;var a=e.Class.Implements[u].prototype;a&&a.imports&&(e.Class.imports||(e.Class.imports=[]),Object.merge(e.Class.imports,a.imports))}return e},_prepResources:function(e){var t=e.Class.Resources||[],n=e.Class.Extends,r=n&&n.prototype&&n.prototype.Resources;r=r?Array.clone(n.prototype.Resources):[],t=Array.combine(t,r);if(e.Class.Implements)for(var i=0;i<e.Class.Implements.length;++i){var s=e.Class.Implements[i].prototype;s&&s.Resources&&(t=Array.combine(t,s.Resources))}return t},_prepClassInstanceOf:function(e){return e.Class._instanceOf=e.Class.Extends&&e.Class.Extends.prototype&&e.Class.Extends.prototype._instanceOf||[],e.Class._instanceOf.push(e.name),e},_getClassDataErrorCode:function(e){return!e||typeOf(e.Class)!=="object"?"No class data was found":!e.name||!instanceOf(e.name,String)?"No class name":this._isValidClassName(e.name)?e.Extends&&typeOf(e.Extends)!="string"?"Extends must be a string":e.imports&&!this._isStringArray(e.imports)?"Invalid imports array":e.traits&&!this._isStringArray(e.traits)?"Invalid traits array":!1:"Invalid class name: "+e.name},_isValidClassName:function(e){var t=e.split("."),n=t.length-1;for(var r=0;r<n;r++){if(t[r].length===0)return!1;if(!t[r].test(/^[a-z][a-z0-9_]*$/))return!1}return t[n].test(/^[A-Z][A-Za-z0-9_]*$/)?!0:!1},_isStringArray:function(e){return typeOf(e)!="array"?!1:e.every(function(e){return typeOf(e)=="string"})}}),e}),define.bootstrapClass("bootstrap.managers.classmanager.ClassRepository",function(e){function t(){this.loadMissingClasses=this.loadMissingClasses.bind(this)}return t.extendPrototype({init:function(e,t){return this._readyClasses={},this._waitingForDependencies={},this._waitingForClassReady={},this._scriptLoadingQueue=[],this._scriptLoader=e,this._loadingMissingClassesStarted=!!t,this._loadingMissingClassesTimer=null,this.classNamespacesHooks=[],this.classReadyHandlers=[],this},getClass:function(e){return this._readyClasses[e]||null},getClassWhenReady:function(e,t){if(this.isClassReady(e))return t&&t(this.getClass(e)),this.getClass(e);this.isClassLoaded(e)||this.addClassesToScriptLoadingQueue([e]),this._waitingForClassReady[e]||(this._waitingForClassReady[e]=[]),t&&this._waitingForClassReady[e].push(t)},addToWaitingForReady:function(e,t){this._waitingForClassReady[e]||(this._waitingForClassReady[e]=[]),t&&this._waitingForClassReady[e].push(t)},getClassStatus:function(e){return this.isClassReady(e)?"ready":this.isClassWaitingForDependencies(e)?"pending":this.isClassLoaded(e)?"loaded":"missing"},getClassStatusDetails:function(e,t){t||(t=1);var n=this.getClassStatus(e);if(n==="ready")return"ready";if(n==="missing")return"missing";var r="pending:\n",i=this._waitingForDependencies[e].dependenciesArray;for(var s=0;s<i.length;s++){var o=this.getClassStatusDetails(i[s],t+1);o!="ready"&&(r+=this._addTabs(t)+"class :"+i[s]+":"+o)}return r},_addTabs:function(e){var t="";for(var n=0;n<e;n++)t+="	";return t},registerClass:function(e){var t=e.prototype.$className;this._readyClasses[t]=e;for(n=0;n<this.classReadyHandlers.length;++n)this.classReadyHandlers[n](t,e);if(this._waitingForClassReady[t]){for(var n=0;n<this._waitingForClassReady[t].length;n++)this._waitingForClassReady[t][n](e);delete this._waitingForClassReady[t]}for(var r in this._waitingForDependencies){var i=this._waitingForDependencies[r];this.areClassesReady(i.dependenciesArray)&&(delete this._waitingForDependencies[r],i.callback(i.classData))}},isClassReady:function(e){return typeof this._readyClasses[e]!="undefined"},deleteClass:function(e){delete this._readyClasses[e]},areClassesReady:function(e){var t,n,r=!0;for(t=0,n=e.length;t<n;t++)if(!this.isClassReady(e[t])){r=!1;break}return r},registerDependentClass:function(e,t,n){if(this.areClassesReady(e)){t(n);return}this._waitingForDependencies[n.name]={dependenciesArray:e,callback:t,classData:n},this.addClassesToScriptLoadingQueue(e)},loadMissingClasses:function(){var e=this._filterLoadedClassesFromList(this._scriptLoadingQueue);clearTimeout(this._loadingMissingClassesTimer),delete this._loadingMissingClassesTimer,this._loadingMissingClassesStarted=!0;for(var t=0;t<this._scriptLoadingQueue.length;++t){var n={url:this._scriptLoadingQueue[t]};this._scriptLoader.loadResource(n)}this._scriptLoadingQueue=[]},isClassLoaded:function(e){var t=this.define.getDefinition("Class");return nsUtil.getNameSpace(t,e)},isClassWaitingForDependencies:function(e){return this._waitingForDependencies[e]},getClassWaitingDependencies:function(e){return this.isClassWaitingForDependencies(e)?this._waitingForDependencies[e].dependenciesArray:null},isClassWaitingForReady:function(e){return this._waitingForClassReady[e]},isReady:function(){var e;for(e in this._waitingForDependencies)return!1;this._scriptLoadingQueue=this._filterLoadedClassesFromList(this._scriptLoadingQueue);if(this._scriptLoadingQueue.length)return!1;for(e in this._waitingForClassReady)return!1;return!0},clone:function(e){return e.createBootstrapClassInstance("bootstrap.managers.classmanager.ClassRepository",[this._scriptLoader,this._loadingMissingClassesStarted])},addClassesToScriptLoadingQueue:function(e){var t=this._filterLoadedClassesFromList(e);this._loadClassesFromOtherNameSpaces(t),t=this._filterLoadedClassesFromList(t),this._scriptLoadingQueue.combine(t),this._loadingMissingClassesStarted&&!this._loadingMissingClassesTimer&&(this._loadingMissingClassesTimer=setTimeout(this.loadMissingClasses,10))},_loadClassesFromOtherNameSpaces:function(e){var t,n,r,i=[];for(t=0;t<e.length;t++)for(n=0;n<this.classNamespacesHooks.length;n++)this.getClassStatus(e[t])==="missing"&&this.classNamespacesHooks[n](e[t])},_filterLoadedClassesFromList:function(e){var t=this;return e.filter(function(e){return t.getClassStatus(e)==="missing"})},override:function(e,t){if(!e)throw new Error("Invalid class name for override");this._readyClasses[e]=t}}),t}),define.experimentPlugin("ExperimentClassPlugin",function(e){function n(e,t){var n=this.define.getBootstrapClass("bootstrap.managers.classmanager.ClassDefinition"),r=this.define.createBootstrapClassInstance("bootstrap.managers.experiments.ExperimentStrategy"),i=e;typeof e=="function"&&(i=new n,e(i));var s=new n;return t(s,r),i.inherits(s._extends_||i._extends_),i.resources(r._mergeField_(i._resources_,s._resources_)),i.binds(r._mergeField_(i._binds_,s._binds_)),i.traits(r._mergeField_(i._traits_,s._traits_)),i.utilize(r._mergeField_(i._imports_,s._imports_)),i.statics(r._mergeObjects_(i._statics_,s._statics_)),i.fields(r._mergeObjects_(i._fields_,s._fields_)),i.methods(r._mergeObjects_(i._methods_,s._methods_)),i}function r(e,t){define.Class(e,t)}var t=e;t.init("Class","newClass",n,r)}),define.bootstrapClass("bootstrap.managers.classmanager.InheritStrategy",function(){"use strict";function e(){}return e.extendPrototype({STRATEGIES:{INHERIT:"inherit",MERGE:"merge",OVERRIDE:"override"},inherit:function(){return{_strategy_:this.STRATEGIES.INHERIT}},merge:function(e,t){return{_strategy_:this.STRATEGIES.MERGE,include:e,exclude:t}},getInheritStrategy:function(e){return e?e._strategy_||this.STRATEGIES.OVERRIDE:this.STRATEGIES.OVERRIDE}}),e}),define.bootstrapClass("bootstrap.bootstrap.WClass",function(){function e(e,t){var n=this;e=e||{},e.className=t||e.className,n.validateScope(this,e.className);if(!n.validateClassData(e))return n.InvalidWClass;e.$className=e.className;var r=n.clonePrototype(e.Extends),i={};for(var s in r)i[s]=r[s];n.implementTraits(e.Implements,i);for(s in e)i[s]=e[s];var o=i.Static;delete i.Static,e.Extends||(e.hasOwnProperty("toString")&&typeof e.toString=="function"?i.toString=e.toString:i.toString=this._$wclassToString,i.hasClassAncestor=this._hasClassAncestor),r.Implements instanceof Array&&i.Implements.combine(r.Implements),i.Binds=n.aggregateBinds(i.Binds,r.Binds,i.Implements),i.$parentPrototype=r,i.parent=function(){var e,t,r=i.parent.caller||arguments.callee.caller||arguments.caller;r=r.$wrapperFunction||r;if(!r)throw new Error("no caller!");do{e=e?e.$parentPrototype:i;if(!e)return;for(t in e)if(e[t]===r)break}while(e[t]!==r);if(!e||!e[t]||!e.$parentPrototype)return;var s=n.realParent(e);while(e[t]===s[t])e=s,s=n.realParent(e);e=n.realParent(e);if(!e||!e[t]||typeof e[t]!="function")return;return e[t].apply(this,arguments)};var u=function(){n.validateScope(this),n.clonePrototypeObjects(this),n.bindMethods(i.Binds,this),i.initialize&&typeof i.initialize=="function"&&i.initialize.apply(this,arguments),n.initializeTraits(i.Implements,this,arguments)},a=(new Function("_","return function "+e.className.split(".").pop()+" (){ return _.apply(this,arguments); };"))(u),f={};return f[e.className]=a,n.copyStatic(a,i,o,e.Extends),i.constructor=f[e.className],a.prototype=i,i.$class=a,e.$Resources&&(i.resources=e.$Resources),i.$class.$originalClassName=i.$className,i.getOriginalClassName=function(){return i.$class.$originalClassName||i.$className},e.$extendsName?(i.$class.$extendsName=e.$extendsName,delete e.$extendsName):delete i.$class.$extendsName,a}e.extendPrototype({constructor:window.WClass,realParent:function(e){var t=e.$parentPrototype;while(t&&t.$className&&e.$class.$extendsName&&e.$class.$extendsName!=t.$className)t=t.$parentPrototype;return t},validateScope:function(e){(e===window||!e)&&LOG.reportError(wixErrors.WCLASS_CLASS_MUST_USE_NEW_OP,"WClass","validateScope")();for(var t in e)e.hasOwnProperty(t)&&LOG.reportError(wixErrors.WCLASS_CLASS_MUST_USE_NEW_OP,"WClass","validateScope")()},clonePrototype:function(e){if(typeof e!="function")return{};var t={},n=e.prototype||{};if(n===Function.prototype||n===Function)return t;for(var r in n)if(n.hasOwnProperty(r)||r=="toString")t[r]=n[r];return t},validateClassData:function(e){var t;if(typeof e!="object")return LOG.reportError(wixErrors.WCLASS_CLASS_DATA_INVALID,"WClass","validateClassData",t)();if(typeof e.className!="string"||e.className.length===0)return LOG.reportError(wixErrors.WCLASS_CLASS_EMPTY_STRING,"WClass","validateClassData")();for(t in e)if(this.reservedWords.indexOf(t)!==-1)return LOG.reportError(wixErrors.WCLASS_CLASS_RESERVED,"WClass","validateClassData",t)();return!e.Implements||e.Implements instanceof Array?!e.Binds||e.Binds instanceof Array?!0:LOG.reportError(wixErrors.WCLASS_CLASS_DATA_INVALID,"WClass","validateClassData","Binds is not an array")():LOG.reportError(wixErrors.WCLASS_CLASS_DATA_INVALID,"WClass","validateClassData","Implements is not an array")()},reservedWordsForTraits:["initialize","parent","Extends","Implements","Binds","$parentPrototype","$className"],reservedWords:["parent","$parentPrototype","$className"],excludeFromClone:["define","resource","$Resources","resources"],bindMethods:function(e,t){var n,r,i;if(e instanceof Array)for(n=0,r=e.length;n<r;n++)i=e[n],typeof t[i]=="function"?t[i]=t[i].bind(t):LOG.reportError(wixErrors.WCLASS_INVALID_BIND,"WClass","bindMethods",i)},implementTraits:function(e,t){var n,r,i,s;t.Implements=[];if(e instanceof Array)for(n=0,r=e.length;n<r;n++){i=e[n],t.Implements.push(i),typeof i=="function"&&(i=i.prototype);for(s in i)s&&this.reservedWordsForTraits.indexOf(s)===-1&&(t[s]=i[s])}},initializeTraits:function(e,t,n){var r,i,s;if(e instanceof Array)for(r=0,i=e.length;r<i;r++){s=e[r],typeof s=="function"&&(s=s.prototype);var o=s.initialize;o&&typeof o=="function"&&o.apply(t,n)}},clonePrototypeObjects:function(e){var t;for(t in e)e[t]&&typeof e[t]=="object"&&this.excludeFromClone.indexOf(t)===-1&&t.charAt(0)!=="$"&&(e[t]=e[t]instanceof Array?e[t].clone():Object.clone(e[t]))},copyStatic:function(e,t,n,r){var i;if(typeof r=="function")for(i in r)r.hasOwnProperty(i)&&(e[i]=r[i]);if(n){var s=n instanceof Function;n=s?n():n;for(i in n){if(t[i]&&!s)throw new Error("The property "+i+" conflicts with a static property");e[i]=t[i]=n[i]}}},aggregateBinds:function(e,t,n){var r=[];return e instanceof Array&&r.combine(e),t instanceof Array&&r.combine(t),n&&n.forEach(function(e){e.Binds instanceof Array?r.combine(e.Binds):e.prototype&&e.prototype.Binds instanceof Array&&r.combine(e.prototype.Binds)}),r},_findMethod:function(e,t){while(e){if(e.hasOwnProperty(t)){var n=e[t];if(typeof n=="function")return n}if(!e.Extends)return null;e=e.Extends.prototype}return null},_hasClassAncestor:function(e,t){var n=this;do{var r=n.className,i;if(t){var s=new RegExp("\\.?"+e+"(\\.|$)");i=r&&r.match(s)}else i=r==e;if(i)return!0;n=n.Extends&&n.Extends.prototype}while(n);return!1},_$wclassToString:function(){return"[wclass "+(this.className||"")+"]"},InvalidWClass:function(){throw new Error("invalid WClass")},isReady:function(){return!0}});var t=window.instanceOf,n,r=window;return r.instanceOf=n=function(i,s){if(s===e&&i&&typeof i=="function"&&i.prototype&&i.prototype.$className)return!0;if(i&&i.$className&&typeof s=="function"&&s.prototype&&s.prototype.$className)return i.getOriginalClassName()==s.prototype.getOriginalClassName()||instanceOf(i.$parentPrototype,s);r.instanceOf=t;var o=instanceOf(i,s);return r.instanceOf=n,o},e}),define.oldClass({name:"bootstrap.managers.commands.Command",Class:{initialize:function(e){this._listeners=[],this._zombies=[],this._isEnabled=!0,this._name=e,this._numTimesExecuted=0,this._broadcasting=!1},getNumTimesExecuted:function(){return this._numTimesExecuted},registerListener:function(e,t,n){var r=this._findListenerIndex(e,t);r<0&&(this._listeners.push({listener:e,onExecute:t,onEnabledChanged:n}),n&&n.call(e,this))},unregisterListener:function(e){if(this._broadcasting)this._zombies.push(e);else{var t;while((t=this._findListenerIndex(e))>=0)this._listeners.splice(t,1)}},dispose:function(){this._listeners=[]},getName:function(){return this._name},execute:function(e,t){if(!this._isEnabled)return;var n={command:this,source:t};this._numTimesExecuted++,this._broadcast("onExecute",[e,n])},setState:function(e){this._setEnabled(!!e)},enable:function(){this._setEnabled(!0)},disable:function(){this._setEnabled(!1)},isEnabled:function(){return this._isEnabled},_broadcast:function(e,t){var n=this._listeners.length;this._broadcasting=!0;for(var r=0;r<n;++r)try{var i=this._listeners[r],s=i[e];s&&s.apply(i.listener,t)}catch(o){W.Utils.debugTrace("Exception whlile processing command",this._name,o,o.stack||"")}this._broadcasting=!1,this._cleanupZombies()},_setEnabled:function(e){e=!!e,e!=this._isEnabled&&(this._isEnabled=e,this._broadcastEnabledChanged())},_broadcastEnabledChanged:function(){this._broadcast("onEnabledChanged",[this])},_cleanupZombies:function(){var e;if(0>=this._zombies.length)return;for(var t=this._zombies.length-1;t>=0;--t){var n=this._zombies[t];while((e=this._findListenerIndex(n))>=0)this._listeners.splice(e,1)}this._zombies=[]},_findListenerIndex:function(e,t){var n=this._listeners;for(var r=n.length-1;r>=0;--r)if(n[r].listener===e&&(t===undefined||n[r].onExecute===t))return r;return-1}}}),define.oldClass({name:"bootstrap.managers.commands.Commands",imports:["bootstrap.managers.commands.Command"],Class:{Extends:"bootstrap.managers.BaseManager",initialize:function(){return this._commandMap={},this._pendingMap={},this.Command=this.imports.Command,this},isReady:function(){return!0},clone:function(e){return this.parent(e)},toString:function(){return"[Commands Manager]"},getCommand:function(e){var t=null;return e&&(e instanceof this.Command?t=e:t=this._commandMap[e]||null),t},registerCommand:function(e,t){var n=this._commandMap[e];if(n)return t||LOG.reportError(wixErrors.COMMAND_DUPLICATE,"Commands","registerCommand",e),n;n=this.createCommand(e),this._commandMap[e]=n;var r=this._pendingMap[e];if(r){for(var i=0;i<r.length;++i){var s=r[i];n.registerListener(s.listener,s.executeCB,s.changedCB)}delete this._pendingMap[e]}return n},registerCommandAndListener:function(e,t,n,r,i){var s=this.registerCommand(e,i);return s.registerListener(t,n,r),s},executeCommand:function(e,t,n){var r=typeof e;"string"==r&&(e=this.getCommand(e)),e&&e.execute(t,n)},registerCommandListenerByName:function(e,t,n,r){var i=this.getCommand(e);if(i)i.registerListener(t,n,r);else{var s=this._pendingMap[e]||[];s.push({listener:t,executeCB:n,changedCB:r}),this._pendingMap[e]=s}},createCommand:function(e){return new this.Command(e)},unregisterCommand:function(e){var t=this._commandMap[e];t&&(t.dispose(),delete this._commandMap[e])},unregisterListener:function(e){for(var t in this._commandMap){var n=this._commandMap[t];n.unregisterListener(e)}}}}),define.oldClass({name:"bootstrap.managers.events.Command",Class:{Extends:"bootstrap.managers.events.EventDispatcher",Static:{EXECUTE_EVENT_NAME:"execute",STATE_CHANGED_EVENT_NAME:"stateChanged"},initialize:function(e){this._isEnabled=!0,this._name=e,this._numTimesExecuted=0,this._setEventSysId(e)},getNumTimesExecuted:function(){return this._numTimesExecuted},registerListener:function(e,t,n){t&&this.on(this.EXECUTE_EVENT_NAME,e,t),n&&this.on(this.STATE_CHANGED_EVENT_NAME,e,n)},unregisterListener:function(e){var t=this._getObjectId(e);this.injects().Events.removeEventsForListener(this.getEventsSysId(),t)},getName:function(){return this._name},execute:function(e,t){if(!this._isEnabled)return;this._numTimesExecuted++,this.trigger(this.EXECUTE_EVENT_NAME,{passedData:e,source:t})},enable:function(){this.setState(!0)},disable:function(){this.setState(!1)},setState:function(e){this._isEnabled!=e&&(this._isEnabled=e,this.trigger(this.STATE_CHANGED_EVENT_NAME,{currentState:this._isEnabled}))},isEnabled:function(){return this._isEnabled},isRemovingFromObjectsMapOnlyUponDeath:function(){return!0}}}),define.oldClass({name:"bootstrap.managers.events.CommandsManager",imports:["bootstrap.managers.events.Command","bootstrap.managers.events.ElementEventDispatching"],Class:{Extends:"bootstrap.managers.BaseManager",initialize:function(){new this.imports.ElementEventDispatching},isReady:function(){return!0},getCommand:function(e){var t=null;return e&&(e instanceof this.imports.Command?t=e:t=this.injects().Events.getObjectById(e)||null),t},registerCommand:function(e){var t=this.injects().Events.getObjectById[e];return t?t:new this.imports.Command(e)},registerCommandListener:function(e,t,n,r){var i=this.registerCommand(e);return i.registerListener(t,n,r),i},registerCommandAndListener:function(e,t,n,r){var i=this.registerCommand(e);return i.registerListener(t,n,r),i},executeCommand:function(e,t,n){e=this.getCommand(e),e&&e.execute(t,n)},registerCommandListenerByName:function(e,t,n,r){this.registerCommandAndListener(e,t,n,r)},createCommand:function(e){return new this.Command(e)},unregisterCommand:function(e){var t=this.getCommand(e);t.exterminate()},unregisterListener:function(e){var t=this.injects().Events.getObjectId(e);t&&this.injects().Events.deleteObjectFromMaps(t)},isCommandInstance:function(e){return e instanceof this.imports.Command}}}),define.oldClass({name:"bootstrap.managers.events.DispatcherToHandlersMap",Class:{_map:{},addHandler:function(e,t,n,r,i){var s=this._getWithInitHandlerObjectsForEventType(e,t),o=new this.HandlerObject(n,r,i);return s.push(o),o},isHandlerRegistered:function(e,t,n,r){var i=this._getWithInitHandlerObjectsForEventType(e,t);return i.some(function(e){return e.listenerId==n&&e.handler==r})},HandlerObject:function(e,t,n){this.listenerId=e,this.handler=t,n&&(this.nativeHandler=n)},removeHandler:function(e,t,n,r){var i=this._map[e];if(!i||!i[t])return null;var s=i[t],o=null;return s.eraseWithPredicate(function(e){return e.listenerId===n&&e.handler===r?(o=e,!0):!1}),s.length===0&&delete i[t],Object.keys(i).length===0&&delete this._map[e],o},removeListenerHandlers:function(e,t){var n=this._map[e],r={};for(var i in n){r[i]=[];var s=n[i];s.eraseWithPredicate(function(e){return e.listenerId===t?(r[i].push(e),!0):!1}),s.length===0&&delete n[i]}return r},deleteEntry:function(e){var t=this._map[e];return delete this._map[e],t},getHandlerObjects:function(e,t){var n=this._map[e];return!n||!n[t]?[]:n[t]},getAllHandlerObjectsForDispatcher:function(e){var t=this._map[e];if(!t)return[];var n=Object.values(t);return n.flatten()},getAllDispatcherIds:function(){return Object.keys(this._map)},_getWithInitHandlerObjectsForEventType:function(e,t){return this._map[e]||(this._map[e]={}),this._map[e][t]||(this._map[e][t]=[]),this._map[e][t]}}}),define.Class("bootstrap.managers.events.ElementEventDispatching",function(e){function n(e,t,n){var r=t;return n.condition&&(r=function(r){return n.condition.call(e,r)?t(r):!0}),r}function r(e,t,n){var r=null;return n&&(n==2?r=function(n){n=new Event(n,e.getWindow()),t(n)===!1&&n.stop()}:r=t),r}function i(){var e=W.Events.getAllDispatchingObjectIds().map(function(e){return this._objectsByIds.getObjectById(e)},this);return e.filter(function(e){return typeOf(e)=="element"})}var t=e;t.methods({initialize:function(){[Element,Window,Document].invoke("implement",{$alive:!0,getEventsSysId:function(){return this._getObjectId(this,!1)},_getObjectId:function(e,t){return e.$alive!==undefined&&!e.$alive?null:W.Events._objectsByIds.getObjectId(e,t)},on:function(e,t,i){var s=this._getObjectId(t,!0),o=this._getObjectId(this,!0),u=Element.Events[e],a=u&&u.base||e;if(W.Events.isHandlerRegistered(o,a,s,i))return this;var f=function(e){i.call(t,e)};u&&(u.onAdd&&u.onAdd.call(this,i),f=n(this,f,u));var l=Element.NativeEvents[a];return f=r(this,f,l),W.Events.addEventHandler(o,a,s,i,f),this},off:function(e,t,n){var r=this._getObjectId(t,!0),i=this._getObjectId(this,!0),s=Element.Events[e],o=s&&s.base||e;return W.Events.isHandlerRegistered(i,o,r,n)?(s&&s.onRemove&&s.onRemove.call(this,n),W.Events.removeEventHandler(i,o,r,n),this):this},trigger:function(e,t){var n=Element.Events[e],r=n&&n.base||e,i=Element.NativeEvents[r];if(i)this._triggerNativeEvent(r);else{var s=this._getObjectId(this,!0);W.Events.dispatchEvent(s,e,t)}},exterminate:function(){var e=this._getObjectId(this,!0);W.Events.deleteObjectFromMaps(e),this.destroy(),this.$alive=!1},isHandlingEventsWhenNotDisplayed:function(){return!1},addNativeListener:function(e,t){if(e=="unload"){var n=t,r=this;t=function(){r.removeNativeListener("unload",t),n()}}return this.addEventListener?this.addEventListener(e,t,!1):this.attachEvent("on"+e,t),this},removeNativeListener:function(e,t){return this.removeEventListener?this.removeEventListener(e,t,!1):this.detachEvent("on"+e,t),this},_triggerNativeEvent:function(e){var t;return document.createEvent?(t=document.createEvent("HTMLEvents"),t.initEvent(e,!0,!0),!this.dispatchEvent(t)):(t=document.createEventObject(),this.fireEvent("on"+e,t))}}),window.attachEvent&&!window.addEventListener&&window.addNativeListener("unload",function(){i().each(function(e){e.exterminate()}),window.CollectGarbage&&window.CollectGarbage()})}})}),define.oldClass({name:"bootstrap.managers.events.EventDispatcher",traits:["bootstrap.managers.events.TimersHandler"],Class:{$alive:!0,initialize:function(){},getEventsSysId:function(){return this._getObjectId(this,!1)},_setEventSysId:function(e){this.injects().Events._objectsByIds.registerObjectId(this,e)},_getObjectId:function(e,t){return e.$alive!==undefined&&!e.$alive?null:this.injects().Events._objectsByIds.getObjectId(e,t)},on:function(e,t,n){var r=this._getObjectId(t,!0),i=this._getObjectId(this,!0);return this.injects().Events.addEventHandler(i,e,r,n),this},off:function(e,t,n){var r=this._getObjectId(t),i=this._getObjectId(this,!0);return this.injects().Events.removeEventHandler(i,e,r,n),this},trigger:function(e,t,n){var r=this._getObjectId(this,!0);return this.injects().Events.dispatchEvent(r,e,t,n)},exterminate:function(){this.trigger(Constants.EventDispatcher.Events.EXTERMINATING);var e=this._getObjectId(this,!0);this.injects().Events.deleteObjectFromMaps(e),this.$alive=!1},isHandlingEventsWhenNotDisplayed:function(){return!1},isRemovingFromObjectsMapOnlyUponDeath:function(){return!1}}}),define.oldClass({imports:["bootstrap.managers.events.DispatcherToHandlersMap","bootstrap.managers.events.ListenerToDispatchersMap","bootstrap.managers.events.ObjectsByIds"],name:"bootstrap.managers.events.EventsManager",Class:{Extends:"bootstrap.managers.BaseManager",initialize:function(){this._listenersMapping=new this.imports.ListenerToDispatchersMap,this._dispatchersMapping=new this.imports.DispatcherToHandlersMap,this._objectsByIds=new this.imports.ObjectsByIds},isReady:function(){return!0},addEventHandler:function(e,t,n,r,i){if(!this._isValidObjectId(e)||!this._isValidObjectId(n))return;if(this.isHandlerRegistered(e,t,n,r))return;var s=this._dispatchersMapping.addHandler(e,t,n,r,i);return this._addNativeEvent(e,t,i),this._listenersMapping.addHandler(n,e),s},removeEventHandler:function(e,t,n,r){var i=this._dispatchersMapping.removeHandler(e,t,n,r);return this._listenersMapping.removeHandler(n,e),this._removeNativeEvent(e,t,i.nativeHandler),this._deleteObjectIfPossible(n),this._deleteObjectIfPossible(e),i},removeEventsForListener:function(e,t){var n=this._dispatchersMapping.removeListenerHandlers(e,t);n&&this._removeNativeEvents({dispatcherId:n}),this._listenersMapping.removeListenerHandlers(t,e),this._deleteObjectIfPossible(t),this._deleteObjectIfPossible(e)},isHandlerRegistered:function(e,t,n,r){return this._dispatchersMapping.isHandlerRegistered(e,t,n,r)},dispatchEvent:function(e,t,n,r){var i=this._dispatchersMapping.getHandlerObjects(e,t);i=this._filterInactiveHandlers(i);var s={type:t,data:n,returnedValues:r?[]:undefined,target:this.getObjectById(e),isCustomEvent:!0};return i.forEach(function(e){var t=this.getObjectById(e.listenerId),n=e.handler.call(t,s);r&&n!==undefined&&s.returnedValues.push(n)},this),s},_filterInactiveHandlers:function(e){return e},deleteObjectFromMaps:function(e){var t=this._listenersMapping.getAllDispatcherIdsForListener(e),n={};t.forEach(function(t){n[t]=this._dispatchersMapping.removeListenerHandlers(t,e),this._deleteObjectIfPossible(t)},this);var r=this._dispatchersMapping.getAllHandlerObjectsForDispatcher(e);r.forEach(function(t){this._listenersMapping.removeHandler(t.listenerId,e),this._deleteObjectIfPossible(t.listenerId)},this),n[e]=this._dispatchersMapping.deleteEntry(e),this._listenersMapping.deleteEntry(e),n&&this._removeNativeEvents(n),this._deleteObjectIfPossible(e,!0)},isObjectListensOrDispatchesAnyEvents:function(e){var t=this._listenersMapping.getAllDispatcherIdsForListener(e);if(t&&t.length>0)return!0;var n=this._dispatchersMapping.getAllHandlerObjectsForDispatcher(e);return n&&n.length>0},getAllDispatchingObjectIds:function(){return this._dispatchersMapping.getAllDispatcherIds()},_deleteObjectIfPossible:function(e,t){var n=this.getObjectById(e);if(!n)return;var r=t||!n.isRemovingFromObjectsMapOnlyUponDeath||!n.isRemovingFromObjectsMapOnlyUponDeath();r&&!this.isObjectListensOrDispatchesAnyEvents(e)&&(this._listenersMapping.deleteEntry(e),this._dispatchersMapping.deleteEntry(e),this._deleteObjectFromMap(e))},_deleteObjectFromMap:function(e){this._objectsByIds.removeObjectById(e)},getObjectById:function(e){return this._objectsByIds.getObjectById(e,!0)},getObjectId:function(e){return this._objectsByIds.getObjectId(e,!1)},_isValidObjectId:function(e){return!0},_addNativeEvent:function(e,t,n){if(!n)return;var r=this.getObjectById(e);if(!r.addNativeListener)return;r.addNativeListener(t,n)},_removeNativeEvent:function(e,t,n){if(!n)return;var r=this.getObjectById(e);if(!r.removeNativeListener)return;r.removeNativeListener(t,n)},_removeNativeEvents:function(e){for(var t in e)for(var n in e[t]){var r=e[t][n];r.each(function(e){this._removeNativeEvent(t,n,e.nativeHandler)},this)}}}}),define.oldClass({name:"bootstrap.managers.events.ListenerToDispatchersMap",Class:{_map:{},addHandler:function(e,t){this._map[e]||(this._map[e]={});var n=this._map[e];n[t]?n[t]++:n[t]=1},removeHandler:function(e,t){var n=this._map[e];if(!n||!n[t])return;n[t]--,n[t]===0&&delete n[t],Object.keys(n).length===0&&delete this._map[e]},removeListenerHandlers:function(e,t){if(!this._map[e])return;delete this._map[e][t]},deleteEntry:function(e){this._map[e]&&delete this._map[e]},getAllDispatcherIdsForListener:function(e){return this._map[e]?Object.keys(this._map[e]):[]}}}),define.oldClass({name:"bootstrap.managers.events.ObjectsByIds",Class:{_objectIdsMap:{},_OBJECT_ID_PROPERTY:"$id",initialize:function(){},getObjectId:function(e,t){var n=e[this._OBJECT_ID_PROPERTY];return n||(n=this.injects().Utils.getGUID(),e[this._OBJECT_ID_PROPERTY]=n),!this.getObjectById(n)&&t&&(this._objectIdsMap[n]=e),n},registerObjectId:function(e,t){return e[this._OBJECT_ID_PROPERTY]=t,this._objectIdsMap[t]=e,e},getObjectById:function(e){return this._objectIdsMap[e]},removeObjectById:function(e){this._objectIdsMap[e]&&delete this._objectIdsMap[e]}}}),define.oldTrait({name:"bootstrap.managers.events.TimersHandler",trait:{_timerTypes:{timeout:1,interval:2},initialize:function(){this._timers={},this.on("exterminating",this,this._clearAllTimers)},setTimeout:function(e,t){var n=t||0,r=this._getExecutingFunction(e,this._timerTypes.timeout),i=window.setTimeout(r,n);return r.timerId=i,this._timers[i]={type:this._timerTypes.timeout,isActive:!0},i},setInterval:function(e,t){var n=this._getExecutingFunction(e,this._timerTypes.interval),r=window.setInterval(n,t);return n.timerId=r,this._timers[r]={type:this._timerTypes.interval,isActive:!0},r},isActiveTimer:function(e){return this._timers[e]&&this._timers[e].isActive},_getExecutingFunction:function(e,t){var n=this;return function(){var r=arguments.callee&&arguments.callee.timerId;r&&t==n._timerTypes.timeout&&n._timers[r]&&(n._timers[r].isActive=!1),e.call(n)}},_clearAllTimers:function(){Object.each(this._timers,function(e,t){t=Number(t),e.type==this._timerTypes.timeout?window.clearTimeout(t):e.type==this._timerTypes.interval&&window.clearInterval(t)},this)}}}),define.Const("EventDispatcher",{Events:{EXTERMINATING:"exterminating"}}),define.experimentPlugin("ExperimentConstantsPlugin",function(e){function n(e,t){var n=this.define.createBootstrapClassInstance("bootstrap.managers.experiments.ExperimentStrategy");t[n.STRATEGY_FLAG]=n.MERGE;var r=n._mergeField_(e,t);return r}function r(e,t){define.Const(e,t)}var t=e;t.init("Const","newConst",n,r)}),define.bootstrapClass("bootstrap.managers.experiments.ExperimentPlugin",function(){function e(){}return e.extendPrototype({init:function(e,t,n,r){return this._modifyNamespace=e,this._newNamespace=t,this._mergeSingleExperiment=n,this.convertNew=r,this},setRunningExperimentsOrder:function(e){this._runningExperiments=e,this._runningExperimentsObj={};for(var t=0;t<this._runningExperiments.length;t++){var n=this._runningExperiments[t];this._runningExperimentsObj[n.id]=n}var r=this.define.getDefinition("experiment",this._newNamespace);r&&nsUtil.forEachLeaf(r,function(e,t){this._experimentDefined(t,e)}.bind(this)),this.define.experiment[this._newNamespace].definitionModifier=this._experimentDefined.bind(this),this.define.experiment[this._newNamespace].nameModifier=this._experimentNameDefined.bind(this),this.define.experiment[this._modifyNamespace].nameModifier=this._experimentNameDefined.bind(this)},_experimentNameDefined:function(e,t){var n=this._getExperimentInfo(e);return n.definitionName+"."+n.experimentName+"."+n.group},_experimentDefined:function(e,t){var n=this._getExperimentInfo(e),r=n.experimentName.toLowerCase();return this._runningExperimentsObj[r]&&this._runningExperimentsObj[r].group===n.group&&this.convertNew(n.definitionName,t),t},convertNew:function(e,t){throw new Error("Invalid ExperimentPlugin: convertNew method not set. Use init to override it",this)},_mergeSingleExperiment:function(e,t){throw new Error("Invalid ExperimentPlugin: runExperiment method not set. Use init to override it",this)},applyExperiments:function(e,t){var n=[],r=this._modifyNamespace+"."+e,i=this.define.getDefinition("experiment",r);i=this.loadedExperimentsToLower(i);if(i)for(var s=0;s<this._runningExperiments.length;++s){var o=this._runningExperiments[s];if(i[o.id]&&i[o.id][o.group]){var u=i[o.id][o.group];t=this._mergeSingleExperiment(t,u)}}return t},loadedExperimentsToLower:function(e){var t={};for(var n in e){var r=n.toLowerCase();t[r]={};for(var i in e[n]){var s=i.toLowerCase(),o=e[n][i];t[r][s]=o}}return t},_getExperimentInfo:function(e){var t=e.split("."),n=t.pop(),r=t.pop(),i=t.join(".");return{group:n.toLowerCase(),experimentName:r.toLowerCase(),definitionName:i}}}),e}),define.bootstrapClass("bootstrap.managers.experiments.ExperimentStrategy",function(){function e(){}return e.extendPrototype({init:function(){return this},STRATEGY_FLAG:"experimentStrategy",BEFORE:"before",AFTER:"after",AROUND:"around",MERGE:"merge",DELETE:"delete",before:function(e){if(typeof e!="function")throw new Error("before must be on a method");return e[this.STRATEGY_FLAG]=this.BEFORE,e},after:function(e){if(typeof e!="function")throw new Error("after must be on a method");return e[this.STRATEGY_FLAG]=this.AFTER,e},around:function(e){if(typeof e!="function")throw new Error("around must be on a method");return e[this.STRATEGY_FLAG]=this.AROUND,e},merge:function(e){var t=function(){return e};return t[this.STRATEGY_FLAG]=this.MERGE,t},remove:function(e){var t=function(){return e};return t[this.STRATEGY_FLAG]=this.DELETE,t},_mergeObjects_:function(e,t){e=e||{};var n=Object.clone(e);for(var r in t){var i=t[r],s=e[r];n[r]=this._mergeSingleObject(i,s),this._isDeleteFieldObj(n[r])&&delete n[r]}return n},_mergeSingleObject:function(e,t){var n;return typeof e=="function"&&this._isMethodStrategy(e)?n=this._resolveMethod(t,e):typeof e=="function"&&this._isFieldStrategy(e)?n=this._mergeField_(t,e):n=e,n},_isMethodStrategy:function(e){var t=e[this.STRATEGY_FLAG];return t&&(t===this.AFTER||t===this.BEFORE||t===this.AROUND)},_isFieldStrategy:function(e){var t=e[this.STRATEGY_FLAG];return t&&(t===this.MERGE||t===this.DELETE)},_resolveMethod:function(e,t){var n;if(!e){if(t[this.STRATEGY_FLAG])throw new Error("cannot "+t[this.STRATEGY_FLAG]+" if original method is not defined");return t}switch(t[this.STRATEGY_FLAG]){case this.BEFORE:n=function(){return t.apply(this,arguments),e.apply(this,arguments)};break;case this.AFTER:n=function(){var n=e.apply(this,arguments);return t.apply(this,arguments),n};break;case this.AROUND:n=function(){var n=!1,r=this,i=Array.prototype.splice.call(arguments,0),s;i.splice(0,0,function(){return n=!0,e.apply(r,i.slice(1))});var s=t.apply(this,i);return n||LOG.reportError(wixErrors.EXPERIMENT_INVALID_MODIFY,t.toString(),"",i.slice(1)),s};break;default:n=t}return e.$wrapperFunction=n,n},_mergeField_:function(e,t){if(this._isEmpty(e))return t;if(this._isEmpty(t))return e;var n=t[this.STRATEGY_FLAG]==this.MERGE||!1,r=t[this.STRATEGY_FLAG]==this.DELETE||!1;return typeof t=="function"&&(t=t()),n?(delete t[this.STRATEGY_FLAG],this._combine(e,t)):r?this._getFieldDeleteObj():t},_getFieldDeleteObj:function(){return{_delete_:!0}},_isDeleteFieldObj:function(e){return e&&e._delete_===!0},_isEmpty:function(e){return e?e instanceof Array&&e.length===0?!0:typeof e=="object"&&Object.getLength(e)===0?!0:!1:!0},_combine:function(e,t){if(e instanceof Array&&t instanceof Array)for(var n=0;n<t.length;++n){var r=t[n];this._elementExistsInArray(r,e)||e.push(r)}else if(typeof e=="object"&&typeof t=="object")for(var i in t)typeof e[i]=="object"&&typeof t[i]=="object"||e[i]instanceof Array&&t[i]instanceof Array?e[i]=this._combine(e[i],t[i]):e[i]=t[i];return e},_elementExistsInArray:function(e,t){for(var n=0;n<t.length;n++)if(this._areEqual(t[n],e))return!0;return!1},_areEqual:function(e,t){return typeof e=="object"&&typeof t=="object"?this._areObjectsEqual(e,t):e instanceof Array&&t instanceof Array?this._areArraysEqual(e,t):e!==t?!1:!0},_areObjectsEqual:function(e,t){var n;for(var r in e){n=this._areEqual(e[r],t[r]);if(!n)return!1}return!0},_areArraysEqual:function(e,t){var n;if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){n=this._areEqual(e[r],t[r]);if(!n)return!1}return!0}}),e}),define.bootstrapClass("bootstrap.managers.experiments.Experiments",function(){function e(){this._plugins=[],this._pluginsMap={}}return e.extendPrototype({init:function(e,t){var n=this;return this.resource.getResources(["runningExperiments","experimentsOrder"],function(r){n._runningExperiments=e||r.runningExperiments;var i=n._getRunningExperimentsFromUrl();Object.merge(n._runningExperiments,i),n._experimentsOrder=t||r.experimentsOrder,n._buildModelForApps(),n.normalizeExperimentLists(),n._runningExperimentsOrder=n.getOrderedRunningExperiments();var s=this.define.getDefinition("experimentPlugin");for(var o in s)n._addPlugin(o,s[o]);n.define.experimentPlugin.definitionModifier=n._onExperimentPluginDefined.bind(n)}),this},_getRunningExperimentsFromUrl:function(){var e={},t=window.location.search.substring(1);if(!t)return e;var n=t.split("&");for(var r=0;r<n.length;r++){var i=n[r].split("=");if(i[0].toLowerCase()==="experiment"){var s=i[1].split(":"),o=s[0],u=s[1];e[o]=u}}return e},normalizeExperimentLists:function(){var e={},t,n,r,i,s,o,u;for(var a in this._runningExperiments)t=a.toLowerCase(),n=this._runningExperiments[a].toLowerCase(),e[t]=n;this._isInDevMode()&&this._isInEditor()&&(e.dev="new");var f=[];for(var l=0;l<this._experimentsOrder.length;l++){u=this._experimentsOrder[l],t=u.id.toLowerCase(),n=u.group.toLowerCase(),r=u.description,o=u.owner,i=[];for(var c=0;c<u.dependencies.length;c++)i.push(u.dependencies[c].toLowerCase());s=[];for(var h=0;h<u.conflicts.length;h++)s.push(u.conflicts[h].toLowerCase());f.push({id:t,group:n,description:r,dependencies:i,conflicts:s,owner:o})}this._runningExperiments=e,this._experimentsOrder=f},_buildModelForApps:function(){var e={},t=this._isInEditor()?editorModel:rendererModel;for(var n in this._runningExperiments)this._isAppsExperiment(n)&&(e[n]=this._runningExperiments[n],delete t.runningExperiments[n]);t.runningApps=e},_isAppsExperiment:function(e){var t=/^App~\w{1,}~\w{8}-\w{4}-\w{4}-\w{4}-\w{12}/i;return t.test(e)},_isLanguageExperiment:function(e){var t=/^Lang_[a-z]{2,}/i;return t.test(e)||e=="MultiLang"},_isFlagExperiment:function(e){var t=/^FLAG_/i;return t.test(e)},_isInDevMode:function(){return window.debugMode!=="nodebug"&&window.debugMode!=="unit_test"},_isInEditor:function(){return viewMode==="editor"},applyExperiments:function(e,t){for(var n=0;n<this._plugins.length;++n)t=this._plugins[n].applyExperiments(e,t);return t},_onExperimentPluginDefined:function(e,t){this._addPlugin(e,t)},_addPlugin:function(e,t){var n=this.define.createBootstrapClassInstance("bootstrap.managers.experiments.ExperimentPlugin");t(n),n.setRunningExperimentsOrder(this._runningExperimentsOrder),this._pluginsMap[e]=n,this._plugins.push(n)},getOrderedRunningExperiments:function(){var e=[];for(var t=0;t<this._experimentsOrder.length;++t){var n=Object.clone(this._experimentsOrder[t]),r=this._runningExperiments[n.id];this._isExperimentRunningAndValid(n)&&e.push(n)}return e},_isExperimentRunningAndValid:function(e){var t=e.id,n=e.dependencies,r=e.conflicts,i=this._runningExperiments[t];if(i&&e.group===i){for(var s=0;s<n.length;s++){var o=n[s];if(!this._runningExperiments[o])return LOG.reportError(wixErrors.EXPERIMENT_MISSING_DEPENDENCY,"dependency: "+o+" is missing (for experiment: "+t+")"),!1}for(var u=0;u<r.length;u++){var a=r[u];if(this._runningExperiments[a])return LOG.reportError(wixErrors.EXPERIMENT_IN_CONFLICT,"in conflict with: "+a+" (for experiment: "+t+")"),!1}return!0}return!1},isReady:function(){return this._runningExperimentsOrder!==undefined},isDeployed:function(e){var t=!1,n;for(n in e){var r=e[n].toLowerCase();n=n.toLowerCase();if(!this._runningExperiments.hasOwnProperty(n)||this._runningExperiments[n]!==r){t=!1;break}t=!0}return t},_getExperimentsOrder_:function(){return this._experimentsOrder},_getExperimentInfo_:function(e){if(!this.experimentInfoObj){this.experimentInfoObj={};for(var t=0;t<this._experimentsOrder.length;t++){var n=this._experimentsOrder[t];this.experimentInfoObj[n.id]||(this.experimentInfoObj[n.id]={}),this.experimentInfoObj[n.id][n.group]={description:n.description,dependencies:n.dependencies,conflicts:n.conflicts,owner:n.owner}}}return this.experimentInfoObj[e]},_getRunningExperimentsOrder_:function(){return this._runningExperimentsOrder},clone:function(e){var t=e.createBootstrapClassInstance("bootstrap.managers.experiments.Experiments",[this._runningExperiments,this._experimentsOrder]);return t}}),e}),define.oldClass({name:"bootstrap.utils.BufferFunction",Class:{Binds:["_wrapperFunction"],initialize:function(e,t){this._isFirstCallDelayed=!1,this._bufferTime=1e3,this._lastCallArguments,this._replaceFunctionAndSaveOriginal(e,t),this._clearBuffer()},setBufferTime:function(e){this._bufferTime=e},getBufferTime:function(e){return this._bufferTime},setIsFirstCallDelayed:function(e){this._isFirstCallDelayed=e},getIsFirstCallDelayed:function(e){return this._isFirstCallDelayed},_replaceFunctionAndSaveOriginal:function(e,t){this._scope=e,this._originalFunction=e[t],e[t]=this._wrapperFunction},_wrapperFunction:function(){this._lastCallArguments=arguments,this._tryCallingFunction()},_tryCallingFunction:function(){this.isReadyToCall()?(this.callOriginalFunction(),this._delayCall(this._clearBuffer)):this._delayCall(this._clearBufferAndTryCallingFunction)},callOriginalFunction:function(){this._originalFunction.apply(this._scope,this._lastCallArguments)},isReadyToCall:function(){return!this._callTimerId&&this._isFirstCallDelayed===!1},_clearBuffer:function(){this._callTimerId=undefined},_clearBufferAndTryCallingFunction:function(){this._clearBuffer(),this._tryCallingFunction()},_delayCall:function(e){this.injects().Utils.clearCallLater(this._callTimerId),this._callTimerId=this.injects().Utils.callLater(e,[],this,this._bufferTime)}}}),define.Class("bootstrap.utils.Events",function(e){var t=e;t.methods({addEvent:function(e,t){return e=this._removeOn(e),this.$events=this.$events||{},this.$events[e]=(this.$events[e]||[]).include(t),this},addEvents:function(e){for(var t in e)this.addEvent(t,e[t]);return this},fireEvent:function(e,t,n){if(this.$events){e=this._removeOn(e);var r=this.$events[e];if(!r)return this;t=Array.from(t),r.each(function(e){if(!e)return;n?e.delay(n,this,t):e.apply(this,t)},this)}return this},removeEvent:function(e,t){if(this.$events){e=this._removeOn(e);var n=this.$events[e];if(n)if(t){var r=n.indexOf(t);r!=-1&&(n.splice(r,1),n.length===0&&delete this.$events[e])}else delete this.$events[e]}return this},removeEvents:function(e){var t;if(typeOf(e)=="object"){for(t in e)this.removeEvent(t,e[t]);return this}e&&(e=this._removeOn(e));for(t in this.$events){if(e&&e!=t)continue;var n=this.$events[t];for(var r=n.length;r--;)this.removeEvent(t,n[r])}return this},_removeOn:function(e){return e.replace(/^on([A-Z])/,function(e,t){return t.toLowerCase()})},removeAllEvents:function(){this.$events={}}})}),define.oldClass({name:"bootstrap.utils.LinkUtils",Class:{Static:{linkType:{SMS:"SMS",CALL:"CALL",SKYPE:"SKYPE",MAP:"MAP",EMAIL:"EMAIL",FACEBOOK:"FACEBOOK",FLICKR:"FLICKR",BLOGGER:"BLOGGER",MYSPACE:"MYSPACE",LINKEDIN:"LINKEDIN",TWITTER:"TWITTER",TUMBLR:"TUMBLR",YOUTUBE:"YOUTUBE",VIMEO:"VIMEO",PAGE:"PAGE",FREE_LINK:"FREE_LINK",TEXT:"TEXT",DELICIOUS:"DELICIOUS",WEBSITE:"WEBSITE",DOCUMENT:"DOCUMENT",LOGIN:"LOGIN"},linkTarget:{SAME_WINDOW:"_self",NEW_WINDOW:"_blank"}},linkifyElement:function(e,t,n,r){this._fixTargetBug(n);var i=n.get("href"),s=n.get("target"),o=n.get("linkType");if(i&&s||o==="LOGIN"||o==="ADMIN_LOGIN"){this._createLink(e,t,o,i,s),this._setLinkState(e),r===!0&&this._disableLinkClickPropagation(t);if(o==="LOGIN"||o==="ADMIN_LOGIN"){var u=e._highlightedDisplayer.getLogic();this._handleSpecialCases(u,o,t)}}else this._removeLinkstate(e),t.set("href",""),t.setStyle("cursor","default"),t.set("target",""),t.removeEvents("click")},_createLink:function(e,t,n,r,i){var s=W.Viewer.getEditorMode()=="PREVIEW",o=i==="_self"&&n==="WEBSITE";s&&o?this._bindPageLeaveWarningToLink(e,t):(t.set("href",r),t.setStyle("cursor","pointer"),t.set("target",i),t.removeEvents("click"))},_setLinkState:function(e){e.hasState("noLink","linkableComponent")&&e.removeState("noLink","linkableComponent")},_removeLinkstate:function(e){e.hasState("noLink","linkableComponent")&&e.setState("noLink","linkableComponent")},_fixTargetBug:function(e){var t=e.get("target");if(t=="same"||t=="self")t="_self",e.set("target","_self")},_disableLinkClickPropagation:function(e){e.addEvent("click",function(e){e.stopPropagation()})},_bindPageLeaveWarningToLink:function(e,t){t.erase("href"),t.erase("target"),t.addEvent("click",function(t){t.preventDefault(),this._showNavigationDisabledTooltip(e)}.bind(this))},_showNavigationDisabledTooltip:function(e){var t={component:e};this.injects().Commands.executeCommand("linkableComponent.navigateSameWindow",t,e)},_handleSpecialCases:function(e,t,n){n.removeEvents("click");switch(t){case this.linkType.LOGIN:n.addEvent("click",function(){if(window.animateForm){var e=this.getDataItem(),t=e.get("text");if(t){t=JSON.parse(t);var n=t.postLoginUrl,r=t.postSignupUrl,i=t.type,s="HTML",o=window.userApi?window.userApi.isSessionValid():!1;o?n&&(window.location.href=n):window.animateForm.callOnContent([r,n,i,s])}}}.bind(e));break;case this.linkType.ADMIN_LOGIN:n.setStyle("cursor","pointer"),n.addEvent("click",function(){this.injects().Commands.executeCommand("WViewerCommands.AdminLogin.Open")}.bind(e))}}}}),define.Class("bootstrap.utils.Queue",function(e){var t=e;t.methods({initialize:function(){this.map={}},add:function(e,t){this.map[e]=this.map[e]||[],this.map[e].push(t)},addUnique:function(e,t){this.map[e]=this.map[e]||[];var n=!0;for(var r=0;r<this.map[e].length;r++)if(this.map[e][r]===t){n=!1;break}n&&this.map[e].push(t)},remove:function(e,t){this.map[e]&&this.map[e].erase(t)},removeKey:function(e){delete this.map[e]},removeAll:function(){this.map={}},getQueue:function(e){return this.map[e]||[]},getQueueKeys:function(){return Object.keys(this.map)},hasQueue:function(e){return e?Object.some(this.map,function(t,n,r){return n===e})||!1:Object.some(this.map,function(){return!0})},popQueue:function(e){var t=this.getQueue(e);return this.removeKey(e),t},isReady:function(){return!0},clone:function(){return this}})}),window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}(),define.oldClass({name:"bootstrap.utils.Tween",Class:{Static:{_activeTweens:[],killAll:function(){while(this._activeTweens.length>0)this.killTween(this._activeTweens[0])},killTweensOf:function(e){var t=[];this._activeTweens.forEach(function(n){n._target===e&&t.push(n)}),t.forEach(function(e){this.killTween(e)})},killTween:function(e){var t;e.dispose(),t=this._activeTweens.indexOf(e),t!=-1&&this._activeTweens.splice(t,1)},_startTween:function(){this.killTweensOf(this._target),this._activeTweens.push(this),this._t0=this._getCurrentTime(),window.requestAnimFrame(this._render.bind(this))},debugMode:!1,log:function(){},to:function(e,t,n){var r=this,i=new r(e,t,n)},execute:function(e,t,n,r){r.myProp=t;var i=this,s=new i({myProp:e},n,r)}},initialize:function(e,t,n){var r,i;this._target=e,this._duration=Math.floor(t*1e3),this._easeParams=[],this._t=0,this._tStep=null,this._isAlive=!0;var s=typeOf(e)=="element";s?this._setValueFunc=this._setStyle:this._setValueFunc=this._setTargetProperty,this._easeFunc=this.linear;var o=this._parseParameter(n,"ease","linear");this[o]!==undefined&&typeOf(this[o])=="function"&&(this._easeFunc=this[o]),this._onCompleteCallback=this._parseParameter(n,"onComplete",null),this._onUpdateCallback=this._parseParameter(n,"onUpdate",null);var u=this._parseParameter(n,"delay",0);for(var a in n)if(s||e[a]!==undefined)r={},r.propName=a,s?(i=e.getStyle(a),r.origValue=parseFloat(i),r.unit=this._parseUnit(i),isNaN(r.origValue)&&(r.origValue=0,r.unit="px")):r.origValue=parseFloat(e[a]),r.targetValue=parseFloat(n[a]),this._easeParams.push(r);u===0?this._startTween():(u=parseInt(u*1e3,10),setTimeout(this._startTween.bind(this),u))},_parseUnit:function(e){var t=/[^0-9-]+$/;return t.test(e)===!0?String(String(e).match(t)[0]):""},_parseParameter:function(e,t,n){var r;return e[t]!==undefined?(r=e[t],delete e[t]):r=n,r},_render:function(){var e,t;if(this._isAlive){var n=this._getCurrentTime();this._tStep=n-this._t0,this._t0=n,this._t+=this._tStep;for(var r=0;r<this._easeParams.length;r++)e=this._easeParams[r],this._t<this._duration?t=this._easeFunc(this._t,0,1,this._duration)*(e.targetValue-e.origValue)+e.origValue:t=e.targetValue,this.debugMode===!0&&this.log(this._tStep,this._t,t),e.unit&&e.unit=="px"&&(t=Math.round(t)),this._setValueFunc(e.propName,t,e.unit),this._onUpdateCallback!==null&&this._onUpdateCallback(t,this._target,e.propName);this._t<this._duration?window.requestAnimFrame(this._render.bind(this)):(this._onCompleteCallback!==null&&this._onCompleteCallback(this),this.killTween(this))}},_getCurrentTime:function(){return(new Date).getTime()},_setStyle:function(e,t,n){this._target.setStyle(e,String(t)+n)},_setTargetProperty:function(e,t){this._target[e]=t},dispose:function(){this._isAlive=!1,this._target=null,this._onCompleteCallback=null,this._onUpdateCallback=null},linear:function(e,t,n,r){return n*e/r+t},strong_easeIn:function(e,t,n,r){return n*(e/=r)*e*e*e*e+t},strong_easeOut:function(e,t,n,r){return n*((e=e/r-1)*e*e*e*e+1)+t},strong_easeInOut:function(e,t,n,r){return(e/=r*.5)<1?n*.5*e*e*e*e*e+t:n*.5*((e-=2)*e*e*e*e+2)+t},swing:function(e,t,n,r){return-Math.cos(this.linear(e,t,n,r)*Math.PI)/2+.5}}}),define.bootstrapClass("bootstrap.utils.Utils",function(){function e(){}return e.extendPrototype({init:function(){var e=this;this._mergeDefinitions(),this.define.utils.definitionModifier=function(t,n){e._mergeDefinition(t,n)},this._prefixCounterMap={}},_mergeDefinitions:function(){var e=this.define.getDefinition("utils");for(var t in e)this._mergeDefinition(t,e[t])},_mergeDefinition:function(t,n){t.split(":").pop()==="this"?e.extendPrototype(n()):this._mergeToUtils(t,n)},_mergeToUtils:function(t,n){var r=n(),i={};i[t]=r,e.extendPrototype(i)},clone:function(e){return this},isReady:function(){return!0}}),e}),define.bootstrapClass("bootstrap.utils.async.Async",function(){var e=define.getBootstrapClass("bootstrap.bootstrap.WClass"),t=new e({className:"Async",initialize:function(){}});return t.Bulk=new e({className:"Async.Bulk",Implements:[Options,Events],Binds:["run"],options:{completeEvent:"complete",errorEvent:"error",completeCallback:null,errorCallback:null,parallel:!0,specialTargets:[{target:null,method:null,completeEvent:null,errorEvent:null}],executeDelay:!1,keepAlive:!1,stopOnErrors:!0,timeout:0},_method:null,_pending:[],_running:!1,_error:[],_complete:[],_done:[],initialize:function(e,t,n){if(!e||e.length===undefined)return LOG.reportError(wixErrors.BULK_INVALID_TARGET,"Async.Bulk","initialize",e)(),this;this.$events={},this.setOptions(n),this._targets=e,this._method=t;var r=this,i=window;this.options.timeout>0&&(this._timeoutInterval=i.setTimeout(this._bulkOperationTimeout.bind(this),this.options.timeout)),this._onTargetComplete=function(){this.removeEvent(r._getTargetDetails(this).completeEvent,r._onTargetComplete),r._pending.erase(this),r._complete.push(this),r._done.push(this),r._checkProgress()},this._onTargetFailed=function(){this.removeEvent(r._getTargetDetails(this).errorEvent,r._onTargetFailed),r._pending.erase(this),r._error.push(this),r._done.push(this),r._checkProgress()},this.options.executeDelay?instanceOf(this.options.executeDelay,Number)&&this.options.executeDelay>0&&i.setTimeout(this.run,this.options.executeDelay):this.run()},_bulkOperationTimeout:function(){LOG.reportError(wixErrors.BULK_TIMEOUT,"Async.Bulk","_bulkOperationTimeout",String(this.options.timeout)+" ms | Pending Operations:"+this._pending)()},run:function(){if(this._targets.length!==undefined&&this._targets.length!==null&&this._targets.length===0){this._clearInterval(),this._handleBulkComplete();return}this._targets.each(function(e,t){this._addToQue(e,t)},this),this.options.parallel?this._targets.each(this._runMethodOnTarget,this):this._runNextTarget()},_runNextTarget:function(){var e=this._targets.length-this._pending.length,t=this._targets[e];this._runMethodOnTarget.apply(this,[t])},_clearInterval:function(){this._timeoutInterval&&(clearInterval(this._timeoutInterval),delete this._timeoutInterval)},_runMethodOnTarget:function(e){instanceOf(this._method,Function)&&this._method.call(e),instanceOf(this._method,String)&&(instanceOf(e[this._method],Function)?e[this._method].call(e):LOG.reportError(wixErrors.BULK_NO_METHOD,"Async.Bulk","_runMethodOnTarget",e)())},stop:function(e){},destroy:function(){this._targets&&this._targets.each(function(e){e.removeEvent(this._getTargetDetails(this).completeEvent,this._onTargetComplete),e.removeEvent(this._getTargetDetails(this).errorEvent,this._onTargetFailed)},this),this._targets=null},progress:function(){return{complete:this._complete.slice(),error:this._error.slice(),total:this._targets.slice()}},_addToQue:function(e,t){var n=this._getTargetDetails(e);this._pending[t]=e,e.addEvent(n.completeEvent,this._onTargetComplete),e.addEvent(n.errorEvent,this._onTargetFailed)},_onTargetComplete:undefined,_onTargetFailed:undefined,_getTargetDetails:function(e){var t,n,r={method:this._method,completeEvent:this.options.completeEvent,errorEvent:this.options.errorEvent};for(t=0,n=this.options.specialTargets.length;t<n;t++)if(this.options.specialTargets[t].target===e)return this.options.specialTargets[t].target.implement(r);return r},_checkProgress:function(){this._pending.length>0?this.options.parallel||this._runNextTarget():(this.options.stopOnErrors&&this._error.length>0?this._handleBulkError():this._handleBulkComplete(),this._clearInterval(),this.options.keepAlive||this.destroy())},_handleBulkError:function(e){e?(this.fireEvent("error",[this._complete,this._error]),instanceOf(this.options.errorCallback,Function)&&this.options.errorCallback(this._complete,this._error)):window.setTimeout(this._handleBulkError.bind(this,!0),1)},_handleBulkComplete:function(e){e?(this.fireEvent("complete",[this._complete,this._error]),instanceOf(this.options.completeCallback,Function)&&this.options.completeCallback(this._complete,this._error)):window.setTimeout(this._handleBulkComplete.bind(this,!0),1)}}),t}),define.utils("analytics:this",function(){return{_sendURLtoGoogleAnalytics:function(e,t){e._trackPageview(t)},_getGoogleAnalyticsTracker:function(e){if(!window._gat)return;return pageTracker=_gat._getTracker(e),pageTracker._initData(),pageTracker},reportSiteAnalytics:function(e,t){var n="UA-2117194-25",r="site",i=r+"/"+e;t&&(i=i+"/"+t),this.sendToGoogleAnalytics(i,n)},reportEditorAnalytics:function(e,t){var n="UA-2117194-23",r="editor",i=r+"/"+e;t&&(i=i+"/"+t),window.siteHeader&&(window.siteHeader.username&&(i=i+"/"+siteHeader.username),window.siteHeader.siteName&&(i=i+"/"+siteHeader.siteName)),this.sendToGoogleAnalytics(i,n)},sendToGoogleAnalytics:function(e,t){try{if(window._gat){var n=this._getGoogleAnalyticsTracker(t);this._sendURLtoGoogleAnalytics(n,e,t);return}var r="https:"==document.location.protocol?"https://ssl.":"http://www.",i=new Element("script",{id:"googleAnalyticsScript"}),s=document.getElementsByTagName("script")[0];i.type="text/javascript",s.parentNode.insertBefore(i,s),i.src=r+"google-analytics.com/ga.js",this.gaCheck(e,t)}catch(o){}},gaCheck:function(e,t){try{if(window._gat){var n=this._getGoogleAnalyticsTracker(t);this._sendURLtoGoogleAnalytics(n,e)}else setTimeout(this.gaCheck.bind(this,e,t),1e3)}catch(r){}}}}),define.utils("browser:this",function(){return{show:function(e){$(e).uncollapse()},hide:function(e){$(e).collapse()},setChildIndex:function(e,t,n){var r=e.getChildren(),i=r[t],s=r[n];i==s&&i.fireEvent(Constants.DisplayEvents.MOVED_IN_DOM,Constants.DisplayEvents.MOVED_IN_DOM),i&&s&&(i.inject(s,n<t?"before":"after"),i.fireEvent(Constants.DisplayEvents.MOVED_IN_DOM,Constants.DisplayEvents.MOVED_IN_DOM),s.fireEvent(Constants.DisplayEvents.MOVED_IN_DOM,Constants.DisplayEvents.MOVED_IN_DOM))},waitForElement:function(e,t,n,r){var i=0,s=n/t,o=setInterval(function(){i++,i>s&&(clearInterval(o),r(!1));var t=$$(e).length;t>0&&(clearInterval(o),r(!0))},t)},getComputedStyle:function(e){return window.getComputedStyle?window.getComputedStyle(e,null):e.currentStyle},_htmlTextReplacements:[["<","&lt;"],[">","&gt;"]],convertToHtmlText:function(e){e=e.toString();for(var t=0;t<this._htmlTextReplacements.length;++t){var n=this._htmlTextReplacements[t][0],r=this._htmlTextReplacements[t][1];while(e.indexOf(n)!=-1)e=e.replace(n,r)}return e},convertFromHtmlText:function(e){for(var t=0;t<this._htmlTextReplacements.length;++t){var n=this._htmlTextReplacements[t][0],r=this._htmlTextReplacements[t][1];while(e.indexOf(r)!=-1)e=e.replace(r,n)}return e},getWindowSize:function(){var e,t;if(typeof window.innerWidth!="undefined")e=window.innerWidth,t=window.innerHeight;else if(typeof document.documentElement!="undefined"&&typeof document.documentElement.clientWidth!="undefined"&&document.documentElement.clientWidth!==0)e=document.documentElement.clientWidth,t=document.documentElement.clientHeight;else{var n=document.getElementsByTagName("body")[0];e=n.clientWidth,t=n.clientHeight}return{width:e,height:t}},getPositionRelativeToWindow:function(e){if(!$$(e).length)return{x:0,y:0};var t=$$(e)[0],n=t.getPosition(),r=window.getScroll();return n.x-=r.x,n.y-=r.y,n},getMidPos:function(e,t,n){var r=window.getSize(),i=r.x,s=r.y,o,u,a,f;n.page?(o=n.page.x,u=n.page.y,a=n.client.x+e,f=n.client.y+t):(o=n.pageX,u=n.pageY,a=n.clientX+e,f=n.clientY+t);var l=a>=i?o-(a-i):o,c=f>=s?u-(f-s):u;return{x:l,y:c}},getCSSBrowserFeature:function(e){var t=Modernizr.prefixed(e.camelCase());return t?t.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-"):!1},getIsSibling:function(e,t){return e&&t&&e.getParent()===t.getParent()},iframeCallback:0,prepareIFrameForWrite:function(e,t){try{var n=e.contentWindow.document||e.contentWindow.document;t(e,n)}catch(r){var i="tmp"+this.iframeCallback++;W[i]=function(){var n=e.contentDocument||e.contentWindow.document;t(e,n)},e.src=W.Config.getServiceTopologyProperty("scriptsRoot")+"/html/sameDomainIFrame.html?d="+encodeURIComponent(document.domain)+"&c="+encodeURIComponent(i)}},forceBrowserRepaint:function(e,t,n){n=n||["safari"];var r=!1,i=0;for(i;i<n.length;i++)if(Browser[n[i]]){r=!0;break}r&&(e=e||$$("body"),t=t||150,e.setStyle("opacity",.99),setTimeout(function(){e.setStyle("opacity",1)},t))},forceBrowserRepaintOnScroll:function(e){Browser.safari&&(e=e||$$("body"),this._op=this._op===1?.99:1,e.setStyle("opacity",this._op))},stopMouseWheelPropagation:function(e){e=e||{};var t=this.getSize().y;(this.scrollTop===this.scrollHeight-t&&e.wheel<0||this.scrollTop===0&&e.wheel>0)&&e.preventDefault()},printNodesWithStyle:function(e,t){var n=this.getComputedStyle(e);n&&n[t]&&n[t]!="auto"&&console.log(n[t],e);if(!e.childNodes)return;var r=e.childNodes;for(var i=0;i<r.length;i++)this.printNodesWithStyle(r[i],t)},requestAnimFrame:function(){},isInputKey:function(e){return e?e<48?e==13||e==32||e==8||e==46:e>=112&&e<=145?!1:e>90&&e<=93?!1:!0:!1},numberToPageId:function(e){var t=e.toString(36),n=t.length;return n<3&&(t="0000".substr(0,3-n)+t),t},serverRequest:function(e,t,n,r,i){var s="",o=new Request.JSON({url:s+e,onSuccess:r,onFailure:i});t=="post"?o.post(n):o.get(n)}}}),function(){var e=typeof window!="undefined"?window:exports,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=function(){try{document.createElement("$")}catch(e){return e}}();e.btoa||(e.btoa=function(e){for(var r,i,s=0,o=t,u="";e.charAt(s|0)||(o="=")&&s%1;u+=o.charAt(63&r>>8-s%1*8)){i=e.charCodeAt(s+=.75);if(i>255)throw n;r=r<<8|i}return u}),e.atob||(e.atob=function(e){e=e.replace(/=+$/,"");if(e.length%4==1)throw n;for(var r=0,i,s,o=0,u="";s=e.charAt(o++);~s&&(i=r%4?i*64+s:s,r++%4)?u+=String.fromCharCode(255&i>>(-2*r&6)):0)s=t.indexOf(s);return u})}(),define.utils("cookies",function(){"use strict";return{createCookie:function(e,t,n){var r="";if(n){var i=new Date;i.setTime(i.getTime()+n),r="; expires="+i.toGMTString()}document.cookie=e+"="+t+r+"; path=/"},deleteCookie:function(e){document.cookie=e+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/"},hasCookie:function(e){return this.readCookie(e)!==null},readCookie:function(e){var t=document.cookie.match(new RegExp("\\b"+e+"=(.*?)(;|$)"));return t?t[1]:null}}}),define.utils("debug:this",function(){return{errorPopup:function(e,t,n){W.EditorDialogs&&(window.debugMode&&window.debugMode!=="nodebug"?W.EditorDialogs.openErrorDialog(e,t,n):W.EditorDialogs.openErrorDialog(e,t))},debugTrace:function(){window.debugMode!=="nodebug"&&window.console&&(console.log.apply?console.log.apply(console,arguments):console.log(arguments))},reportWixifyTimeOut:function(e,t,n,r){this.debugTrace(["* Wixify timeout id:"+e.get("id")+" comp:"+e.get("comp"),{node:e,logic:t,skin:n,data:r},{pendingClasses:W.Classes._pendingNewClassesQueue.map,pendingSkins:W.Skins._skinQue.map}])},alertError:function(e,t,n,r,i){return i||LOG.reportError(e,t,n,r),this.errorPopup("Error",r,t+"."+n+"\n\n"+r),window["debugMode"]!="debug"?function(){}:null},getStackTrace:function(e){e=!isNaN(e)&&e>0?e:1;var t=new Error,n="(no stack)";t.stack?n=t.stack:window.opera&&t.message&&(n=t.message),n=n.split("[object Object]").join("{}"),n=n.split("[object Array]").join("[]"),n=n.replace(/at/g,""),n=n.split(window.serviceTopology.scriptsLocationMap.web+"/javascript/").join("");var r=n.split("\n");return r[0].toLowerCase()=="error"&&e++,r=r.splice(e),r.join("<<").replace(/\s{2,}/g," ")}}}),define.utils("detectZoom:this",function(){var e=function(){return window.devicePixelRatio?window.devicePixelRatio:1},t=function(e,t,n,r,i,s){function c(n,r,i){var u=(n+r)/2;if(i<=0||r-n<s)return u;var a="("+e+":"+u+t+")";return o(a).matches?c(u,r,i-1):c(n,u,i-1)}var o,u,a,f;window.matchMedia?o=window.matchMedia:(u=document.getElementsByTagName("head")[0],a=document.createElement("style"),u.appendChild(a),f=document.createElement("div"),f.className="mediaQueryBinarySearch",f.style.display="none",document.body.appendChild(f),o=function(e){a.sheet.insertRule("@media "+e+"{.mediaQueryBinarySearch "+"{text-decoration: underline} }",0);var t=getComputedStyle(f,null).textDecoration=="underline";return a.sheet.deleteRule(0),{matches:t}});var l=c(n,r,i);return f&&(u.removeChild(a),document.body.removeChild(f)),l},n=function(){var e=screen.deviceXDPI/screen.logicalXDPI;return{zoom:e,devicePxPerCssPx:e}},r=function(){var t=Math.abs(window.orientation)==90?screen.height:screen.width,n=t/window.innerWidth;return{zoom:n,devicePxPerCssPx:n*e()}},i=function(){var t=function(e){return e.replace(/;/g," !important;")},n=document.createElement("div");n.innerHTML="1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>0",n.setAttribute("style",t("font: 100px/1em sans-serif; -webkit-text-size-adjust: none; height: auto; width: 1em; padding: 0; overflow: visible;"));var r=document.createElement("div");r.setAttribute("style",t("width:0; height:0; overflow:hidden; visibility:hidden; position: absolute;")),r.appendChild(n),document.body.appendChild(r);var i=1e3/n.clientHeight;return i=Math.round(i*100)/100,document.body.removeChild(r),{zoom:i,devicePxPerCssPx:i*e()}},s=function(){var n=t("min--moz-device-pixel-ratio","",0,10,20,1e-4);return n=Math.round(n*100)/100,{zoom:n,devicePxPerCssPx:n*e()}},o=function(){var e=window.outerWidth/window.innerWidth;return e=Math.round(e*100)/100,{zoom:e,devicePxPerCssPx:e}},u=function(){var e={zoom:1,devicePxPerCssPx:1};return!isNaN(screen.logicalXDPI)&&!isNaN(screen.systemXDPI)?e=n():"ontouchstart"in window&&typeof document.body.style.webkitTextSizeAdjust=="string"?e=r():typeof document.body.style.webkitTextSizeAdjust=="string"?e=i():navigator.userAgent.indexOf("Opera")>=0?e=o():s().zoom>.001&&(e=s()),e};return{browserZoomLevel:function(){return u().zoom},devicePixelRatio:function(){return u().devicePxPerCssPx}}}),define.utils("Validation:this",function(){return{isObjectEmpty:function(e){return Object.some(e,function(){return!0})},isNumber:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},isURLPartValid:function(e){return/[^a-z_0-9]/.test(e)===!1&&e.length>=4},convertToValidUrlPart:function(e){return e.replace(/[ ]/g,"-").replace(/[^A-Za-z0-9-]/g,"").toLowerCase()},isValidUrl:function(e){return e.indexOf(".")===0&&(e=this._rel_to_abs(e)),this._RegEx.validUrlReg.test(e)},_rel_to_abs:function(e){if(/^(https?|file|ftps?|mailto|javascript|data:image\/[^;]{2,9};):/i.test(e))return e;var t=location.href.match(/^(.+)\/?(?:#.+)?$/)[0]+"/";if(e.substring(0,2)=="//")return location.protocol+e;if(e.charAt(0)=="/")return location.protocol+"//"+location.host+e;if(e.substring(0,2)=="./")e="."+e;else{if(/^\s*$/.test(e))return"";e="../"+e}e=t+e;var n=0;while(/\/\.\.\//.test(e=e.replace(/[^\/]+\/+\.\.\//g,"")));return e=e.replace(/\.$/,"").replace(/\/\./g,"").replace(/"/g,"%22").replace(/'/g,"%27").replace(/</g,"%3C").replace(/>/g,"%3E"),e},isValidUrlNoProtocol:function(e){return this._RegEx.validUrlNoProtocolReg.test(e)},isValidEmail:function(e){return this._RegEx.validEailReg.test(e)},isValidTwitterUser:function(e){return this._RegEx.ValidTwitterUserReg.test(e)},validatePageTitle:function(e){var t=e;t=t.replace(/[^A-Za-z0-9_ ]/g,"");if(t.indexOf(" ")===0)while(t.indexOf(" ")===0)t=t.substr(1);if(t.indexOf("  ")>-1)while(t.indexOf("  ")>-1)t=t.replace("  "," ");return t=t.substr(0,Constants.Page.NAME_MAX_LENGTH),t===""&&(t="untitled"),t},isInputKey:function(e){return e?e<48?e==13||e==32||e==8||e==46:e>=112&&e<=145?!1:e>90&&e<=93?!1:!0:!1},isEquivalent:function(e,t){if(typeof e!=typeof t)return!1;if(e instanceof Array&&!(t instanceof Array))return!1;if((typeof e&&typeof t)==="function")return!0;if(typeof e=="string"||typeof e=="number"||typeof e=="boolean")return e===t;var n=0,r=e instanceof Array;if(!r){for(var i in e){if(e.hasOwnProperty(i)&&!t.hasOwnProperty(i))return!1;++n}for(i in t)t.hasOwnProperty(i)&&n--;if(n!==0)return!1;for(i in e)if(e.hasOwnProperty(i)&&!this.isEquivalent(e[i],t[i]))return!1;return!0}var s=function(e,n){return W.Utils.isEquivalent(e,t[n])};return e.length==t.length&&e.every(s,t)},_RegEx:{validUrlReg:new RegExp("^(ftps|ftp|http|https):\\/\\/[\\w\\-_]+(\\.[\\w\\-_]+)+([\\w\\-\\.,@?^=%&*;:/~\\+#!|]*[\\w\\-\\@?^=%&*;/~\\+#!|])?$"),validUrlNoProtocolReg:new RegExp("^[\\w\\-_]+(\\.[\\w\\-_]+)+([\\w\\-\\.,@?^=%&*;:/~\\+#!|]*[\\w\\-\\@?^=%&*;/~\\+#!|])?$"),validEailReg:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,ValidTwitterUserReg:/^@?[a-zA-Z0-9_%]+$/}}}),define.utils("editorUtils:this",function(){return{getAddPageTemplateFromMainPage:function(e,t,n){return this.getAddPageTemplateFromPage("mainPage",e,t,n)},getAddPageTemplateFromCurrentPage:function(e,t,n){return this.getAddPageTemplateFromPage(W.Preview.getPreviewManagers().Viewer.getCurrentPageId(),e,t,n)},getAddPageTemplateFromPage:function(e,t,n,r){n=n||"";var i=W.Preview.getHtmlElement(e).getLogic(),s="ADD_PAGE_"+t.toUpperCase()+"_GROUPNAME",o="ADD_PAGE_"+t.toUpperCase()+n+"_NAME",u="ADD_PAGE_"+t.toUpperCase()+n+"_DESCRIPTION",a=W.ClipBoard.copyComponent(i);a=this._handleWixAppsComponents(a);var f={group:s,name:o,applicationType:r||Constants.WEditManager.SITE_TYPE_WEB,previewPic:t.toLowerCase()+n+".png",pageDescription:u,serializedPageData:a},l=JSON.encode(f);return l=l.replace(/\\\"/g,"\\'"),l},_handleWixAppsComponents:function(e){var t=W.Preview.getPreviewManagers().Viewer.getAppDataHandler();return e.components&&e.components.each(function(e){if(e.componentType=="wixapps.integration.components.AppPart"){var n=e.data,r=n.appInnerID,i=t.getAppData(r);n.appInnerID=i.appDefinitionId;var s=n.appLogicParams;s&&s.hasOwnProperty("categoryId")&&(s.categoryId.value="defaultCategory")}else e.hasOwnProperty("components")&&this._handleWixAppsComponents(e)}.bind(this)),e}}}),define.oldClass({name:"bootstrap.utils.Hash",Class:{Extends:"bootstrap.utils.Events",intervalId:0,initialize:function(){this._storedExtData="","onhashchange"in window&&!Browser.ie8?window.onhashchange=function(){this._onHashChange()}.bind(this):(this._storedObjectId=window.location.hash,clearInterval(this.intervalId),this.intervalId=window.setInterval(function(){this._onHashChange()}.bind(this),100))},fireHashChangeEvent:function(){Browser&&Browser.ie8?this._onHashChange("force change"):this._onHashChange()},_onHashChange:function(e){var t=this.getHashParts(),n=this._storedObjectId!=t.id;e==="force change"&&(n=!0);var r=this._storedExtData!=t.extData;if(n||r){this._storedObjectId=t.id,this._storedExtData=t.extData;var i=!1;this._silencedExtData&&this._silencedExtData==t.extData&&(delete this._silencedExtData,i=!0),this.fireEvent("change",{newHash:t.id,isForSureAfterChange:!0,extData:t.extData,isIdChanged:n,isExtDataChanged:r,silent:i})}this._cleanHomePageURL()},getHash:function(){var e=window.location.hash;e=unescape(e);var t=this.getHashParts(e);return t.id},getHashParts:function(e){e=e||window.location.hash;var t="|",n="/",r="/",i=e,s="",o="";e.length>1&&e.substr(0,2)=="#!"?i=e.substr(2):e.charAt(0)=="#"&&(i=e.substr(1));var u=i.indexOf(n),a=i.indexOf(t),f=n;if(a!=-1&&a<u||a>-1&&u==-1)f=t;var l=i.indexOf(f);return l>-1&&(s=i.substr(0,l),i=i.substr(l+1)),l=i.indexOf(r),l>-1&&(o=i.substr(l+1),i=i.substr(0,l)),{id:i?i:"",title:s?s:"",extData:o?o:""}},getHashPartsString:function(e,t,n){var r="|",i="/",s="";return t&&(s=t.replace(/([^\s\w\d_-])/g,"").replace(/\s+/g,"-")),s+=i+e,n&&(s+=i+n),s},setHash:function(e,t,n,r){t=t||"untitled";var i=this.getHashPartsString(e,t,n),s=this._storedObjectId!==e,o=this._storedExtData!=n;if(s||o)r&&(this._silencedExtData=n),this.fireEvent("change",{newHash:e,isForSureAfterChange:!1,extData:n,isExtDataChanged:o,isIdChanged:s,silent:r===!0}),W.Utils.callLater(function(){var e=window.location.hash;e!=="#!"+i&&(window.location.hash="!"+i)}.bind(this))},setHashExtData:function(e){var t=this.getHashParts();this.setHash(t.id,t.title,e,!0)},_cleanHomePageURL:function(){var e,t,n=this.getHashParts(e);if(n.extData)return;if(W.Viewer.getHomePageId()!==n.id)return;if(window.history&&window.history.replaceState){e=window.location.hash,t=window.location.href;var r=t.substr(0,t.length-e.length);window.history.replaceState(null,null,r)}else window.location.hash=""}}}),define.utils("hashing",function(){return{SHA256:function(){function n(){return hex_sha256("abc").toLowerCase()=="ba7816bf8f01cfea414140de5dae2223b00361a396177a9cb410ff61f20015ad"}function r(e){return h(C(c(e),e.length*8))}function i(e,t){var n=c(e);n.length>16&&(n=C(n,e.length*8));var r=[],i=[];for(var s=0;s<16;s++)r[s]=n[s]^909522486,i[s]=n[s]^1549556828;var o=C(r.concat(c(t)),512+t.length*8);return h(C(i.concat(o),768))}function s(t){try{e}catch(n){e=0}var r=e?"0123456789ABCDEF":"0123456789abcdef",i="",s;for(var o=0;o<t.length;o++)s=t.charCodeAt(o),i+=r.charAt(s>>>4&15)+r.charAt(s&15);return i}function o(e){try{t}catch(n){t=""}var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i="",s=e.length;for(var o=0;o<s;o+=3){var u=e.charCodeAt(o)<<16|(o+1<s?e.charCodeAt(o+1)<<8:0)|(o+2<s?e.charCodeAt(o+2):0);for(var a=0;a<4;a++)o*8+a*6>e.length*8?i+=t:i+=r.charAt(u>>>6*(3-a)&63)}return i}function u(e,t){var n=t.length,r=[],i,s,o,u,a=[],f=Math.ceil(e.length/2);for(i=0;i<f;i++)a[i]=e.charCodeAt(i*2)<<8|e.charCodeAt(i*2+1);while(a.length>0){u=[],o=0;for(i=0;i<a.length;i++){o=(o<<16)+a[i],s=Math.floor(o/n),o-=s*n;if(u.length>0||s>0)u[u.length]=s}r[r.length]=o,a=u}var l="";for(i=r.length-1;i>=0;i--)l+=t.charAt(r[i]);var c=Math.ceil(e.length*8/(Math.log(t.length)/Math.log(2)));for(i=l.length;i<c;i++)l=t[0]+l;return l}function a(e){var t="",n=-1,r,i;while(++n<e.length)r=e.charCodeAt(n),i=n+1<e.length?e.charCodeAt(n+1):0,55296<=r&&r<=56319&&56320<=i&&i<=57343&&(r=65536+((r&1023)<<10)+(i&1023),n++),r<=127?t+=String.fromCharCode(r):r<=2047?t+=String.fromCharCode(192|r>>>6&31,128|r&63):r<=65535?t+=String.fromCharCode(224|r>>>12&15,128|r>>>6&63,128|r&63):r<=2097151&&(t+=String.fromCharCode(240|r>>>18&7,128|r>>>12&63,128|r>>>6&63,128|r&63));return t}function f(e){var t="";for(var n=0;n<e.length;n++)t+=String.fromCharCode(e.charCodeAt(n)&255,e.charCodeAt(n)>>>8&255);return t}function l(e){var t="";for(var n=0;n<e.length;n++)t+=String.fromCharCode(e.charCodeAt(n)>>>8&255,e.charCodeAt(n)&255);return t}function c(e){var t=[],n=e.length>>2;for(var r=0;r<n;r++)t[r]=0;for(var i=0;i<e.length*8;i+=8)t[i>>5]|=(e.charCodeAt(i/8)&255)<<24-i%32;return t}function h(e){var t="";for(var n=0;n<e.length*32;n+=8)t+=String.fromCharCode(e[n>>5]>>>24-n%32&255);return t}function p(e,t){return e>>>t|e<<32-t}function d(e,t){return e>>>t}function v(e,t,n){return e&t^~e&n}function m(e,t,n){return e&t^e&n^t&n}function g(e){return p(e,2)^p(e,13)^p(e,22)}function y(e){return p(e,6)^p(e,11)^p(e,25)}function b(e){return p(e,7)^p(e,18)^d(e,3)}function w(e){return p(e,17)^p(e,19)^d(e,10)}function E(e){return p(e,28)^p(e,34)^p(e,39)}function S(e){return p(e,14)^p(e,18)^p(e,41)}function x(e){return p(e,1)^p(e,8)^d(e,7)}function T(e){return p(e,19)^p(e,61)^d(e,6)}function C(e,t){var n=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],r=[],i,s,o,u,a,f,l,c,h,p,d,E;e[t>>5]|=128<<24-t%32,e[(t+64>>9<<4)+15]=t;for(h=0;h<e.length;h+=16){i=n[0],s=n[1],o=n[2],u=n[3],a=n[4],f=n[5],l=n[6],c=n[7];for(p=0;p<64;p++)p<16?r[p]=e[p+h]:r[p]=k(k(k(w(r[p-2]),r[p-7]),b(r[p-15])),r[p-16]),d=k(k(k(k(c,y(a)),v(a,f,l)),N[p]),r[p]),E=k(g(i),m(i,s,o)),c=l,l=f,f=a,a=k(u,d),u=o,o=s,s=i,i=k(d,E);n[0]=k(i,n[0]),n[1]=k(s,n[1]),n[2]=k(o,n[2]),n[3]=k(u,n[3]),n[4]=k(a,n[4]),n[5]=k(f,n[5]),n[6]=k(l,n[6]),n[7]=k(c,n[7])}return n}function k(e,t){var n=(e&65535)+(t&65535),r=(e>>16)+(t>>16)+(n>>16);return r<<16|n&65535}var e=0,t="",N=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998];return{hex_sha256:function(e){return s(r(a(e)))},b64_sha256:function(e){return o(r(a(e)))},any_sha256:function(e,t){return u(r(a(e)),t)},hex_hmac_sha256:function(e,t){return s(i(a(e),a(t)))},b64_hmac_sha256:function(e,t){return o(i(a(e),a(t)))},any_hmac_sha256:function(e,t,n){return u(i(a(e),a(t)),n)}}}()}}),define.utils("helpers:this",function(){return{log:function(){},getUniqueId:function(e){var t=this._prefixCounterMap;e=e?e.replace(/[^A-Za-z0-9_-]/g,""):"",e.length>3&&(e=e?e.replace(/[aeiou]/gi,""):""),e=e?e:Constants.components.DEFAULT_PREFIX,t[e]=t[e]===undefined?0:++t[e];while($(e+t[e].toString(36)))t[e]++;return e+t[e].toString(36)},getGUID:function(){var e=function(){return Math.floor(Math.random()*65536).toString(16)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},getAntiCacheSuffix:function(){var e=W.Utils.getQueryParam("nocache"),t=W.Utils,n;return window.location.protocol==="file:"||e=="false"||window.debugMode==="nodebug"?n="":(t._antiCacheSuffix||(t._antiCacheSuffix=(new Date).getTime().toString(36)),n="?noCache="+t._antiCacheSuffix),n},setUrlParam:function(e,t,n){var r=e.split("?"),i=[],s=!1;if(r.length==2){i=r[1].split("&");for(var o=0;o<i.length;o++)if(i[o].indexOf(t+"=")===0){i[o]=t+"="+String(n),s=!0;break}}return s||i.push(t+"="+String(n)),r[1]=i.join("&"),e=r.join("?"),e},getMailFromMailtoURL:function(e){var t="mailto:",n=t.length;e.substr(0,n)==t&&(e=e.substr(n));var r="?subject=",i=e.indexOf(r);return i>-1&&(e=e.substr(0,i)),e},getQueryParam:function(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n="[\\?&]"+e+"=([^&#]*)",r=new RegExp(n),i=t||window.location.href,s=r.exec(i);return s===null?"":s[1]},callLater:function(e,t,n,r){if(e&&typeOf(e)==="function"){t=t||[],n=n||window,r=r||1;var i=this.getQueryParam("stack")==="true"?this.getStackTrace():"";return setTimeout(function(){e.callLaterStack=i,e.apply(n,t),delete e.callLaterStack},r)}},clearCallLater:function(e){clearTimeout(e)},callOnNextRender:function(e,t){t=t||60;var n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,t)};return n(e)},clearOnNextRender:function(e){var t=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout;t(e)},objectSizeDelta:function(e){var t=0;for(var n in e)e.hasOwnProperty(n)&&t++;return t},getTimestamp:function(){var e=[W.Resources.get("EDITOR_LANGUAGE","DAY_SUNDAY"),W.Resources.get("EDITOR_LANGUAGE","DAY_MONDAY"),W.Resources.get("EDITOR_LANGUAGE","DAY_TUESDAY"),W.Resources.get("EDITOR_LANGUAGE","DAY_WEDNESDAY"),W.Resources.get("EDITOR_LANGUAGE","DAY_THURSDAY"),W.Resources.get("EDITOR_LANGUAGE","DAY_FRIDAY"),W.Resources.get("EDITOR_LANGUAGE","DAY_SATURDAY")],t=new Date,n=t.getDate(),r=t.getMonth()+1,i=W.Resources.get("EDITOR_LANGUAGE","MONTH_"+r),s=t.getHours();s<10&&(s="0"+s);var o=t.getMinutes();o<10&&(o="0"+o);var u=t.getDay(),a=t.getYear()+1900;return e[u]+", "+n+" "+i+" "+a+", "+s+":"+o},naiveInstanceOf:function(e,t){return e?!instanceOf(t,String)&&instanceOf(e,t)?!0:(instanceOf(t,String)||(t=t.prototype.className),e._instanceOf===undefined||t===undefined?!1:e._instanceOf.some(function(e){return e==t})):!1},sanitizeUnicode:function(e){return typeof e=="string"?e.replace(/[\u2028\u2029]/g,"\n"):e},getUniqueArray:function(e){var t=[],n=e.length;for(var r=0;r<n;r++){for(var i=r+1;i<n;i++)e[r]===e[i]&&(i=++r);t.push(e[r])}return t},areArraysContainSameElements:function(e,t){var n=e.filter(function(e){return t.indexOf(e)==-1}),r=t.filter(function(t){return e.indexOf(t)==-1});return r&&r.length>0||n&&n.length>0?!1:!0},areObjectsEqual:function(e,t){var n;if(e&&!t||!e&&t)return!1;for(n in e){if(!e.hasOwnProperty(n))continue;if(typeof t[n]=="undefined"&&typeof e[n]!="undefined")return!1}for(n in e){if(!e.hasOwnProperty(n))continue;if(e[n])switch(typeof e[n]){case"object":if(!this.areObjectsEqual(e[n],t[n]))return!1;break;case"function":if(typeof t[n]=="undefined"||e[n].toString()!=t[n].toString())return!1;break;default:if(e[n]!=t[n])return!1}else if(t[n])return!1}for(n in t){if(!t.hasOwnProperty(n))continue;if(typeof e[n]=="undefined"&&typeof t[n]!="undefined")return!1}return!0},stringToBoolean:function(e){return e?e.toLowerCase()=="true":!1},strEndsWith:function(e,t){return e.indexOf(t,e.length-t.length)!==-1},getComponentLogicFromDom:function(e){return this.getComponentLogicFromDomByAttribute("id",e)},getComponentLogicFromDomByAttribute:function(e,t){var n=W.Preview?W.Preview.getPreviewSite():window,r=n.$$("["+e+'="'+t+'"]')[0];return r?r.getLogic():null}}}),function(){var e,t,n,r,i,s,o,u;e=document.createElement("style"),e.id="testCss",document.getElementsByTagName("head")[0].appendChild(e),r=e.sheet?"sheet":"styleSheet",t=e[r],t||LOG.reportError(wixErrors.UTILS_STYLE_NOT_FOUND,"Styles","feature detection"),i=t.ownerNode?"ownerNode":"owningElement",o=t.deleteRule?"deleteRule":"removeRule",s=t.cssRules?"cssRules":"rules";var a=function(e){return e.replace(/[\s]+/g," ").replace(/'/g,'"').replace(/^\s+/,"").replace(/\s*$/,"")},f;t.insertRule?f=function(e,t){e=a(e);if(this._rulesMap[e]){LOG.reportError(wixErrors.UTILS_RULE_ALREADY_EXIST,"Styles","createRule",e+"");return}var n=this.insertRule(e+"{"+t+"}",this.cssRules.length),r=this.cssRules[n];return this._rulesMap[e]=r,this._browserSelectorMapping[e]=r.selectorText,r}:f=function(e,t){e=a(e);if(this._rulesMap[e]){LOG.reportError(wixErrors.UTILS_RULE_ALREADY_EXIST,"Styles","createRule",e+"");return}var n=this.addRule(e,t),r;if(n!=-1)r=this.rules[n];else for(var i=0;i<this.rules.length;++i)if(this.rules[i].selectorText==e){r=this.rules[i];break}return this._rulesMap[e]=r,this._browserSelectorMapping[e]=r.selectorText,r},t._rulesMap={},t._browserSelectorMapping={},n=f.apply(t,["#tempSelector","color:black;"]),u=n.cssText?"cssText":"no_support";var l=function(){return this[r]},c=function(){return this[s]},h=function(){this._rulesMap=undefined,this.styleNode.dispose()},p=function(){this._rulesMap=[];for(var e=this[s].length-1;e>=0;--e)this[o](e)},d=function(e){return e=a(e),this._rulesMap[e]?this._rulesMap[e]:null},v=function(e){e=a(e);var t=!1;if(this._rulesMap[e]){var n=this._browserSelectorMapping[e],r=this[s].length-1;for(var i=r;i>=0;--i)this[s][i].selectorText==n&&(this[o](i),t=!0);delete this._rulesMap[e]}return t},m;t.cssRules?m=function(e,t){e=a(e);var n=this._rulesMap[e];return n?n.style[u]=t:(n=this.createRule(e,t),this._rulesMap[e]=n),n}:m=function(e,t){return e=a(e),this._rulesMap[e]&&(this.removeRuleBySelector(e),delete this._rulesMap[e]),this.createRule(e,t)},define.utils("createStyleSheet:this",function(){function e(e){var t=W.Utils.getUniqueId(e),n=(new Element("style",{id:t})).inject(document.head),s=n[r];if(!s){var o=document.styleSheets;for(var u=0;u<o.length;++u)if(o[u][i]===n){s=o[u];break}}if(s)return s._rulesMap={},s._browserSelectorMapping={},s.styleNode=n,s.getRuleList=c,s.removeStyleSheet=h,s.clearRules=p,s.getRuleBySelector=d,s.removeRuleBySelector=v,s.updateRule=m,s.createRule=f,n.getStyleSheet=l,s;LOG.reportError(wixErrors.UTILS_ERR_CREATE_STYLE,"Styles","createStyleSheet","")}return{createStyleSheet:function(e){return this._styles.createStyleSheet(e)},_styles:{createStyleSheet:e}}})}(),define.utils("testUtils:this",function(){return{instanceIndex:0,_$getUniqeId:function(e){var t=this.instanceIndex,n=Utils.getUniqueId(e);return this.instanceIndex=t,n}}});