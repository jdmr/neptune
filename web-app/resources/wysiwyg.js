define.Class.overrideName.multi({"mobile.core.components.BaseList":"core.components.BaseList","mobile.core.components.Container":"core.components.Container","mobile.core.components.Image":"core.components.Image","mobile.core.components.TwitterFollow":"core.components.TwitterFollow","mobile.core.components.MenuButton":"core.components.MenuButton","mobile.core.components.Page":"core.components.Page","mobile.core.components.ServiceItem":"core.components.ServiceItem","mobile.core.components.SimpleButton":"core.components.SimpleButton","mobile.core.components.SiteStructure":"core.components.SiteStructure","mobile.core.components.traits.InputFieldEvents":"core.components.traits.InputFieldEvents"}),function(){function e(){function e(t){return e.plugins.forEach(function(e){t=e.exec(t)}),t}return e.plugins=[],e.plugins.push({exec:function(e){return e.document_data.THEME_DATA&&(e.theme_data.THEME_DATA||(e.theme_data.THEME_DATA=e.document_data.THEME_DATA),delete e.document_data.THEME_DATA),e}}),e}define.resource("dataFixer",{fix:e()})}(),define.Class.overrideName.multi({"mobile.core.skins.InlineSkin":"skins.core.InlineSkin","mobile.core.skins.TwitterTweetSkin":"skins.core.TwitterTweetSkin","mobile.core.skins.ButtonSkin":"skins.core.ButtonSkin","mobile.core.skins.ContactItemSkin":"skins.core.ContactItemSkin","mobile.core.skins.ContactListSkin":"skins.core.ContactListSkin","mobile.core.skins.FacebookCommentSkin":"skins.core.FacebookCommentSkin","mobile.core.skins.GlobalMenuSkin":"skins.core.GlobalMenuSkin","mobile.core.skins.GooglePlusOneSkin":"skins.core.GooglePlusOneSkin","mobile.core.skins.HeaderSkin":"skins.core.HeaderSkin","mobile.core.skins.HomeButtonSkin":"skins.core.HomeButtonSkin","mobile.core.skins.ImageNewSkin":"skins.core.ImageNewSkin","mobile.core.skins.ImageSkin":"skins.core.ImageSkin","mobile.core.skins.MenuButtonSkin":"skins.core.MenuButtonSkin","mobile.core.skins.NetworkItemSkin":"skins.core.NetworkItemSkin","mobile.core.skins.NetworkListSkin":"skins.core.NetworkListSkin","mobile.core.skins.PageTitleSkin":"skins.core.PageTitleSkin","mobile.core.skins.PhotoFullScreenSkin":"skins.core.PhotoFullScreenSkin","mobile.core.skins.PhotoGalleryFullScreenDefaultSkin":"skins.core.PhotoGalleryFullScreenDefaultSkin","mobile.core.skins.PhotoGalleryGridDefaultSkin":"skins.core.PhotoGalleryGridDefaultSkin","mobile.core.skins.PhotoSkin":"skins.core.PhotoSkin","mobile.core.skins.RichTextImageSkin":"skins.core.RichTextImageSkin","mobile.core.skins.RichTextSkin":"skins.core.RichTextSkin","mobile.core.skins.ServiceItemSkin":"skins.core.ServiceItemSkin","mobile.core.skins.ServiceListSkin":"skins.core.ServiceListSkin","mobile.core.skins.SimpleButtonSkin":"skins.core.SimpleButtonSkin","mobile.core.skins.SiteNavigationMenuSkin":"skins.core.SiteNavigationMenuSkin","mobile.core.skins.TwitterFollowSkin":"skins.core.TwitterFollowSkin","mobile.core.skins.FacebookLikeSkin":"skins.core.FacebookLikeSkin"}),define.resource("experimentsOrder",[{id:"AppsOpenAppMarket",group:"New",owner:"Mayah",description:"Apps to open app market",dependencies:[],conflicts:["AddPageInAddDialog"]},{id:"Dev",group:"New",owner:"Gil",description:"You are looking at it now!",dependencies:[],conflicts:[]},{id:"FirstSaveNewMessage",group:"New",owner:"Mayah",description:"Change the text in the first save dialog, to notify the user can connect his own domain",dependencies:[],conflicts:[]},{id:"TPAFixed",group:"New",owner:"Gil O.",description:"Viewport widgets for TPA",dependencies:[],conflicts:[]},{id:"AppMarket",group:"NewDesign",owner:"Gil O.",description:"App Market new design",dependencies:[],conflicts:["GridLines","GridLines2"]},{id:"PartialComponentPreview",group:"New",owner:"Lichtash",description:"Partially previews a component in Editing Mode (for clickthrough)",dependencies:[],conflicts:[]},{id:"UpgradeForUpgradeButton",group:"New",owner:"Lichtash",description:"Unified behaviour of the upgrade button from SiteNamePanel",dependencies:[],conflicts:[]},{id:"URM4",group:"New",owner:"Shahar",description:"undo for theme data (fonts, colors and backgrounds)",dependencies:[],conflicts:[]},{id:"MCM",group:"New",owner:"Roni",description:"refactor - moving the component modification logic from ComponentEditBox to MouseComponentModifier ",dependencies:[],conflicts:[]},{id:"GridLines",group:"New",owner:"Roni",description:"grid lines which control the height and y of site segments",dependencies:[],conflicts:[]},{id:"GridLines2",group:"New",owner:"Roni",description:"grid lines - Nadavs version",dependencies:[],conflicts:[]},{id:"CallOnNextRender",group:"New",owner:"Roni",description:"use CallOnNextRender function to sync rendering with browser natural rendering",dependencies:[],conflicts:[]},{id:"LazyShare",group:"New",owner:"Lichtash",description:"",dependencies:[],conflicts:[]},{id:"RemoveStopPropogation",group:"New",owner:"Alissa",description:"remove mousedown stop propogation from mouse catcher and edit box",dependencies:[],conflicts:[]},{id:"RichTextViewer",group:"New",owner:"Alissa",description:"refactor the viewer component to work with new skin and place the right title in the link",dependencies:[],conflicts:[]},{id:"RichText",group:"New",owner:"Alissa",description:"new rich text editor",dependencies:["RichTextViewer","RemoveStopPropogation"],conflicts:[]},{id:"RichTextMigrationQA",group:"New",owner:"Shahar",description:"text component migration for QA use",dependencies:["RichTextViewer"],conflicts:[]},{id:"Staff",group:"Wix",owner:"xxxx",description:"",dependencies:[],conflicts:[]},{id:"WixAppsPage",group:"New",owner:"Mimran",description:"Wix Apps (AKA Lists) Application Page",dependencies:[],conflicts:[]},{id:"AppBuilder",group:"New",owner:"Mimran",description:"Wix Apps - App Builder",dependencies:["URM4"],conflicts:[]},{id:"URM5",group:"New",owner:"Shahar",description:"undo for wixapps (including ecommerce)",dependencies:["AppBuilder"],conflicts:[]},{id:"AddPageInAddDialog",group:"New",owner:"Roni",description:"ability to add a page from the add menu",dependencies:[],conflicts:[]},{id:"WalkMe",group:"New",owner:"Sivan",description:"WalkMe Button in the top bar",dependencies:[],conflicts:[]},{id:"SliderAutoPlay",group:"New",owner:"xxxx",description:"",dependencies:[],conflicts:[]},{id:"FirstSave",group:"New",owner:"Tom",description:"Wait 20 minutes before popping the Save Dialog ",dependencies:[],conflicts:[]},{id:"PremiumWixAds",owner:"Tom",group:"New",description:"Monetize WixAds in Preview Mode, ASK OMER!!! ",dependencies:[],conflicts:[]},{id:"StyleRefactor",group:"New",owner:"Sivan",description:"New Style Objects",dependencies:[],conflicts:[]},{id:"Bug4356",owner:"Tom or Ido",group:"New",description:"A temporary fix for bug 4356: Affects only Chrome and Safari. for more info: http://code.google.com/p/chromium/issues/detail?id=139613, ASK OMER!!!",dependencies:[],conflicts:[]},{id:"SyncWixify",group:"New",owner:"Sivan & Ido",description:"Make wixify work sync - part of the base component refactor",dependencies:["StyleRefactor"],conflicts:[]},{id:"EscapeData",group:"New",owner:"Ido",description:"escape/html-encode characters from inputs to prevent data corruption",dependencies:[],conflicts:[]},{id:"JITPageLoader",group:"New",owner:"Dromi",description:"enable loading pages structure and data only when they are needed",dependencies:[],conflicts:[]},{id:"NativeUploadButton",group:"New",owner:"Barak",description:"html5 native uploader in the media dialog",dependencies:[],conflicts:[]},{id:"FPPShowOnAllPages",group:"New",owner:"Tom",description:'display a "Show On All Pages" checkbox in FPP.',dependencies:[],conflicts:[]},{id:"CSW",group:"New",owner:"Roni",description:"Customized Site Width - user can set site width by adding a query param: siteWidth=xxx",dependencies:[],conflicts:[]},{id:"PublishMarketingBanner",group:"Sale",owner:"xxxx",description:"in publish dialog show the sale marketing banner",dependencies:[],conflicts:[]},{id:"ShowOneMnMessage",group:"New",owner:"xxxx",description:"in publish dialog show one mn message in case the site revision has not been updated on all servers",dependencies:[],conflicts:[]},{id:"NewBaseComps",group:"New",owner:"Ido",description:"a test drive for the new baseComp",dependencies:["SyncWixify","StyleRefactor"],conflicts:[]},{id:"Aviary",group:"New",owner:"Tom",description:"Integrate Aviary.com image editor into Wix Editor",dependencies:[],conflicts:[]},{id:"SeoTip",group:"New",owner:"Leonid",description:"Add SEO Tool link in the SEO settings panel in published docs",dependencies:[],conflicts:[]},{id:"PartialClone",owner:"Dromy",group:"New",description:"Same functionality as PartailSave only for clone document",dependencies:[],conflicts:[]},{id:"FooterHeaderTracking",group:"New",owner:"Denis",description:"Check Serialized data and report if there is no Header of Footer",dependencies:[],conflicts:[]},{id:"MemberLoginAndProtectPageUpgradeButton",group:"New",owner:"Leonid",description:"Adding upgrade button to site members panel - login button and protect page panel",dependencies:[],conflicts:[]},{id:"TextLimitFix",group:"New",owner:"Alissa",description:"check the text length in change and not on key down",dependencies:[],conflicts:[]},{id:"HtmlParastorage",group:"New",owner:"Ido",description:"string replace static.wix.com to static.parastorage.com in html component",dependencies:[],conflicts:[]},{id:"ImageManager",group:"New",owner:"Leonid",description:"Gallery - Organize images",dependencies:[],conflicts:[]},{id:"GIFfix",group:"New",owner:"Denis Wolf",description:"fix gif resize/crop/animation bugs in editor and viewer",dependencies:[],conflicts:[]},{id:"ValidateComponent",group:"New",owner:"Denis Wolf & Noam-si",description:"Validate component before serialization ",dependencies:[],conflicts:[]},{id:"Dirtify",group:"New",owner:"Noam-si",description:"Call mark dirty for referenced objects of data item with schema",dependencies:[],conflicts:[]},{id:"Uniqifyid",group:"New",owner:"Denis",description:"Before serialization - check all id for uniquest, resolve conflicts",dependencies:[],conflicts:[]},{id:"NewBaseCompFiveGridLine",group:"New",owner:"Sivan",description:"convert horizontal line to new base component",dependencies:["StyleRefactor","SyncWixify"],conflicts:[]},{id:"NBC_WCD",group:"New",owner:"Dromy",description:"New version of WComponentDeserializer",dependencies:["StyleRefactor","SyncWixify"],conflicts:[]},{id:"NBC_WCD_GridLines",group:"New",owner:"Dromy",description:"replace the change of the GridLines experiment on the WComponentDeserializer with changes that relevant to the new WCD",dependencies:["StyleRefactor","SyncWixify","GridLines","NBC_WCD"],conflicts:[]},{id:"StylePerComponent",group:"New",owner:"Tom B. and Uri T.",description:"Style per Component step 1: Refactor style selection button",dependencies:["StyleRefactor"],conflicts:[]},{id:"MobileFixes",group:"New",owner:"Sivan & Roni",description:"Mobile Bug Fixes",dependencies:[],conflicts:[]},{id:"MobileZoom",group:"New",owner:"Roni",description:"Zoom mode for mobile devices",dependencies:[],conflicts:[]},{id:"NewBaseCompFiveGridLine",group:"New",owner:"Sivan",description:"convert horizontal line to new base component",dependencies:["StyleRefactor","SyncWixify"],conflicts:[]},{id:"DummyExp1",group:"New",owner:"Leonid",description:"Dummy Experiment",dependencies:[],conflicts:[]},{id:"DummyExp2",group:"New",owner:"Leonid",description:"Dummy Experiment",dependencies:[],conflicts:[]},{id:"DummyExp3",group:"New",owner:"Leonid",description:"Dummy Experiment",dependencies:[],conflicts:[]},{id:"DummyExp4",group:"New",owner:"Leonid",description:"Dummy Experiment",dependencies:[],conflicts:[]},{id:"DummyExp5",group:"New",owner:"Leonid",description:"Dummy Experiment",dependencies:[],conflicts:[]},{id:"DummyExp6",group:"New",owner:"Leonid",description:"Dummy Experiment",dependencies:[],conflicts:[]},{id:"DummyExp7",group:"New",owner:"Leonid",description:"Dummy Experiment",dependencies:[],conflicts:[]},{id:"DummyExp8",group:"New",owner:"Leonid",description:"Dummy Experiment",dependencies:[],conflicts:[]},{id:"DummyExp9",group:"New",owner:"Leonid",description:"Dummy Experiment",dependencies:[],conflicts:[]},{id:"DummyExp10",group:"New",owner:"Leonid",description:"Dummy Experiment",dependencies:[],conflicts:[]},{id:"SaveSuccessDialogHide",group:"New",owner:"Leonid",description:"added dont show again checkbox",dependencies:[],conflicts:[]},{id:"RightClick",group:"New",owner:"Guy Romm",description:"disable context menu on right click and show FPP",dependencies:[],conflicts:[]},{id:"NBC_SiteButton",group:"New",owner:"Roy",description:"a SiteButton that uses new base component",dependencies:["SyncWixify","StyleRefactor"],conflicts:[]},{id:"NBC_WPhoto",group:"New",owner:"Ido",description:"changes the WPhoto component to use the new base component",dependencies:["SyncWixify","StyleRefactor"],conflicts:[]},{id:"NBC_VerticalLine",group:"New",owner:"Nir M",description:"New BaseComponent Vertical Line!",dependencies:["SyncWixify","StyleRefactor"],conflicts:[]},{id:"NBC_HorizontalLine",group:"New",owner:"Nir M",description:"New BaseComponent Horizontal(FiveGridLine) Line!",dependencies:["SyncWixify","StyleRefactor"],conflicts:[]},{id:"NBC_WRichText",group:"New",owner:"Erez",description:"convert richtext to new base component",dependencies:["SyncWixify","StyleRefactor","RichTextViewer"],conflicts:[]},{id:"FPPCopyPaste",group:"New",owner:"Shahar",description:"Remove FPP duplicate button and add copy and paste buttons instead",dependencies:[],conflicts:[]},{id:"TwitterAPIpatch",group:"New",owner:"Leonid",description:"override twitterFeed with new twitter API",dependencies:[],conflicts:[]}]),define.oldComponent({name:"wysiwyg.common.components.InfoTip",skinParts:{content:{type:"htmlElement"}},Class:{Extends:"mobile.core.components.base.BaseComponent",_states:{hidden:["hidden","visible"]},Binds:["initialize","_callTip","_showTip","_mouseOut","_mouseIn","_timerToClose","_closeToolTipCmd","_showToolTipCmd","_stayInWindowBounds"],_mouseInside:!1,_onCallerMouseMoveWasCalled:!1,_shouldShowTooltipAfterTimout:!1,_tipToShow:"",initialize:function(e,t,n){this.parent(e,t,n),this.tipNode=this.getViewNode(),this.tipNode.addEvent("click",this._handleEvent),this.tipNode.addEvent("mouseleave",this._mouseOut),this.tipNode.addEvent("mouseenter",this._mouseIn),document.addEvent("keyup",this._mouseOut),this.setState("hidden")},_closeToolTipCmd:function(){this._tipToShow="",this._hideToolTipTimeOut=setTimeout(function(){this._mouseInside||this._closeTip()}.bind(this),150)},_showToolTipCmd:function(e,t){this._shouldShowTooltipAfterTimout=!0,this._tipToShow=e.id,clearTimeout(this._hideToolTipTimeOut),window.setTimeout(function(){this._shouldShowTooltipAfterTimout&&this._tipToShow===e.id&&this._callTip(e,t)}.bind(this),100)},_handleEvent:function(e){var t=e.target;t.get("href")&&e.preventDefault();var n=this.getLogic(),r=t.get("action");r&&n.actions[r].bind([n,t])()},_setToolTipValues:function(e){this._skinParts.content.set("html",e)},_getToolTipCallerNode:function(e){return typeOf(e.source)=="element"?e.source:e.source.getViewNode()},_callTip:function(e,t){this._resetToolTip(),this._setToolTipValues(e.content),this._showTip(this._getToolTipCallerNode(t))},_resetToolTip:function(){this._skinParts.content.empty()},_showTip:function(e){var t=this.getViewNode(),n=this._getPosition(e,t);t.setStyles({top:n.y,left:n.x[0],right:n.x[1]}),this.removeState("hidden","hidden"),this._activateTimerToClose(t,e)},_activateTimerToClose:function(e,t){this._numOfTimerCalls++,W.Utils.callLater(this._closeTipByTimeout,null,this,3e3)},_closeTipByTimeout:function(){this._numOfTimerCalls--,this._numOfTimerCalls===0&&this._closeTip()},_timerToClose:function(e,t){var n;this.onCallerMove=function(){this._onCallerMouseMoveWasCalled=!0,$(document.body).removeEvent("mousemove",this.onCallerMove)}.bind(this),$(document.body).addEvent("mousemove",this.onCallerMove),this.checkIfOut=function(){(this._mouseInside||!this._onCallerMouseMoveWasCalled)&&this.createTimer()}.bind(this),this.createTimer=function(){n=setTimeout(this.checkIfOut,3e3)},this.createTimer()},_getPosition:function(e,t){var n=e.getPosition(),r=e.getHeight(),i=e.getWidth(),s=n.y,o=n.x,u=t.getHeight(),a=t.getWidth(),f=o-a/2;this._top=s-u,this._left=f,this._right="auto",this._stayInWindowBounds(r,i,s,o,u);var l=0,c=0;if(t.offsetParent){var h=t.offsetParent.getPosition();l=h.y,c=h.x}return this._top=this._top-l,this._left=this._left-c,this._right=this._right+c,{x:[this._left,this._right],y:this._top}},_stayInWindowBounds:function(e,t,n,r,i){var s=window.innerWidth,o=window.innerHeight;if(this._top-document.body.getScroll().y<0){var u=n+i;u>o+document.body.getScroll().y+i&&(n<0?u=n:u=document.body.getScroll().y),this._top=u>0?u:0}this._left<0?this._left=r:this._left>s&&(this._left="auto",this._right=r+t)},_setState:function(e,t){e?this.setState(t):this.removeState(t)},_closeTip:function(){this._shouldShowTooltipAfterTimout=!1,this._onCallerMouseMoveWasCalled=!1,this.setState("hidden"),this.getViewNode().setStyles({top:0,left:0})},_mouseOut:function(e){this._mouseInside=!1,this._closeTip()},_mouseIn:function(e){this._mouseInside=!0}}}),define.component("wysiwyg.common.components.inputs.OptionsListInput",function(e){var t=e;t.inherits("mobile.core.components.base.BaseComponent"),t.traits(["wysiwyg.viewer.components.traits.ValidationSettings"]),t.utilize(["wysiwyg.viewer.utils.ComponentSequencer"]),t.binds(["_onItemSelected"]),t.states({validity:["valid","invalid"]}),t.fields({_selectedItem:null}),t.dataTypes(["SelectableList"]),t.methods({initialize:function(e,t,n){this.parent(e,t,n),this._sequencer=new this.imports.ComponentSequencer,n&&(this._sequencer.resolveItem=function(){return{comp:n.compType,skin:n.compSkin}})},_onAllSkinPartsReady:function(){},_preventRenderOnDataChange:function(e,t,n){return t=="selected"},_prepareForRender:function(){return this._sequencer.addEvent("productionFinished",function(e){this._onSequencerFinished(e)}.bind(this)),this._sequencer.createComponents(this.getViewNode(),this.getDataItem().get("items")),!0},_onSequencerFinished:function(e){var t=e.elements;t.forEach(function(e){var t=e.getLogic();t.addEvent("itemSelected",this._onItemSelected),t.getDataItem()===this.getDataItem().get("selected")&&(this._selectedItem=t,this._selectedItem.setSelected(!0))}.bind(this))},_onItemSelected:function(e){if(this._selectedItem){if(this._selectedItem===e)return;this._selectedItem.setSelected(!1)}this._selectedItem=e,this._selectedItem.setSelected(!0);var t=this._selectedItem.getDataItem();this.setValidationState(!0),this.getDataItem().set("selected",t),this.fireEvent("selectionChanged",t)},setValidationState:function(e){this.setState(e?"valid":"invalid","validity"),this.parent(e)}})}),define.Class("wysiwyg.common.components.traits.LinkableComponent",function(e){var t=e;t.resources(["W.Utils","W.Viewer"]),t.binds(["_linkableComponentRender","_linkify","renderLinks","_showNavigationDisabledTooltip","_linkableComponentEditModeChanged"]),t.statics({linkType:{SMS:"SMS",CALL:"CALL",SKYPE:"SKYPE",MAP:"MAP",EMAIL:"EMAIL",FACEBOOK:"FACEBOOK",FLICKR:"FLICKR",BLOGGER:"BLOGGER",MYSPACE:"MYSPACE",LINKEDIN:"LINKEDIN",TWITTER:"TWITTER",TUMBLR:"TUMBLR",YOUTUBE:"YOUTUBE",VIMEO:"VIMEO",PAGE:"PAGE",FREE_LINK:"FREE_LINK",TEXT:"TEXT",DELICIOUS:"DELICIOUS",WEBSITE:"WEBSITE",DOCUMENT:"DOCUMENT",LOGIN:"LOGIN",ADMIN_LOGIN:"ADMIN_LOGIN"},linkTarget:{SAME_WINDOW:"_self",NEW_WINDOW:"_blank"}}),t.methods({initialize:function(){var e=this.resources.W.Utils.linkUtils;this.render?(this._componentOriginalRender=this.render.bind(this),this.render=this._linkableComponentRender):this.NEW_BASE_COMP===!0&&(this.on(Constants.LifecycleSteps.RENDER,this,this._linkableComponentRender),this.on(Constants.EventDispatcher.Events.EXTERMINATING,this,this._exterminateLinkableComponent)),this._linkableComponentOnEditModeChanged=e.linkableComponentEditModeChanged.bind(this),this.injects().Commands.registerCommandListenerByName("WPreviewCommands.WEditModeChanged",this,this._linkableComponentOnEditModeChanged)},_exterminateLinkableComponent:function(){this.injects().Commands.unregisterListener(this)},_linkableComponentRender:function(){this._componentOriginalRender&&this._componentOriginalRender();var e=this.resources.W.Utils.linkUtils,t=this.getDataItem();e.renderLinks.call(this,t,this._skinParts.link),this.resources.W.Viewer.getEditorMode()=="PREVIEW"&&e.linkableComponentEditModeChanged.call(this,"PREVIEW",t,this._skinParts.link)},renderLinks:function(){var e=this.getDataItem(),t=e.get("href"),n=e.get("target");if(n=="same"||n=="self")n="_self",e.set("target","_self");var r=e.get("linkType"),i=this._skinParts.link;this._linkify(r,i,t,n),this._NO_LINK_PROPAGATION&&this._disableLinkClickPropagation(i)},_disableLinkClickPropagation:function(e){e.addEvent("click",function(e){e.stopPropagation()})},_linkify:function(e,t,n,r){if(!t)return;n&&n!==""?(t.set("href",n),t.setStyle("cursor","pointer"),this._setTarget(t,r),this.hasState("noLink","linkableComponent")&&this.removeState("noLink","linkableComponent")):(t.setStyle("cursor","default"),t.erase("href"),t.erase("target"),this.hasState("noLink","linkableComponent")&&this.setState("noLink","linkableComponent")),this._handleSpecialCases(e,t)},_handleSpecialCases:function(e,t){t.removeEvents("click");switch(e){case this.linkType.LOGIN:t.addEvent("click",function(){if(window.animateForm){var e=this.getDataItem(),t=e.get("text");if(t){t=JSON.parse(t);var n=t.postLoginUrl,r=t.postSignupUrl,i=t.type,s="HTML",o=window.userApi?window.userApi.isSessionValid():!1;o?n&&(window.location.href=n):window.animateForm.callForm([r,n,i,s])}}}.bind(this));break;case this.linkType.ADMIN_LOGIN:t.setStyle("cursor","pointer"),t.addEvent("click",function(){this.injects().Commands.executeCommand("WViewerCommands.AdminLogin.Open")}.bind(this))}},_setTarget:function(e,t){e.set("target",t)},_linkableComponentEditModeChanged:function(e){if(this.getIsDisposed()===!0)return;var t,n=!1,r=!1,i=this.getDataItem(),s=i.get("linkType"),o=i.get("target");o==this.linkTarget.SAME_WINDOW&&s==this.linkType.WEBSITE&&(n=!0),s==this.linkType.EMAIL&&(r=!0),t=this._skinParts.link,e=="PREVIEW"?n?this._bindPageLeaveWarningToLink(t):r&&(this._bindMailtoLinks(),this.renderLinks()):(t.removeEvents("click"),this.renderLinks())},_bindMailtoLinks:function(){var e=this._skinParts.link;e.addEvent("click",this._temporaryDisableNavigationWarning)},_temporaryDisableNavigationWarning:function(e){window.enableNavigationConfirmation=!1,setTimeout(function(){window.enableNavigationConfirmation=!0},50)},_bindPageLeaveWarningToLink:function(e){e.erase("href"),e.erase("target"),e.addEvent("click",function(e){e.preventDefault(),this._showNavigationDisabledTooltip()}.bind(this))},_showNavigationDisabledTooltip:function(){var e={component:this};this.injects().Commands.executeCommand("linkableComponent.navigateSameWindow",e,this)}})}),define.Class("wysiwyg.common.components.traits.SelectableOption",function(e){var t=e;t.statics({ITEM_SELECTED_EVENT:"itemSelected"}),t.fields({_isSelected:!1}),t.methods({initialize:function(e,t,n){this.parent(e,t,n),this.getViewNode().addEvent("click",function(){this.fireEvent(this.ITEM_SELECTED_EVENT,this)}.bind(this))},setSelected:function(e){this._isSelected=e}})}),define.oldClass({name:"wysiwyg.common.managers.LayoutManager",imports:["wysiwyg.common.managers.classdata.Anchor"],Class:{Extends:"bootstrap.managers.BaseManager",Binds:["_getAnchoredY","_getAnchoredH"],LOCK_THRESHOLD:70,DEFAULT_MARGIN:10,SUGGEST_ANCHOR_MARGIN:20,FLAG_DIRTY_TOP:1,FLAG_DIRTY_BOTTOM:2,initialize:function(){this._AnchorClass=this.imports.Anchor,this._isReady=!0,this._changedByHGroup=[],this._emptyArr=[]},setSavedAnchor:function(e){this._savedAnchors=e},attachSavedAnchors:function(e){for(var t in this._savedAnchors)if(this._savedAnchors[t]){var n=$(t);if(e&&!e.contains(n))continue;n&&n.getLogic&&n.getLogic().getAnchors().length===0&&this.attachSavedAnchorsToComponent(n.getLogic(),this._savedAnchors[t])&&delete this._savedAnchors[t]}},attachSavedAnchorsToComponent:function(e,t){var n=[],r=[],i;for(var s=0;s<t.length;s++)i=this.deserializeAnchor(t[s],e),i.type==i.ANCHOR_LOCK_BOTTOM?r.push(i):n.push(i);this._setComponentAnchors(e,n);if(r.length>0){var o=new this._AnchorClass;o.distance=0,o.originalValue=0,o.topToTop=0,o.type=o.ANCHOR_LOCK_BOTTOM,o.fromComp=e,o.toComp=e,r.unshift(o);for(s=0;s<r.length;s++)r[s].toComp.setHorizontalGroup(r)}},_setComponentAnchors:function(e,t){var n=e.getAnchors();e.setAnchors(t),this._notifyComponentAnchorsChanged(e,t,n)},_notifyComponentAnchorsChanged:function(e,t,n){var r=this.serializeAnchors(n),i=this.serializeAnchors(t);W.Utils.areObjectsEqual(r,i)||this.fireEvent("updateAnchors",{data:{changedComponentIds:[e.getComponentId()],oldAnchors:r,newAnchors:i,sender:"layoutmanager"}})},serializeAnchors:function(e){var t=[],n=this;return e.each(function(e){t.push(n.serializeAnchor(e))}),t},serializeAnchor:function(e){var t={};return t.type=e.type,t.targetComponent=e.toComp.getComponentId(),t.locked=e.locked,t.distance=e.distance,t.topToTop=e.topToTop,t.originalValue=e.originalValue,t},deserializeAnchors:function(e,t){var n=[],r=this;return e.each(function(e){n.push(r.deserializeAnchor(e,t))}),n},deserializeAnchor:function(e,t){var n=new this._AnchorClass;return n.distance=e.distance||0,n.topToTop=e.topToTop||0,n.originalValue=e.originalValue||0,n.type=e.type,n.toComp=$(e.targetComponent).getLogic(),n.fromComp=t,n.locked=e.locked||!1,n},reportResize:function(e){var t;if(!e||e.length===0)throw new Error("Invalid changed elements");this._updateAnchors(e[0],e,!1);for(t=0;t<e.length;t++)this._updateChildAnchors(e[t]);var n=this._getAndClearChangedByHGroup();for(t=0;t<n.length;t++)this._updateChildAnchors(n[t]),this._updateAnchors(n[0],[n[0]],!1);var r={type:"componentResize",data:{changedElements:e}};this._reportElementsSize(r.data.changedElements),this.fireEvent(r.type,r)},_reportElementsSize:function(e){var t=null;for(var n=0;n<e.length;n++)this.notifyPositionChanged(e[n],"updateSize")},reportMove:function(e){if(!e||e.length===0)throw new Error("Invalid changed elements");for(var t=0;t<e.length;t++)this.notifyPositionChanged(e[t],"updatePosition");this._updateAnchors(e[0],e,!1);var n=this._getAndClearChangedByHGroup();for(t=0;t<n.length;t++)this._updateAnchors(n[0],[n[0]],!1);var r={type:"componentMove",data:{changedElements:e}};this.fireEvent(r.type,r)},notifyPositionChanged:function(e,t){var n=e.getLastCoordinates(),r=e.getCurrentCoordinates(),i=e.getLastDimensions(),s=e.getCurrentDimensions(),o=[e.getComponentId()],u=o.map(function(e){return this.injects().Utils.getComponentLogicFromDom(e)}.bind(this)),a=this._getSiblingsYSortedArray(u[0]),f=a.map(function(e){return e.getComponentId()}.bind(this)),l={data:{changedComponentIds:o,ySortedElementIds:f,oldCoordinates:n,newCoordinates:r,oldDimensions:i,newDimensions:s}};(!W.Utils.areObjectsEqual(r,n)||!W.Utils.areObjectsEqual(s,i))&&this.fireEvent(t,l)},reportReparent:function(e,t,n,r){if(!e||e.length===0)throw new Error("Invalid changed elements");this._updateChildAnchors(t),this._updateAnchors(e[0],e,!1);var i=e[0].getParentComponent(),s=i.getChildComponents().map(function(e){return e.getLogic()}),o=e.map(function(e){return e.getComponentId()}),u=r?"showOnAllPagesChange":"scopeChangeWithinPage",a={type:"reparentComponent",data:{subType:u,changedComponentIds:o,oldState:{parentId:t._compId,children:n},newState:{parentId:i._compId,children:s}}};this.fireEvent(a.type,a),this.fireEvent("resetHistoryStack")},reportAddComponent:function(e){this._updateAnchors(e[0],e,!1);var t={type:"onAddComponent",data:e};this.fireEvent(t.type,t),this.fireEvent("resetHistoryStack")},reportDeleteComponent:function(e){this._updateChildAnchors(e),this.fireEvent("resetHistoryStack")},reportResizeStart:function(e){this._getAndClearChangedByHGroup();var t={type:"componentResizeStart",data:e};this.fireEvent(t.type,t)},deleteSavedAnchorsById:function(e){this._savedAnchors&&this._savedAnchors[e]&&delete this._savedAnchors[e]},getOptionalBottomLocks:function(e){var t=[],n=[],r,i=e.getViewNode().getParent().getChildren("[comp]"),s=e.getHorizontalGroup(),o,u;if(s){for(o=0,u=s.length;o<u;++o){var a=s[o];a.toComp!=e&&(t.push({locked:!0,target:a.toComp}),n.push(a.toComp))}r=s.slice(0)}for(o=0,u=i.length;o<u;++o){var f=i[o],l=f.getLogic&&f.getLogic();if(!l)continue;if(l!=e&&n.indexOf(l)===-1&&!this._isHorizontalOverlap(e,l)&&this._isVerticalOverlap(e,l)&&l.allowHeightLock())if(r){var c=new this._AnchorClass;c.fromComp=r[0].fromComp,c.toComp=l,r.push(c),this._isValidHGroup(r)&&t.push({locked:!1,target:l}),r.pop(c)}else t.push({locked:!1,target:l})}return t},toggleHGroup:function(e,t,n){var r=e.getHorizontalGroup(),i=t.getHorizontalGroup(),s,o;if(n){for(var u=0;u<r.length;u++)r[u].toComp===t&&(t.setHorizontalGroup(null),r.splice(u,1));if(r.length===1){e.setHorizontalGroup(null);return}s=r}else r&&i?(r.combine(i),s=r):i?(o=new this._AnchorClass,o.type=o.ANCHOR_LOCK_BOTTOM,o.fromComp=i[0].fromComp,o.toComp=e,i.push(o),s=i):r?(o=new this._AnchorClass,o.type=o.ANCHOR_LOCK_BOTTOM,o.fromComp=r[0].fromComp,o.toComp=t,r.push(o),s=r):(s=[],o=new this._AnchorClass,o.type=o.ANCHOR_LOCK_BOTTOM,o.fromComp=e,o.toComp=e,s.push(o),o=new this._AnchorClass,o.type=o.ANCHOR_LOCK_BOTTOM,o.fromComp=e,o.toComp=t,s.push(o));this._updateHGroup(s)},_updateHGroup:function(e){for(var t=0;t<e.length;t++){var n=e[t];n.toComp.setHorizontalGroup(e),n.fromComp=e[0].fromComp,n.distance=this._getBottomDiff(n.fromComp,n.toComp),n.topToTop=n.toComp.getY()-n.fromComp.getY()}},_clearHGroup:function(e){for(var t=0;t<e.length;t++)e[t].toComp.setHorizontalGroup(null)},_isValidHGroup:function(e){var t;for(t=0;t<e.length;t++)if(e[t].toComp.getIsDisposed()||!e[t].toComp.allowHeightLock())return!1;var n=e.slice();n.sort(function(e,t){var n=e.toComp.getX(),r=t.toComp.getX();return n===r?0:n>r?1:-1});for(t=0;t<n.length-1;t++)if(n[t].toComp.getX()+n[t].toComp.getWidth()>=n[t+1].toComp.getX())return!1;var r=e[0].toComp.getViewNode().getParent(),i=Number.MAX_VALUE,s=-Number.MAX_VALUE;for(t=0;t<e.length;t++){if(e[t].toComp.getIsDisposed())return!1;if(e[t].toComp.getViewNode().getParent()!=r)return!1;var o=e[t].toComp.getY(),u=e[t].toComp.getPhysicalHeight()+o;i=Math.min(u,i),s=Math.max(o,s)}return s<i},_getBottomDiff:function(e,t){return t.getY()+t.getPhysicalHeight()-e.getY()-e.getPhysicalHeight()},_validateCommonParent:function(e,t){if(e.length===0)return;var n;t?n=t.getViewNode().getParent():n=e[0].getViewNode().getParent();var r=function(e){return n!==e.getViewNode().getParent()};if(e.some(r))throw new Error("Invalid elements scope")},_getSiblingsYSortedArray:function(e){var t=e.getViewNode().getParent().getChildren("[comp]");return t.some(function(e){return!e.getLogic})?[]:t.sort(function(e,t){var n=e.getLogic().getY(),r=t.getLogic().getY();return n===r?0:n>r?1:-1}).map(function(e){return e.getLogic()})},_isHorizontalOverlap:function(e,t){var n=e.getX(),r=n+e.getWidth(),i=t.getX(),s=i+t.getWidth();return!(n>s||i>r)},_isVerticalOverlap:function(e,t){var n=e.getY(),r=n+e.getPhysicalHeight(),i=t.getY(),s=i+t.getPhysicalHeight();return!(n>s||i>r)},_clearReverseAnchorsByScope:function(e,t){for(var n=e.length-1;n>-1;n--){var r=e[n];t?r.type==r.ANCHOR_BOTTOM_PARENT&&e.splice(n,1):r.type!=r.ANCHOR_BOTTOM_PARENT&&e.splice(n,1)}},_updateAnchors:function(e,t,n){this._validateCommonParent(t,e);var r=this._getSiblingsYSortedArray(e),i=[],s=[],o,u,a,f=r.length,l=null;for(a=0;a<r.length;a++)i[a]={},this._clearReverseAnchorsByScope(r[a].getReverseAnchors(),!1),r[a].getHorizontalGroup()&&(r[a].getHorizontalGroup().$hGroupDirty=!0);var c=e.getParentComponent();c&&this._clearReverseAnchorsByScope(c.getReverseAnchors(),!0);for(o=f-1;o>=0;o--){var h=r[o];this._updateOrClearHGroup(h.getHorizontalGroup()),s[o]=h.getAnchors();var p=[],d=!1;if(h.isAnchorable().from.allow){for(u=o+1;u<f;u++){var v=r[u];if(!v.isAnchorable()||!v.isAnchorable().to.allow)continue;l=null,!i[o][u]&&this._isHorizontalOverlap(h,v)&&(t.indexOf(h)===-1&&t.indexOf(v)===-1&&(l=this._findAnchorToComp(s[o],v)),l=l||this._createToTopAnchor(h,v),i[o][u]=!0,l.type==l.ANCHOR_BOTTOM_TOP&&(d=!0,this._mergeSets(i[o],i[u])),l.type==l.ANCHOR_TOP_TOP&&h.isAnchorable().to.allow&&h.isAnchorable().to.allowBottomBottom!==!1&&this._checkAndAddBottomAnchor(v,h),p.push(l))}d||c&&c.isAnchorable().to.allow&&(l=null,t.indexOf(h)===-1&&!n&&(l=this._findAnchorToComp(s[o],c)),l||(l=this._createToParentAnchor(h,c)),p.push(l))}this._setComponentAnchors(h,p)}},_updateOrClearHGroup:function(e){e&&e.$hGroupDirty&&(delete e.$hGroupDirty,this._isValidHGroup(e)?this._updateHGroup(e):this._clearHGroup(e))},_setAnchorableIsLocked:function(e){var t=e.fromComp,n=e.toComp;t.isAnchorable().from.lock==Constants.BaseComponent.AnchorLock.NEVER||n.isAnchorable().to.lock==Constants.BaseComponent.AnchorLock.NEVER?e.locked=!1:t.isAnchorable().from.lock==Constants.BaseComponent.AnchorLock.ALWAYS||n.isAnchorable().to.lock==Constants.BaseComponent.AnchorLock.ALWAYS?e.locked=!0:e.locked=e.distance<=this.LOCK_THRESHOLD},_setAnchorableDistance:function(e,t){var n=e.fromComp,r=e.toComp;n.isAnchorable().from.distance!==undefined?t=n.isAnchorable().from.distance:r.isAnchorable().to.distance!==undefined&&(t=r.isAnchorable().to.distance),e.distance=t},_createToParentAnchor:function(e,t){var n=e.getY(),r=e.getPhysicalHeight(),i=t.getInlineContentContainer().getSize().y,s=new this._AnchorClass;return s.type=s.ANCHOR_BOTTOM_PARENT,s.fromComp=e,s.toComp=t,this._setAnchorableDistance(s,i-n-r),this._setAnchorableIsLocked(s),s.topToTop=n,s.originalValue=i,s},_createToTopAnchor:function(e,t){var n=e.getY(),r=t.getY(),i=e.getPhysicalHeight(),s=t.getPhysicalHeight(),o=new this._AnchorClass;return o.fromComp=e,o.toComp=t,r+s>n+i&&r>n+i/2?(o.type=o.ANCHOR_BOTTOM_TOP,this._setAnchorableDistance(o,r-n-i)):(o.type=o.ANCHOR_TOP_TOP,this._setAnchorableDistance(o,r-n)),this._setAnchorableIsLocked(o),o.topToTop=r-n,o.originalValue=r,o},_checkAndAddBottomAnchor:function(e,t){var n=t.getY(),r=e.getY(),i=t.getPhysicalHeight(),s=e.getPhysicalHeight();if(r+s<n+i){var o=new this._AnchorClass;o.type=o.ANCHOR_BOTTOM_BOTTOM,o.fromComp=e,o.toComp=t,this._setAnchorableDistance(o,n+i-r-s),o.locked=o.distance<=this.LOCK_THRESHOLD,o.topToTop=r-n,o.originalValue=i;var u=[];u=u.concat(e.getAnchors()),e.addAnchor(o),this._notifyComponentAnchorsChanged(e,e.getAnchors(),u)}},_getAnchoredY:function(e){switch(e.type){case e.ANCHOR_BOTTOM_TOP:var t=e.fromComp.getPhysicalHeight(),n=e.fromComp.getY()+t;return e.locked?n+=e.distance:n+=this.DEFAULT_MARGIN,Math.max(n,e.fromComp.getY()+t/2);case e.ANCHOR_TOP_TOP:return e.fromComp.getY()+e.distance}},_getAnchoredH:function(e){var t=e.fromComp.getPhysicalHeight(),n=e.fromComp.getY()+t;if(e.locked)n+=e.distance;else if(!this._isPageAutoShrink()||!W.Viewer.isPageComponent(e.toComp.getOriginalClassName()))n+=this.DEFAULT_MARGIN;return e.type==e.ANCHOR_BOTTOM_BOTTOM?n-=e.toComp.getY():e.type==e.ANCHOR_BOTTOM_PARENT&&e.toComp.getInlineContentContainer&&(n=n-e.toComp.getInlineContentContainer().getSize().y+e.toComp.getPhysicalHeight()),n},enforceAnchors:function(e,t,n,r){if(e.length===0||e[0].getViewNode().getParent()===null)return;this._validateCommonParent(e);var i=e[0].getParentComponent();r=r||this._getSiblingsYSortedArray(e[0]);var s;if(r.length===0||!this._validateComponentsRendered(r)){for(s=0;s<e.length;s++)delete e[s].$layoutDirtyFlag;return}for(s=0;s<e.length;s++)t?e[s].$layoutDirtyFlag=this.FLAG_DIRTY_TOP:e[s].$layoutDirtyFlag=this.FLAG_DIRTY_BOTTOM;var o=[];for(s=0;s<r.length;s++){o[s]||(o[s]=0),o[s]++;if(o[s]>20){W.Utils.debugTrace("Layout Manager","enforceAnchors","infinite loop"),this._enforceParentIfNeeded(i);return}r[s].$tempIndex=s;if(r[s].$layoutDirtyFlag){var u=Number.MAX_VALUE,a=r[s];for(var f=0;f<a.getAnchors().length;f++)u=Math.min(this._enforceSingleAnchor(a.getAnchors()[f],n),u);a.getHorizontalGroup()&&(u=Math.min(this._enforceHGroup(a),u)),delete a.$layoutDirtyFlag,u<s&&(s=u-1)}}for(s=0;s<r.length;s++)delete r[s].$tempIndex,delete r[s].$layoutDirtyFlag;this._enforceParentIfNeeded(i)},_enforceParentIfNeeded:function(e){e&&e.$layoutDirtyFlag===this.FLAG_DIRTY_BOTTOM&&this.enforceAnchors([e])},_validateComponentsRendered:function(e){for(var t=0;t<e.length;t++)if(e[t].getPhysicalHeight()===0)return!1;return!0},_validateNodesRendered:function(e){var t=[];for(var n=0;n<e.length;n++){if(!e[n].getLogic)return!1;t.push(e[n].getLogic())}return this._validateComponentsRendered(t)},_validateAnchorTargetsRendered:function(e){for(var t=0;t<e.length;t++)if(!e[t].toComp.isRendered())return!1;return!0},_getContainerContentHeight:function(e){var t=0,n=e.getChildComponents(),r=0;for(var i=0;i<n.length;i++)n[i]&&n[i].getLogic&&(r=this._getCompBottom(n[i].getLogic())),t=Math.max(r,t);return t},_getCompBottom:function(e){var t=e.getY(),n=e.getPhysicalHeight();return Math.max(t+n,0)},_getComponentContentHeight:function(e){var t=0;return e.getChildComponents&&this._validateNodesRendered(e.getChildComponents())?t=this._getContainerContentHeight(e):t=e.getMinPhysicalHeight(),t},getComponentMinResizeHeight:function(e){if(e.getHorizontalGroup()){var t=this._findAnchorToComp(e.getHorizontalGroup(),e);return this.getHGroupMinBottom(e.getHorizontalGroup())-e.getY()+t.distance}if(e.getChildComponents){var n=this._getContainerContentHeight(e);return e.getInlineContentContainer&&(n=n+e.getPhysicalHeight()-e.getInlineContentContainer().getSize().y),n}return 0},getComponentMinDragY:function(e,t){t||(t=this._emptyArr);var n=0;for(var r=0;r<e.getReverseAnchors().length;r++){var i=e.getReverseAnchors()[r];if(t.contains(i.fromComp))continue;if(i.type==i.ANCHOR_BOTTOM_TOP){var s=this._getCompBottom(i.fromComp);n=Math.max(s,n)}else i.type==i.ANCHOR_TOP_TOP&&(n=Math.max(i.fromComp.getY(),n))}return n},getHGroupMinBottom:function(e){if(e.length<2)return 0;var t=-Number.MAX_VALUE;for(var n=0;n<e.length;n++){var r=e[n];t=Math.max(this._getComponentContentHeight(r.toComp)-r.distance+r.toComp.getY(),t)}return t},getHGroupMinY:function(e){if(e.length<2)return 0;var t=-Number.MAX_VALUE;for(var n=0;n<e.length;n++){var r=e[n];t=Math.max(this.getComponentMinDragY(r.toComp)-r.topToTop,t)}return t},_enforceHGroup:function(e){var t=Number.MAX_VALUE,n=e.getHorizontalGroup(),r=this._findAnchorToComp(n,e),i,s;if(!r)return Number.MAX_VALUE;if(e.$layoutDirtyFlag==this.FLAG_DIRTY_TOP){var o=this.getHGroupMinY(e.getHorizontalGroup()),u=Math.max(o,r.toComp.getY()-r.topToTop);t=Math.min(this._setHGroupPartY(r.fromComp,u),t);for(s=0;s<e.getHorizontalGroup().length;s++){i=e.getHorizontalGroup()[s];var a=i.fromComp.getY()+i.topToTop;t=Math.min(this._setHGroupPartY(i.toComp,a),t)}}var f=this.getHGroupMinBottom(e.getHorizontalGroup()),l=Math.max(f-r.fromComp.getY(),r.toComp.getY()+r.toComp.getPhysicalHeight()-r.distance-r.fromComp.getY());t=Math.min(this._setHGroupPartHeight(r.fromComp,l),t);for(s=0;s<e.getHorizontalGroup().length;s++){i=e.getHorizontalGroup()[s];var c=i.fromComp.getY()+i.fromComp.getPhysicalHeight()+i.distance-i.toComp.getY();t=Math.min(this._setHGroupPartHeight(i.toComp,c),t)}return t},_setHGroupPartHeight:function(e,t){var n=e.getPhysicalHeight();if(n!=t){t=t-e.getExtraPixels().bottom-e.getExtraPixels().top,e.setHeight(t),e.$layoutDirtyFlag=this.FLAG_DIRTY_BOTTOM,this._changedByHGroup.include(e);if(e.$tempIndex!==undefined)return e.$tempIndex}return Number.MAX_VALUE},_setHGroupPartY:function(e,t){var n=e.getY();if(n!=t){e.setY(t),e.$layoutDirtyFlag=this.FLAG_DIRTY_TOP,this._changedByHGroup.include(e);if(e.$tempIndex!==undefined)return e.$tempIndex}return Number.MAX_VALUE},_updateChildAnchors:function(e){if(e&&e.getChildComponents){var t=e.getChildComponents();if(!this._validateNodesRendered(t))return;t.length>0?this._updateAnchors(t[0].getLogic(),[],!0):this._clearReverseAnchorsByScope(e.getReverseAnchors(),!0)}},_getAndClearChangedByHGroup:function(){var e=this._changedByHGroup;return this._changedByHGroup=[],e},_enforceSingleAnchor:function(e,t){return e.type==e.ANCHOR_TOP_TOP&&e.fromComp.$layoutDirtyFlag===this.FLAG_DIRTY_BOTTOM?Number.MAX_VALUE:e.type==e.ANCHOR_BOTTOM_PARENT||e.type==e.ANCHOR_BOTTOM_BOTTOM?this._enforceFromBottomTypeAnchor(e):this._enforceToTopTypeAnchor(e,t)},_enforceToTopTypeAnchor:function(e,t){var n=e.toComp,r=this._getAnchoredY(e),i=n.getY(),s=-Number.MAX_VALUE;return e.type==e.ANCHOR_BOTTOM_TOP&&!e.locked&&(s=e.originalValue),t||n.setY(n.getY()<r?r:this._getMaxAnchoredY(n,s)),i!==n.getY()&&(n.$layoutDirtyFlag=this.FLAG_DIRTY_TOP),Number.MAX_VALUE},_enforceFromBottomTypeAnchor:function(e){var t=e.toComp,n=t.getPhysicalHeight(),r=this._getAnchoredH(e),i=r;e.toComp.layoutMinHeight?i=e.toComp.layoutMinHeight():!e.locked&&(!this._isPageAutoShrink()||!W.Viewer.isPageComponent(t.getOriginalClassName()))&&(i=e.originalValue),t.setHeight(n<r?r:this._getMaxAnchoredH(t,i));if(n!==t.getHeight()){t.$layoutDirtyFlag=this.FLAG_DIRTY_BOTTOM;if(e.type==e.ANCHOR_BOTTOM_BOTTOM)return t.$tempIndex}return Number.MAX_VALUE},_getMaxAnchoredH:function(e,t){t||(t=-Number.MAX_VALUE);var n=this._getAnchoredH,r=t;return e.getReverseAnchors().forEach(function(t){if(t.type!=t.ANCHOR_BOTTOM_PARENT&&t.type!=t.ANCHOR_BOTTOM_BOTTOM)return;var i=n(t);!t.locked&&(!this._isPageAutoShrink()||!W.Viewer.isPageComponent(e.getOriginalClassName()))&&(i=Math.max(i,t.originalValue)),r=Math.max(i,r)}.bind(this)),r},_getMaxAnchoredY:function(e,t){var n=this._getAnchoredY,r=t;return e.getReverseAnchors().forEach(function(e){if(e.type!=e.ANCHOR_BOTTOM_TOP&&e.type!=e.ANCHOR_TOP_TOP)return;var t=n(e);r=Math.max(t,r)}),r},_findAnchorToComp:function(e,t){for(var n=0;n<e.length;n++)if(e[n].toComp===t)return e[n]},_mergeSets:function(e,t){for(var n in t)e[n]=!0},isReady:function(){return this._isReady},clone:function(e){return this.parent(e)},_getRenderModifiers:function(){var e=W.Viewer._siteStructureData;return e?e.get("renderModifiers")||{}:{}},_isPageAutoShrink:function(){var e=this._getRenderModifiers();return typeof e.pageAutoShrink!="undefined"?e.pageAutoShrink:!0},appendSavedAnchor:function(e){this._savedAnchors?Object.append(this._savedAnchors,e):this.setSavedAnchor(e)}}}),define.oldClass({name:"wysiwyg.managers.WCookiesManager",Class:{Extends:"bootstrap.managers.BaseManager",_initializeExtra:function(){},setCookieParam:function(e,t){var n,r=this.getCookie(e);if(r){if(this.getCookieParams(e).indexOf(t)>=0)return;n=e+"="+r+","+t}else n=e+"="+t;var i=this.writeCookie(n);return i},getCookieParams:function(e){var t=e+"=",n=document.cookie.split(";");for(var r=0;r<n.length;r++){var i=n[r];while(i.charAt(0)==" ")i=i.substring(1,i.length);if(i.indexOf(t)===0){var s=i.substring(t.length,i.length);return s.split(",")}}return[]},removeCookieParam:function(e,t){var n=this.getCookieParams(e);if(n.length===0||n.length===undefined)return;var r=n.indexOf(t);if(r<0)return;n.splice(r,1);var i=e+"="+n.toString();return this.writeCookie(i)},removeCookie:function(e){this.writeCookie(e+"=")},writeCookie:function(e,t,n,r){var i;if(t)i=new Date((new Date).getTime()+t);else{var s=new Date;s.setYear((new Date).getFullYear()+1),i=s}return e+=";expires="+i.toGMTString(),e+=";path="+(r||"/"),n&&(e+=";domain="+n),document.cookie=e,e},getCookie:function(e){if(document.cookie){var t=document.cookie.split(/;\s*/);for(var n=0,r=t.length;n<r;n++){var i=t[n],s=e+"=";if(i.indexOf(s)===0)return i.substring(s.length,i.length)}}return!1},isReady:function(){return!0},clone:function(e){return this.parent(e)}}}),define.oldClass({name:"wysiwyg.common.managers.WViewManager",imports:["wysiwyg.managers.appdata.AppDataHandler"],Class:{Binds:["_fireScreenResizeEvent","_onSiteReady","_onPageNavigation","_setDocumentTitle","_notifySiteReadyForThumbnail"],Extends:"core.managers.viewmanager.ViewManagerBase",Resources:["W.Utils","W.TPA","W.Commands"],Static:{SCREEN_RESIZE_EVENT:"ScreenResize"},initialize:function(){this.parent(),this._isPageScrollToTopEnabled=!1,this.initScreenResizeEventPropagation(),this._registerCommands(),this.addHeightChangeCallback(function(){return W.Layout.getComponentMinResizeHeight(this.getSiteNode().getLogic())}.bind(this))},setSite:function(e,t,n){this.parent(e,t,n);var r=this._siteNode.getElement("#SITE_PAGES");r&&r.getProperty("comp")&&(this._pageGroupComp=r,this._pageGroupComp.addEvent("pageTransitionEnded",this._onPageNavigation));var i=$(document.body);this.getPreviewMode()?i.setStyle("overflow","hidden"):(i.setStyle("overflow-y","scroll"),i.setStyle("overflow-x","auto"))},setAdData:function(e){this._adData=e},getAdData:function(){return this._adData},_onPageNavigation:function(e){this._setDocumentTitle(e),this.resources.W.Commands.executeCommand("WViewerCommands.MediaZoom.Close"),this.fireEvent("pageTransitionEnded",e)},getSiteTitleSEO:function(){return window.rendererModel.siteTitleSEO},isPremiumUser:function(){var e=window.rendererModel;return!e||!e.premiumFeatures?!1:e.premiumFeatures.length>0},_setDocumentTitle:function(e){var t="",n=W.Viewer.getPagesData()[e],r=n.get("pageTitleSEO")||"",i=n.get("title")||"",s=W.Viewer.getSiteTitleSEO()||"",o=W.Viewer.isHomePage(e);r?t=r:(t=s,o||(t+=t?" | ":"",t+=i)),W.Viewer.isPremiumUser()||(t+=t?" | ":"",t+="Wix.com"),t&&(document.title=t)},_pageTransition:function(e){this._currentPageId=e,this._pageGroupComp?this._pageGroupComp.getLogic().gotoPage(e):this.parent(e)},getDocWidth:function(){var e;switch(window.rendererModel.applicationType){case"HtmlFacebook":e="520";break;case"HtmlWeb":e="980";break;default:e=980}return e},initScreenResizeEventPropagation:function(){$(window).addEvent("resize",this._fireScreenResizeEvent)},indexPages:function(e){var t=this._siteNode.getElement(e);if(!t)return this.resources.W.Utils.callLater(this.indexPages,[e],this,10);var n={},r=[];this._getPageElements(t).each(function(e){var t=e.get("id")||this.resources.W.Utils.getUniqueId("page");n[t]=e,e.addClass("sitePage");var i=e.get("dataQuery");r.push(i)}.bind(this)),r=this._fixPagesOrderByNewMenuData(r);var i=this._siteStructureData.getData().pages;i=i||[];var s;for(s=0;s<i.length;++s){var o=i[s],u=r.indexOf(o);u!=-1&&(r.splice(u,1),r.splice(s,0,o))}var a=W.Data.isDataChange();this._siteStructureData.set("pages",r),(this._siteStructureData.get("mainPage")===undefined||this._siteStructureData.get("mainPage")==="")&&this._siteStructureData.set("mainPage",r[0]),a&&W.Data.flagDataChange(),this._pages=n},_getPageElements:function(e){var t="[comp=mobile.core.components.Page],[comp=core.components.Page]";return e.getElements(t)},isPageComponent:function(e){return e==="mobile.core.components.Page"||e==="core.components.Page"},getPages:function(){return this._pages},getLinkablePagesData:function(){return this._pagesData},_fixPagesOrderByNewMenuData:function(e){if(W.Data.isDataAvailable("#MAIN_MENU")){var t=W.Data.getDataByQuery("#MAIN_MENU"),n=t.getAllItems(),r=n.length,i;for(i=0;i<r;i++){var s=n[i],o=s.get("refId"),u=$$("[dataquery="+o+"]");u.length===0&&t.deleteNavigationItem(o)}n=t.getAllItems(),e=n.map(function(e){return e.get("refId")})}return e},_fireScreenResizeEvent:function(){this.fireEvent(this.SCREEN_RESIZE_EVENT)},_onSiteReady:function(){this.parent(),W.Layout.attachSavedAnchors(),this._fireScreenResizeEvent(),this.getSiteNode()&&this.getSiteNode().getLogic&&this.siteHeightChanged(),this.resources.W.Utils.callLater(this._notifySiteReadyForThumbnail)},_notifySiteReadyForThumbnail:function(){this.resources.W.Utils.getQueryParam("siteReadyAlert")==="true";var e=this.resources.W.Utils.getQueryParam("siteReadyPost");if(e){var t=new Request.JSON({url:e});t.post({siteReady:!0})}},getSiteHeight:function(){return this._siteHeight},setAdHeight:function(e){this._adHeight=e},addHeightChangeCallback:function(e){this._heightChangeCallbacks=this._heightChangeCallbacks||[],this._heightChangeCallbacks.push(e)},_getHeightFromCallback:function(){if(!this._heightChangeCallbacks)return 0;var e=0,t;for(t=0;t<this._heightChangeCallbacks.length;t++)e+=this._heightChangeCallbacks[t]();return e},siteHeightChanged:function(e){this.getSiteNode().getLogic().flushPhysicalHeightCache(),this._siteHeight=this._getHeightFromCallback(),this.fireEvent("resize",this._siteHeight),e||this.getSiteNode().getLogic().setHeight(this._siteHeight),this._postHeightMessage()},_postHeightMessage:function(){var e=parent.postMessage?parent:parent.document.postMessage?parent.document:undefined;e&&typeof e!="undefined"&&e.postMessage(this._siteHeight,"*")},addOrientationEvent:function(e){},_getAllComponentsButPageContents:function(e){var t=e.getElements("[comp]");return e.get("comp")&&t.push(e),t.filter(function(e,t,n){return this._getComponentParent(e)==null}.bind(this))},getPageGroup:function(){return this._siteNode.getElement("#SITE_PAGES").getLogic()},_getComponentParent:function(e){var t="[comp=mobile.core.components.Page],[comp=core.components.Page]";return e.getParent(t)},_registerCommands:function(){var e=this.resources.W.Commands;e.registerCommandAndListener("WViewerCommands.AdminLogin.Open",this,this._openAdminLogin),e.registerCommandAndListener("WViewerCommands.AdminLogin.Close",this,this._closeAdminLogin),e.registerCommandListenerByName("WPreviewCommands.WEditModeChanged",this,this._onEditModeChanged),e.registerCommandAndListener("WViewerCommands.OpenZoom",this,this.setZoomData),e.registerCommandAndListener("WViewerCommands.SiteMembers.Open",this,this._openSiteMembersPopup),e.registerCommandAndListener("WViewerCommands.SiteMembers.Close",this,this._closeSiteMembersPopup),e.registerCommandAndListener("WViewerCommands.PasswordLogin.Open",this,this._openPasswordLogin),e.registerCommandAndListener("WViewerCommands.PasswordLogin.Close",this,this._closePasswordLogin)},_openAdminLogin:function(e){e||(e={}),e.clazz="wysiwyg.viewer.components.AdminLogin",e.dataItem=W.Data.createDataItem({type:"Text"}),this._openPasswordLogin(e)},_closeAdminLogin:function(){this._closePasswordLogin()},removeMediaZoom:function(){this._mediaZoom&&(this._mediaZoom.removeFromDOM(),delete this._mediaZoom)},_setMediaZoomDataInner:function(e){e.mediaList?this._mediaZoom.getLogic().setGallery(e.mediaList,e.currentIndex):e.imageData&&this._mediaZoom.getLogic().setImage(e.imageData)},enterFullScreenMode:function(){if(!this._isFullScreen){var e=this.getPreviewMode()?$(window.parent.document.body):$(document.body);this._originalBodyOverflow=e.getStyle("overflow"),e.setStyle("overflow","hidden"),this._isFullScreen=!0}},exitFullScreenMode:function(){if(this._isFullScreen){this._currentPageId?this._setUrlHashToPage(this._currentPageId):this.goToHomePage();var e=this.getPreviewMode()?$(window.parent.document.body):$(document.body);e.setStyle("overflow",this._originalBodyOverflow),this._isFullScreen=!1}},_onHashChange:function(e){e=e||{};if(this.isSiteReady()){var t=e.newHash;t!="zoom"&&!W.Data.isDataAvailable("#"+t)?this._changePageFromHash(t):this._handleValidHashChange(e)}},_onHashDataItemIdChange:function(e,t){var n=t.getType&&t.getType();if(this._isPageDataType(n)&&e){this._changePageFromHash(e);return}n==="Image"?this.resources.W.Commands.executeCommand("WViewerCommands.OpenZoom",{item:"#"+t.get("id"),getDisplayerDivFunction:this.getDefaultGetZoomDisplayerFunction("Image")},this):n=="PermaLink"&&t.get("appType")=="ListsApps"&&W.Apps.openPermaLink(t)},_isPageDataType:function(e){return e==="Page"},_onPageExtraDataChange:function(e,t,n){var r=this._getPageDataFromHash(t);this.resources.W.TPA.setPageState(t,e);if(n)return;var i=r.get("tpaApplicationId"),s=this.resources.W.TPA.getComponentRegistrar().getSection(i);s&&s._updateIframe(!0)},_setUrlHashToPage:function(e){var t=this._pagesData[e];if(t){var n=this.resources.W.TPA.getPageState(e);this.resources.W.Utils.hash.setHash(e,t.get("pageUriSEO"),n)}},getAppDataHandler:function(){return this._appDataHandler||(this._appDataHandler=new this.imports.AppDataHandler),this._appDataHandler},_handleValidHashChange:function(e){var t=e.newHash,n=e.extData,r=e.isIdChanged,i=e.isExtDataChanged,s=e.silent,o=this._zoomComp&&this._zoomComp.getLogic&&this._zoomComp.getLogic().isZoomOpened();r&&!s&&t&&(t=="zoom"&&(t=n.split("/")[1]),W.Data.getDataByQuery("#"+t,function(e){this._onHashDataItemIdChange(t,e)}.bind(this)),e.isForSureAfterChange&&LOG.reportPageEvent(window.location.href)),i&&(o?this._zoomComp.getLogic().showZoomImage():this._onPageExtraDataChange(n,t,s))},getDefaultGetZoomDisplayerFunction:function(e){if(e=="Image")return function(e,t,n){var r=this._getZoomDisplayerCompSettings();this.injects().Components.createComponent(r.comp,r.skin,e,{maxWidth:t.x,maxHeight:t.y},null,function(e){n(e.getViewNode())})}.bind(this)},_getZoomDisplayerCompSettings:function(){return{comp:"wysiwyg.viewer.components.MediaZoomDisplayer",skin:"wysiwyg.viewer.skins.displayers.MediaZoomDisplayerSkin"}},getDefaultGetHashPartsFunction:function(e){if(e=="Image")return function(e,t){W.Data.getDataItem(e,function(e){t({id:"zoom",title:e.get("title"),extData:this.getCurrentPageId()+"/"+e.get("id")})}.bind(this))}.bind(this)},setZoomData:function(e){this._initZoomIfNeeded(function(){this._setZoomDataInner(e)}.bind(this))},removeZoomElement:function(){this._zoomComp&&(this._zoomComp.removeFromDOM(),delete this._zoomComp)},_setZoomDataInner:function(e){e.itemsList?this._zoomComp.getLogic().setGallery(e.itemsList,e.currentIndex,e.getDisplayerDivFunction,e.getHashPartsFunction,e.extraParams):e.item&&this._zoomComp.getLogic().setImage(e.item,e.getDisplayerDivFunction,e.getHashPartsFunction)},_initZoomIfNeeded:function(e){if(!this._zoomComp){var t=this._getZoomCompSettings();this._zoomComp=W.Components.createComponent(t.comp,t.skin,null,null,function(e){e.getViewNode().insertInto(this._siteNode)}.bind(this),e)}else e&&e()},_getZoomCompSettings:function(){return{comp:"wysiwyg.viewer.components.MediaZoom",skin:"wysiwyg.viewer.skins.MediaZoomSkin"}},_openSiteMembersPopup:function(e){this.injects().SiteMembers.openSiteMembersPopup(e)},_closeSiteMembersPopup:function(){this.injects().SiteMembers.closeSiteMembersPopup()},_openPasswordLogin:function(e){if(!this._passwordLogin){var t=e&&e.args,n=e&&e.clazz||"wysiwyg.viewer.components.PasswordLogin",r=e&&e.dataItem||null;W.Components.createComponent(n,"wysiwyg.viewer.skins.PasswordLoginSkin",r,t,function(){},function(e){this._passwordLogin=e;var t=e.getViewNode();t.setStyle("opacity","0"),e.getViewNode().insertInto(this._siteNode),e.centerDialog();var n=(new Fx.Tween(t,{duration:"short",link:"ignore"})).start("opacity","1.0")}.bind(this))}},_closePasswordLogin:function(){if(this._passwordLogin){var e=this._passwordLogin.getViewNode(),t=new Fx.Tween(e,{duration:"short",link:"ignore"}),n=function(){t.removeEvent("complete",n),e.removeFromDOM(),delete this._passwordLogin}.bind(this);t.addEvent("complete",n),t.start("opacity","0.0")}},_changePageFromHash:function(e){var t=this._getPageDataFromHash(e);if(t===null)return;var n=t.get("id");if(n==this._currentPageId)return;this._checkRequireLogin(t,function(){n&&this._pageTransition(n)}.bind(this))},goToPage:function(e,t){if(t){this.parent(e);return}var n=this._pagesData[e];this._checkRequireLogin(n,function(){this.goToPage(e,!0)}.bind(this))},getPageData:function(e){return this._pagesData[e]},getSiteName:function(){return window.rendererModel.siteName||""},_checkRequireLogin:function(e,t){var n=this.isPublicMode()||this.getEditorMode()=="PREVIEW",r=e.get("pageSecurity"),i=e.get("id"),s=this._getFallbackPage(i),o=!s;if(n&&r.requireLogin&&!this.injects().SiteMembers.isLoggedIn()&&!this._isProtectedPageValidated(i)){var u="",a=e.get("pageUriSEO"),f=this.resources.W.Utils.hash.getHashPartsString(i,a,u);this.injects().SiteMembers.openSiteMembersPopup({disableCancel:o,hashRedirectTo:"#"+f,openedByPageSecurity:!0,authCallback:function(e){this._onAuthCallback(e,i,s,t)}.bind(this)})}else n&&r.passwordDigest&&!this._isProtectedPageValidated(i)?this.resources.W.Commands.executeCommand("WViewerCommands.PasswordLogin.Open",{args:{digestedPassword:r.passwordDigest,disableCancel:o,authCallback:function(e){this._onAuthCallback(e,i,s,t)}.bind(this)}}):t()},_onAuthCallback:function(e,t,n,r){e.authResponse?(this._setPageValidated(t),r()):e.data&&e.data.cancel&&(n?location.hash=n:location.reload())},_getFallbackPage:function(e){var t=this.injects().Viewer.getCurrentPageId(),n=!!t,r=W.Data.getDataMap().SITE_STRUCTURE.get("mainPage");return r=r?r.replace("#",""):"",n?t:e!=r?r:null},_setPageValidated:function(e){this._validatedPages||(this._validatedPages={}),this._validatedPages[e]=!0},setPageAsNotValidated:function(e){this._validatedPages||(this._validatedPages={}),this._validatedPages[e]=!1},_isProtectedPageValidated:function(e){return this._validatedPages&&this._validatedPages[e]},clone:function(e){return this.parent(e)}}}),define.oldClass({name:"wysiwyg.managers.appdata.AppDataHandler",Class:{getAppsData:function(){return window.rendererModel||(window.rendererModel={}),window.rendererModel.clientSpecMap||(window.rendererModel.clientSpecMap={}),window.rendererModel.clientSpecMap},registerAppData:function(e){this.getAppsData()[e.applicationId]=e},getAppData:function(e){return this.getAppsData()[e]||{}},getAppDataByAppDefinitionId:function(e){var t=this.getAppsData(),n={};return Object.filter(t,function(t,r,i){if(t.appDefinitionId===e)return n=t,!0}),n},getWidgetData:function(e,t){var n=this.getAppData(e).widgets||{};return n[t]||{}},getSiteMembersData:function(){var e=Object.filter(this.getAppsData(),function(e){return e&&e.type&&e.type.toLowerCase()=="sitemembers"}),t=Object.values(e);return t&&t.length>0?t[0]:null},getWidgetProperty:function(e,t,n){return this.getWidgetData(e,t)[n]},getLargestApplicationId:function(){var e=this.getAppsData(),t=0;for(var n in e)e.hasOwnProperty(n)&&(n=parseInt(n,10),t<n&&(t=n));return t}}}),define.oldClass({name:"wysiwyg.common.managers.classdata.Anchor",Class:{ANCHOR_TOP_TOP:"TOP_TOP",ANCHOR_BOTTOM_TOP:"BOTTOM_TOP",ANCHOR_BOTTOM_BOTTOM:"BOTTOM_BOTTOM",ANCHOR_BOTTOM_PARENT:"BOTTOM_PARENT",ANCHOR_LOCK_BOTTOM:"LOCK_BOTTOM",type:"BOTTOM_TOP",distance:0,topToTop:0,locked:!1,fromComp:null,toComp:null,originalValue:NaN}}),define.dataSchema("AudioPlayer",{uri:{type:"string","default":""},autoPlay:{type:"Boolean","default":!1},loop:{type:"Boolean","default":!1},visible:{type:"Boolean","default":!0},volume:{type:"number","default":100},title:{type:"string","default":""},description:{type:"string","default":""},icon_uri:{type:"string","default":""},originalFileName:{type:"string","default":""}}),define.dataSchema("Boolean",{value:"boolean"}),define.dataSchema("ContactForm",{toEmailAddress:"string",bccEmailAddress:"string"}),define.dataSchema("EbayItemsBySeller",{sellerId:"string",registrationSite:"string"}),define.dataSchema("EditorSettings",{palletsFilterTags:"array",fontsFilterTags:"array",pagesFilterTags:"array"}),define.dataSchema("FlashComponent",{"extends":"Link",title:"string",uri:"string",description:"string",height:"number",width:"number",placeHolderImage:"ref"}),define.dataSchema("FlickrBadgeWidget",{userId:{type:"string","default":"74009459@N07"},userName:"string",tag:"string",imageCount:{type:"number","default":3},whichImages:{type:"string","default":"latest"},imageSize:{type:"string","default":"t"},layoutOrientation:{type:"string","default":"v"}}),define.dataSchema("GeoMap",{address:{type:"string","default":"10 West 18th St. New york, NY 10011"},latitude:{type:"number","default":"40.73"},longitude:{type:"number","default":"-74"},addressInfo:{type:"string","default":"Wix Lounge NYC"}}),define.dataSchema("HomePageLogin",{postLoginUrl:{type:"string","default":"http://www.wix.com",description:"some amazing description"},postSignUpUrl:{type:"string","default":"http://www.wix.com",description:"some amazing description"},startWith:{type:"string","enum":["login","createUser"],"default":"login",description:"some amazing description"}}),define.dataSchema("HtmlComponent",{sourceType:"string",url:"string"}),define.dataSchema("list",{items:"array"}),define.dataSchema("MenuData",{menuButton:"ref",pages:"ref"}),define.dataSchema("PayPalButton",{merchantID:{type:"string","default":"",description:"some amazing description"}}),define.dataSchema("PermaLink",{appType:{type:"string","enum":["ListsApps","ThirdPartyApps"]},dataItemRef:"ref",mutableSeoTitle:"string",correctPermaLinkRef:"ref"}),define.dataSchema("SelectOption",{value:"string",text:"string",enabled:{type:"boolean","default":"true"},description:"string"}),define.dataSchema("SelectableList",{items:{type:"refList",description:"a list of data items or data queries to select from","default":[]},selected:{type:"ref",description:"the selected data item/query","default":null}}),define.dataSchema("SiteButton",{"extends":"Link",label:{type:"string","default":"MY BUTTON"}}),define.dataSchema("SoundCloudWidget",{url:{type:"string","default":""},showArtWork:{type:"Boolean","default":!0},autoPlay:{type:"Boolean","default":!1},embedSource:{type:"string","default":""}}),define.dataSchema("TPA",{applicationId:{type:"string","default":"",description:"application ID"},appDefinitionId:{type:"string","default":"",description:"application Definition Id"}}),define.dataSchema("TPAWidget",{"extends":"TPA",widgetId:{type:"string","default":"",description:"some amazing description"}}),define.dataSchema("Table",{items:"refList",header:"refList",footer:"refList"}),define.dataSchema("Video",{videoId:"string",videoType:"string"}),define.dataSchema("WixHomepageMenu",{menuDataSource:{type:"string","enum":["topMenu","bottomMenu"],"default":"topMenu",description:"some amazing description"}}),define.dataSchema("ButtonProperties",{align:{type:"string","enum":["left","center","right"],"default":"center",description:"alignment of the menu"},margin:{type:"number","default":0,description:"text left and right margins"}}),define.dataSchema("ComboBoxInputProperties",{hasPrompt:{type:"boolean","default":!1,description:"Display prompt in combo"},promptText:{type:"string","default":"",description:"The text that will be displayed in the prompt"},promptValue:{type:"number","default":-1,description:"Data of prompt option"}}),define.dataSchema("EbayItemsBySellerProperties",{headerImage:{type:"string","enum":["0","2","3","4","5","6","7","8","9","10","11"],"default":0,description:"The widget's header"}}),define.dataSchema("FlashComponentProperties",{displayMode:{type:"string","enum":["original","fit","stretch"],"default":"original",description:"displayMode of the movie"}}),define.dataSchema("GalleryExpandProperties",{expandEnabled:{type:"boolean","default":!0},goToLinkText:{type:"string","default":"Go to link"},galleryImageOnClickAction:{type:"string","default":"unset","enum":["disabled","zoomMode","goToLink"]}}),define.dataSchema("GoogleMapProperties",{showZoom:{type:"boolean","default":!0,description:"show zoom control"},showPosition:{type:"boolean","default":!0,description:"show position control"},showStreetView:{type:"boolean","default":!0,description:"show Street View control"},showMapType:{type:"boolean","default":!0,description:"show map type control"},mapDragging:{type:"boolean","default":!0,description:"show map type control"},mapType:{type:"string","enum":["ROADMAP","TERRAIN","SATELLITE","HYBRID"],"default":"ROADMAP",description:"show zoom control"}}),define.dataSchema("HorizontalMenuProperties",{alignButtons:{type:"string","enum":["left","center","right"],"default":"center",description:"alignment of the menu buttons"},alignText:{type:"string","enum":["left","center","right"],"default":"center",description:"alignment of the menu buttons' text"},sameWidthButtons:{type:"boolean","default":!1,description:"Keep buttons the same size"},moreButtonLabel:{type:"string","default":"More",description:'Label to use for "more button"'},moreItemHeight:{type:"number","default":15,description:"height of items in the more menu"},stretchButtonsToMenuWidth:{type:"boolean","default":!0,description:""}}),define.dataSchema("LayoutProperties",{x:{type:"number","default":0,description:"x position"},y:{type:"number","default":0,description:"y position"},w:{type:"number","default":100,description:"width"},h:{type:"number","default":100,description:"height"},anchors:{type:"array",description:"list of anchors"}}),define.dataSchema("LinkBarProperties",{gallery:{type:"string","default":"clipart",description:"gallery type (photos, icons, backgrounds, etc..)"},iconSize:{type:"number","default":30,description:"Icon Size",minimum:16,maximum:128},spacing:{type:"number","default":5,description:"Spacing",minimum:1,maximum:50},bgScale:{type:"number","default":1,description:"Background scale",minimum:0,maximum:2},orientation:{type:"string","enum":["HORIZ","VERT"],"default":"HORIZ",description:"Orientation"}}),define.dataSchema("MatrixGalleryProperties",{"extends":"GalleryExpandProperties",imageMode:{type:"string","default":"clipImage","enum":["clipImage","flexibleWidthFixed"]},numCols:{type:"number","default":3,description:"Number of columns",minimum:1,maximum:10},maxRows:{type:"number","default":2,description:"Maximum number of rows",minimum:1,maximum:10},incRows:{type:"number","default":2,description:"Row number increase",minimum:1,maximum:10},margin:{type:"number","default":15,description:"Margin around each item",minimum:0,maximum:250}}),define.dataSchema("NumberInputProperties",{minValue:{type:"number","default":0,description:"minimum allowed value"},maxValue:{type:"number","default":999,description:"maximum allowed value"}}),define.dataSchema("PageGroupProperties",{transition:{type:"string","enum":["none","swipeHorizontalFullScreen","swipeVerticalFullScreen","crossfade","outIn"],"default":"slide",description:"page transition"}}),define.dataSchema("PaginatedGridGalleryProperties",{"extends":"GalleryExpandProperties",imageMode:{type:"string","default":"clipImage","enum":["clipImage"]},numCols:{type:"number","default":3,description:"Number of columns",minimum:1,maximum:10},maxRows:{type:"number","default":3,description:"Maximum number of rows",minimum:1,maximum:10},margin:{type:"number","default":0,description:"Margin around each item",minimum:0,maximum:250},transition:{type:"string","default":"seq_crossFade_All","enum":["none","seq_crossFade_All","seq_shrink_All","swipe_horiz_All","swipe_vert_All","seq_random"]},transDuration:{type:"number",minimum:0,maximum:5,"default":1,description:"Duration of the transition in sec"},autoplayInterval:{type:"number","default":3,minimum:0,maximum:30,description:"Autplay interval"},autoplay:{type:"boolean","default":!1,description:""},showAutoplay:{type:"boolean","default":!0,description:""},showNavigation:{type:"boolean","default":!0,description:""},showCounter:{type:"boolean","default":!0,description:""}}),define.dataSchema("PayPalButtonProperties",{buttonType:{type:"string","enum":["buy","donate"],"default":"buy",description:"buy or donate button"},itemName:{type:"string","default":"",description:"some amazing description"},itemID:{type:"string","default":"",description:"some amazing description"},organizationName:{type:"string","default":"",description:"some amazing description"},organizationID:{type:"string","default":"",description:"some amazing description"},amount:{type:"string","default":"",description:"some amazing description"},currencyCode:{type:"string","enum":["USD","GBP","NIS"],"default":"USD",description:"Currency Code"},target:{type:"string","enum":["_self","_blank"],"default":"_blank",description:"Currency Code"},showCreditCards:{type:"boolean","default":!0,description:"Show credit card symbols"},smallButton:{type:"boolean","default":!1,description:"use small button"}}),define.dataSchema("ButtonProperties",{align:{type:"string","enum":["left","center","right"],"default":"center",description:"alignment of the menu"},margin:{type:"number","default":0,description:"text left and right margins"}}),define.dataSchema("SlideShowGalleryProperties",{"extends":"GalleryExpandProperties",imageMode:{type:"string","default":"clipImage","enum":["clipImage","flexibleHeight"]},transition:{type:"string","enum":["none","swipeVertical","swipeHorizontal","crossfade","outIn"],"default":"swipeHorizontal",description:"Transition between items of the gallery"},autoplayInterval:{type:"number","default":"5",minimum:0,maximum:30,description:"Autplay interval"},autoplay:{type:"boolean","default":!1,description:""},transDuration:{type:"number",minimum:0,maximum:5,"default":1,description:"Duration of the transition in sec"},bidirectional:{type:"boolean","default":!0,description:"Decides whether the transition direction reflects Prev/Next"},reverse:{type:"boolean","default":!1,description:"If bidirectional, inverts the direction of transitions"},showAutoplay:{type:"boolean","default":!0,description:""},showNavigation:{type:"boolean","default":!0,description:""},showCounter:{type:"boolean","default":!0,description:""}}),define.dataSchema("SliderGalleryProperties",{"extends":"GalleryExpandProperties",imageMode:{type:"string","default":"clipImage","enum":["clipImage","flexibleWidth"]},margin:{type:"number","default":15,description:"Margin around each item",minimum:0,maximum:250},maxSpeed:{type:"number","default":"5",minimum:1,maximum:30,description:"Speed"},aspectRatio:{type:"number",minimum:.1,maximum:3,"default":1,description:""},aspectRatioPreset:{type:"string","enum":["16:9","4:3","1:1","3:4","9:16"],"default":"4:3"},loop:{type:"boolean","default":!0,description:""},showCounter:{type:"boolean","default":!0,description:""}}),define.dataSchema("TableComponentProperties",{minHeight:{type:"number","default":undefined,description:"minimum allowed value"}}),define.dataSchema("TwitterFeedProperties",{numOfTweets:{type:"number","default":"5",description:"Number of tweets in feed"},subject:{type:"string","default":"What's being said about...",description:"subject line"},title:{type:"string","default":"Me...",description:"title line"}}),define.dataSchema("VideoProperties",{autoplay:{type:"boolean","default":!1,description:"video autoplay on load"},loop:{type:"boolean","default":!1,description:"play video in a loop"},showinfo:{type:"boolean","default":!1,description:"show video title and author"},lightTheme:{type:"boolean","default":!1,description:"show video with light theme"},showControls:{type:"string","enum":["always_show","always_hide","temp_show"],"default":"always_show",description:"show / hide controls"}}),define.dataSchema("WFacebookCommentProperties",{numPosts:{type:"number","default":2,minimum:0,maximum:10,description:"the number of posts display by default"},width:{type:"number","default":"555",description:"the width of the plugin, in pixels"},colorScheme:{type:"string","enum":["light","dark"],"default":"light",description:"the color scheme of the plugin"}}),define.dataSchema("WFacebookLikeProperties",{layout:{type:"string","enum":["standard","button_count","box_count"],"default":"standard",description:"the layout of the button"},send:{type:"boolean","default":!1,description:"enable/disable the send button"},show_faces:{type:"boolean","default":!1,description:"show the faces of your friends that liked this item"},width:{type:"string","default":"225",description:"the width of the Like button"},action:{type:"string","enum":["like","recommend"],"default":"like",description:" the verb to display on the button. Options: *like*, *recommend*"},font:{type:"string","enum":["helvetica","arial","lucida grande","segoe ui","tahoma","trebuchet ms","verdana"],"default":"helvetica",description:"the font to display in the button"},colorScheme:{type:"string","enum":["light","dark"],"default":"light",description:"the color scheme for the like button"}}),define.dataSchema("WGooglePlusOneProperties",{size:{type:"string","enum":["small","medium","standard","tall"],"default":"standard",description:"The button size to render"},annotation:{type:"string","enum":["none","bubble","inline"],"default":"inline",description:"The annotation to display next to the button."},width:{type:"string","default":"",description:"If annotation is set to *inline*, the width in pixels to use for the button and its inline annotation. If omitted, a button and its inline annotation use 450px."}}),define.dataSchema("WPhotoProperties",{displayMode:{type:"string","enum":["fill","full","stretch","fitWidth","fitWidthStrict","fitHeightStrict"],"default":"fill",description:"displayMode of the photo"}}),define.dataSchema("WTwitterFollowProperties",{showCount:{type:"boolean","default":!0,description:"Followers count display"},showScreenName:{type:"boolean","default":!0,description:"Show screen name"},textColor:{type:"hexcolor","default":"",description:"HEX color code for the text color"},linkColor:{type:"hexcolor","default":"",description:"HEX color code for the Username link color"},width:{type:"number","default":"100",description:"width of the Follow Button"},dataLang:{type:"string","enum":["en","fr","de","it","es","ko","ja"],"default":"en",description:"The language for the Tweet Button"}}),define.dataSchema("WTwitterTweetProperties",{dataCount:{type:"string","enum":["none","horizontal","vertical"],"default":"horizontal",description:"Count box position"},dataLang:{type:"string","enum":["en","fr","de","it","es","ko","ja"],"default":"en",description:"The language for the Tweet Button"}}),define.Const("TransitionTypes",{SWIPE_HORIZONTAL:"swipeHorizontal",SWIPE_HORIZONTAL_FULLSCREEN:"swipeHorizontalFullScreen",SWIPE_VERTICAL:"swipeVertical",SWIPE_VERTICAL_FULLSCREEN:"swipeVerticalFullScreen",CROSS_FADE:"crossfade",SHRINK_FADE:"shrinkfade",OUT_IN:"outIn",NONE:"none"}),define.dataItem.multi({CK_EDITOR_FONT_STYLES:{type:"map",items:{font_0:{seoTag:"h1",label:"FONT_0_LABEL"},font_1:{seoTag:"h2",label:"FONT_1_LABEL"},font_2:{seoTag:"h2",label:"FONT_2_LABEL"},font_3:{seoTag:"h3",label:"FONT_3_LABEL"},font_4:{seoTag:"h4",label:"FONT_4_LABEL"},font_5:{seoTag:"h5",label:"FONT_5_LABEL"},font_6:{seoTag:"h6",label:"FONT_6_LABEL"},font_7:{seoTag:"p",label:"FONT_7_LABEL"},font_8:{seoTag:"p",label:"FONT_8_LABEL"},font_9:{seoTag:"p",label:"FONT_9_LABEL"},font_10:{seoTag:"p",label:"FONT_10_LABEL"}}}}),define.oldClass({name:"external_apis.flickr.FlickrAPI",Class:{_apiKey:"0f1c119e0c156ac4b80052270d0a3202",_apiURL:"http://api.flickr.com/services/rest/?format=json",_callback:undefined,getUserID:function(e,t){var n;n={method:"flickr.people.findByUsername",username:e},this._callback=t,this._call(n,function(e){var n,r;n=e.stat!="fail",r=e.message,n===!0?t(n,e.user.id):t(n,r)})},getTags:function(e,t){var n;n={method:"flickr.tags.getListUser",user_id:e},this._callback=t,this._call(n,function(e){var n,r;r=e.stat!="fail",n=e.message,r===!0?t(r,e.who.tags.tag):t(r,n)})},_call:function(e,t){e.api_key=this._apiKey;var n=new Request.JSONP({url:this._apiURL,callbackKey:"jsoncallback",data:e,onComplete:t,timeout:5e3,onFailure:this._handleTimeout});n.send()},_handleTimeout:function(){this._callback&&this._callback(!1,"Failed connecting to Flickr. Please try again in a few minutes.")}}});